"use strict";(self.webpackChunktables=self.webpackChunktables||[]).push([["reference-table-lazy","store","src_views_LinkReferenceWidget_vue-data_image_svg_xml_3c_21--_20-_20SPDX-FileCopyrightText_202-58f0b2","data_image_svg_xml_3c_21--_20-_20SPDX-FileCopyrightText_202020_20Google_20Inc_20-_20SPDX-Lice-cc29b1"],{13186:(t,e,n)=>{n.d(e,{A:()=>a});const a={name:"IconTables",props:{title:{type:String,default:""},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}}},70579:(t,e,n)=>{n.d(e,{A:()=>o});var a=n(76333),i=n(64380),l=n(53334);const o={components:{NcEmptyContent:a.yI,Alert:i.A},props:{canEdit:{type:Boolean,default:!0},text:{type:String,default:""},showBorder:{type:Boolean,default:!0},showReadonlyBar:{type:Boolean,default:!0},height:{type:String,default:null}},data:()=>({textAppAvailable:!!window.OCA?.Text?.createEditor,editor:null,localValue:""}),computed:{localText:{get(){return this.localValue},set(t){this.localValue=t,this.$emit("update:text",t)}}},watch:{text(t){t.trim()!==this.localValue.trim()&&(this.localValue=t,""===t?this.setupEditor():this.editor?.setContent(t))}},async mounted(){this.localValue=this.text,await this.setupEditor(),this.editor?.setContent(this.localValue,!1)},beforeDestroy(){this?.editor?.destroy()},methods:{t:l.Tl,async setupEditor(){this?.editor?.destroy(),this.textAppAvailable?this.editor=await window.OCA.Text.createEditor({el:this.$refs.editor,content:this.localText,readOnly:!this.canEdit,onUpdate:t=>{let{markdown:e}=t;this.localText=e}}):console.debug("try to load editor, but not initialized")}}}},10119:(t,e,n)=>{n.d(e,{A:()=>a});const a={components:{LinkIcon:n(26546).A},filters:{truncate:(t,e)=>t?t.length>=e?t.substring(0,e)+"...":t:""},props:{thumbnailUrl:{type:String,default:null},iconUrl:{type:String,default:null},subline:{type:String,default:null},title:{type:String,default:null},url:{type:String,default:null},truncateLength:{type:Number,default:40},iconSize:{type:Number,default:35},hideDefaultIcon:{type:Boolean,default:!1},underlineTitle:{type:Boolean,default:!1}}}},5051:(t,e,n)=>{n.d(e,{X:()=>a,Y:()=>i});var a=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon tables-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{attrs:{fill:t.fillColor,width:t.size,height:t.size,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M4,3H20A2,2 0 0,1 22,5V20A2,2 0 0,1 20,22H4A2,2 0 0,1 2,20V5A2,2 0 0,1 4,3M4,7V10H8V7H4M10,7V10H14V7H10M20,10V7H16V10H20M4,12V15H8V12H4M4,20H8V17H4V20M10,12V15H14V12H10M10,20H14V17H10V20M20,20V17H16V20H20M20,12H16V15H20V12Z"}})])])},i=[]},69187:(t,e,n)=>{n.d(e,{X:()=>a,Y:()=>i});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor-wrapper",class:{border:t.showBorder,"hide-readonly-bar":!t.showReadonlyBar,"height-small":"small"===t.height}},[t.textAppAvailable?e("div",[e("div",{ref:"editor"})]):e("div",[e("NcEmptyContent",{attrs:{name:t.t("tables","Error"),description:t.t("tables","Could not load editor, text not available.")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Alert",{attrs:{size:20}})]},proxy:!0}])})],1)])},i=[]},13325:(t,e,n)=>{n.d(e,{X:()=>a,Y:()=>i});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon-label-container",attrs:{"data-cy":t.title}},[t.thumbnailUrl?e("img",{attrs:{src:t.thumbnailUrl,width:t.iconSize,height:t.iconSize}}):t.iconUrl?e("img",{attrs:{src:t.iconUrl,width:t.iconSize,height:t.iconSize}}):t.hideDefaultIcon?t._e():e("LinkIcon",{attrs:{size:t.iconSize}}),t._v(" "),e("div",{staticClass:"labels"},[e("div",{class:{underline:t.underlineTitle}},[e("a",{attrs:{href:t.url,target:"_blank",title:t.title}},[t._v(t._s(t._f("truncate")(t.title,t.truncateLength)))])]),t._v(" "),t.subline?e("p",{staticClass:"multiSelectOptionLabel span"},[t._v("\n\t\t\t"+t._s(t.subline)+"\n\t\t")]):t._e()])],1)},i=[]},16880:(t,e,n)=>{n.d(e,{A:()=>i});var a=n(21777);const i={methods:{ownsTable:t=>t?.ownership===(0,a.HW)().uid,canManageTable:t=>!t.isShared||!!(t.isShared&&t?.onSharePermissions?.manage||t?.ownership===(0,a.HW)().uid),canManageElement(t){return!!this.canManageTable(t)||(!t.isShared||!!(t.isShared&&t?.onSharePermissions?.manage||t?.ownership===(0,a.HW)().uid))},canReadData(t){return!!(this.canManageTable(t)||this.canDeleteData(t)||this.canUpdateData(t)||this.canManageElement(t))||(!t.isShared||!!(t.isShared&&t.onSharePermissions.read||t?.ownership===(0,a.HW)().uid))},canCreateRowInElement(t){return!(!this.canManageTable(t)&&!this.canManageElement(t))||(!t.isShared||!!(t.isShared&&t.onSharePermissions.create||t?.ownership===(0,a.HW)().uid))},canShareElement(t){return!(t.isShared&&t.ownership!==(0,a.HW)().uid&&!this.canManageElement(t))},canDeleteData(t){return!(!this.canManageTable(t)&&!this.canManageElement(t))||(!1===t.isShared||!0===t.isShared&&(!0===t.onSharePermissions.delete||t.ownership===(0,a.HW)().uid))},canUpdateData(t){return!(!this.canManageTable(t)&&!this.canManageElement(t))||(!1===t.isShared||!0===t.isShared&&(!0===t.onSharePermissions.update||t.ownership===(0,a.HW)().uid))},ownsContext:t=>t.owner===(0,a.HW)().uid}}},93742:(t,e,n)=>{n.d(e,{HH:()=>a,PB:()=>s,PF:()=>l,VY:()=>d,_y:()=>r,ay:()=>o,oY:()=>i,t0:()=>c});const a=0,i=1,l=-1,o=-2,s=-3,r=-4,c=-5,d=["http:","https:"]},35554:(t,e,n)=>{n.d(e,{A:()=>i});var a=n(70715);const i={methods:{ucfirst:t=>t?t.charAt(0).toUpperCase()+t.slice(1):"",async isUrlReachable(t){if(!t)return!1;try{return await a.Ay.get(t),!0}catch(t){return!1}},hasJsonStructure(t){if("string"!=typeof t)return!1;try{const e=JSON.parse(t),n=Object.prototype.toString.call(e);return"[object Object]"===n||"[object Array]"===n}catch(t){return!1}}}}},16809:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".options.row[data-v-053a123c]{width:var(--app-content-width, auto);position:sticky;top:60px;left:0;z-index:15;background-color:var(--color-main-background);padding-top:4px;padding-bottom:4px}","",{version:3,sources:["webpack://./src/shared/components/ncTable/NcTable.vue"],names:[],mappings:"AACA,8BACC,oCAAA,CACA,eAAA,CACA,QAAA,CACA,MAAA,CACA,UAAA,CACA,6CAAA,CACA,eAAA,CACA,kBAAA",sourceRoot:""}]);const s=o},43653:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".image_container.widget-file{height:auto !important}.image_container.widget-file img{cursor:pointer !important}","",{version:3,sources:["webpack://./src/shared/components/ncTable/NcTable.vue"],names:[],mappings:"AACA,6BACC,sBAAA,CAGD,iCACC,yBAAA",sourceRoot:""}]);const s=o},23600:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".highlighted[data-v-333cc36c]{background-color:var(--color-border-maxcontrast);color:var(--color-primary-element-text-dark)}.outlined[data-v-333cc36c]{border:1px solid}.filter[data-v-333cc36c]{padding-top:1px;padding-left:calc(var(--default-grid-baseline)*2);padding-right:calc(var(--default-grid-baseline)*6);padding-bottom:calc(var(--default-grid-baseline)*.5);font-size:.9em;border-radius:var(--border-radius-pill);margin-bottom:calc(var(--default-grid-baseline)*1);width:fit-content;color:var(--color-primary-element-text-dark);line-height:initial}button[data-v-333cc36c]{position:absolute;padding-top:1px;min-height:auto;padding-bottom:1px;padding-left:2px;padding-right:2px;margin:0;margin-left:4px}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/FilterLabel.vue"],names:[],mappings:"AAEA,8BACC,gDAAA,CACA,4CAAA,CAGD,2BACC,gBAAA,CAGD,yBACC,eAAA,CACA,iDAAA,CACA,kDAAA,CACA,oDAAA,CACA,cAAA,CACA,uCAAA,CACA,kDAAA,CACA,iBAAA,CACA,4CAAA,CACA,mBAAA,CAGD,wBACC,iBAAA,CACA,eAAA,CACA,eAAA,CACA,kBAAA,CACA,gBAAA,CACA,iBAAA,CACA,QAAA,CACA,eAAA",sourceRoot:""}]);const s=o},46101:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".icon-label-container[data-v-cd00e4b0]{display:flex;align-items:center}.icon-label-container img[data-v-cd00e4b0],.icon-label-container[data-v-cd00e4b0] svg{margin-right:calc(var(--default-grid-baseline)*2)}.labels[data-v-cd00e4b0]{display:block}.underline a[data-v-cd00e4b0]{text-decoration:underline}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/LinkWidget.vue"],names:[],mappings:"AAEA,uCACC,YAAA,CACA,kBAAA,CAEA,sFACC,iDAAA,CAIF,yBACC,aAAA,CAGD,8BACC,yBAAA",sourceRoot:""}]);const s=o},90446:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"div[data-v-25628c35]{text-align:right}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellDateTime.vue"],names:[],mappings:"AAEA,qBACC,gBAAA",sourceRoot:""}]);const s=o},3514:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,'div[data-v-706fd71a]{max-width:670px;max-height:calc(var(--default-line-height)*6);overflow-y:scroll;min-width:100px;margin-top:calc(var(--default-grid-baseline)*2);margin-bottom:calc(var(--default-grid-baseline)*2)}[data-v-706fd71a] .text-editor__wrapper div.ProseMirror{padding:0px 0px 0px 0px}[data-v-706fd71a] div[contenteditable="false"]{background:rgba(0,0,0,0);color:var(--color-main-text);width:auto;min-height:auto;opacity:1;font-size:var(--default-font-size)}[data-v-706fd71a] .editor__content{max-width:100% !important}',"",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellEditor.vue"],names:[],mappings:"AAEA,qBACC,eAAA,CACA,6CAAA,CACA,iBAAA,CACA,eAAA,CACA,+CAAA,CACA,kDAAA,CAGD,wDACC,uBAAA,CAID,+CACC,wBAAA,CACA,4BAAA,CACA,UAAA,CACA,eAAA,CACA,SAAA,CACA,kCAAA,CAGD,mCACC,yBAAA",sourceRoot:""}]);const s=o},33944:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"[data-v-1b382b5e] .tiptap-reader-cell{max-height:calc(var(--default-line-height)*6);overflow-y:scroll;min-width:100px;white-space:pre-wrap;margin-top:calc(var(--default-grid-baseline)*2);margin-bottom:calc(var(--default-grid-baseline)*2)}[data-v-1b382b5e] .tiptap-reader-cell li{display:flex;align-items:center}[data-v-1b382b5e] .tiptap-reader-cell li>div{padding-left:calc(var(--default-grid-baseline)*2)}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellHtml.vue"],names:[],mappings:"AAEA,sCACC,6CAAA,CACA,iBAAA,CACA,eAAA,CACA,oBAAA,CACA,+CAAA,CACA,kDAAA,CAEA,yCACC,YAAA,CACA,kBAAA,CAGD,6CACC,iDAAA",sourceRoot:""}]);const s=o},55865:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=o},80135:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"ul[data-v-b614b94c]{list-style-type:disc;padding-left:calc(var(--default-grid-baseline)*3)}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellMultiSelection.vue"],names:[],mappings:"AAEA,oBACC,oBAAA,CACA,iDAAA",sourceRoot:""}]);const s=o},3073:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"div[data-v-0493333b]{text-align:right}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellNumber.vue"],names:[],mappings:"AAEA,qBACC,gBAAA",sourceRoot:""}]);const s=o},23202:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"span[data-v-524f7dde]{cursor:help}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellSelection.vue"],names:[],mappings:"AAEA,sBACC,WAAA",sourceRoot:""}]);const s=o},74872:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".table-cell-usergroup[data-v-1c6dd35c]{display:flex;flex-wrap:wrap;padding:10px}.usergroup-entry[data-v-1c6dd35c]{padding-right:10px}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellUsergroup.vue"],names:[],mappings:"AACA,uCACC,YAAA,CACA,cAAA,CACA,YAAA,CAGD,kCACC,kBAAA",sourceRoot:""}]);const s=o},19145:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".cell[data-v-5ca378d8]{display:inline-flex;align-items:center}.cell span[data-v-5ca378d8]{padding-left:12px}.filter-wrapper[data-v-5ca378d8]{margin-top:calc(var(--default-grid-baseline)*-1);margin-bottom:calc(var(--default-grid-baseline)*2);display:flex;flex-wrap:wrap;gap:0 calc(var(--default-grid-baseline)*2)}[data-v-5ca378d8] .checkbox-radio-switch__icon{margin:0}.clickable[data-v-5ca378d8]{cursor:pointer}.hidden-indicator[data-v-5ca378d8]{border-right:solid;border-color:var(--color-primary);border-width:3px;padding-left:calc(var(--default-grid-baseline)*1);cursor:pointer}.hidden-indicator-first[data-v-5ca378d8]{border-right:solid;border-color:var(--color-primary);border-width:3px;padding-left:calc(var(--default-grid-baseline)*4);cursor:pointer}.cell-wrapper[data-v-5ca378d8]{display:flex;justify-content:space-between}.cell-options-wrapper[data-v-5ca378d8]{display:flex;flex-direction:column;width:100%}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableHeader.vue"],names:[],mappings:"AAEA,uBACC,mBAAA,CACA,kBAAA,CAGD,4BACC,iBAAA,CAID,iCACC,gDAAA,CACA,kDAAA,CACA,YAAA,CACA,cAAA,CACA,0CAAA,CAGD,+CACC,QAAA,CAGD,4BACC,cAAA,CAGD,mCACC,kBAAA,CACA,iCAAA,CACA,gBAAA,CACA,iDAAA,CACA,cAAA,CAGD,yCACC,kBAAA,CACA,iCAAA,CACA,gBAAA,CACA,iDAAA,CACA,cAAA,CAGD,+BACC,YAAA,CACA,6BAAA,CAGD,uCACC,YAAA,CACA,qBAAA,CACA,UAAA",sourceRoot:""}]);const s=o},58409:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".menu[data-v-f1c684ba]{padding-left:calc(var(--default-grid-baseline)*1);min-width:44px}.selected[data-v-f1c684ba]{background-color:var(--color-primary-element-light) !important;border-radius:6px}.selected-option[data-v-f1c684ba]{width:100%}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableHeaderColumnOptions.vue"],names:[],mappings:"AACA,uBACC,iDAAA,CACA,cAAA,CAGD,2BACC,8DAAA,CACA,iBAAA,CAGD,kCACC,UAAA",sourceRoot:""}]);const s=o},70341:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"tr.selected[data-v-ab985e7e]{background-color:var(--color-primary-light) !important}[data-v-ab985e7e] .search-result > div{background-color:var(--color-primary-element-light);border-radius:var(--border-radius-large);padding:calc(var(--default-grid-baseline)*3)}[data-v-ab985e7e] .checkbox-radio-switch__icon{margin:0}","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableRow.vue"],names:[],mappings:"AAEA,6BACC,sDAAA,CAGD,uCACC,mDAAA,CACA,wCAAA,CACA,4CAAA,CAGD,+CACC,QAAA",sourceRoot:""}]);const s=o},29819:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"[data-v-0c249b26] .vs__clear{display:none}[data-v-0c249b26] .v-select{min-width:95px !important}[data-v-0c249b26] .v-select .vs__dropdown-toggle{background:none}[data-v-0c249b26] .text-editor__wrapper .paragraph-content:last-child{margin-bottom:0 !important}[data-v-0c249b26] .text-editor__wrapper .ProseMirror > *:first-child{margin-top:0 !important}.selected-page[data-v-0c249b26]{padding-left:5px;display:inline-flex;align-items:center}.page-number[data-v-0c249b26]{padding-inline:5px}.large-width[data-v-0c249b26]{width:100vw !important;left:0 !important}.pagination-items[data-v-0c249b26]{background-color:var(--color-main-background);border-radius:var(--border-radius-large);pointer-events:all;display:flex;align-items:center}.pagination-footer[data-v-0c249b26]{box-shadow:var(--box-shadow);filter:drop-shadow(0 1px 6px var(--color-box-shadow));padding-bottom:20px;width:calc(100vw - 316px);pointer-events:none;display:flex;justify-content:center;align-items:center}[data-v-0c249b26] table{position:relative;border-collapse:collapse;border-spacing:0;table-layout:auto;width:100%;border:none}[data-v-0c249b26] table *{border:none}[data-v-0c249b26] table td,[data-v-0c249b26] table th{padding-right:8px;max-width:500px}[data-v-0c249b26] table td .showOnHover,[data-v-0c249b26] table th .showOnHover{opacity:0}[data-v-0c249b26] table td:hover .showOnHover,[data-v-0c249b26] table th:hover .showOnHover,[data-v-0c249b26] table .showOnHover:focus-within{opacity:1}[data-v-0c249b26] table td:not(:first-child),[data-v-0c249b26] table th:not(:first-child){padding-right:8px;padding-left:8px}[data-v-0c249b26] table tr{height:51px;background-color:var(--color-main-background)}[data-v-0c249b26] table thead{position:sticky;top:108px;z-index:6}[data-v-0c249b26] table thead tr th{vertical-align:middle;color:var(--color-text-maxcontrast);box-shadow:inset 0 -1px 0 var(--color-border);background-color:var(--color-main-background-translucent);z-index:5}[data-v-0c249b26] table tbody td{text-align:left;vertical-align:middle;border:1px solid var(--color-border-dark)}[data-v-0c249b26] table tbody tr:active,[data-v-0c249b26] table tbody tr:hover,[data-v-0c249b26] table tbody tr:focus,[data-v-0c249b26] table tbody tr:hover .editor-wrapper .editor{background-color:var(--color-background-dark)}[data-v-0c249b26] table tbody .editor-wrapper{min-width:100px;overflow-y:auto}[data-v-0c249b26] table tbody .editor-wrapper .preview .widget-custom{margin-top:0;margin-bottom:0;max-height:200px;overflow:hidden}[data-v-0c249b26] table tbody .editor-wrapper .preview .widget-custom img{height:auto !important;width:100% !important}[data-v-0c249b26] table tbody .editor-wrapper .preview [data-node-view-content]{display:none}[data-v-0c249b26] table tbody tr:focus-within>td:last-child{opacity:1}[data-v-0c249b26] table tr>th.sticky:first-child,[data-v-0c249b26] table tr>td.sticky:first-child{position:sticky;left:0;padding-left:calc(var(--default-grid-baseline)*4);padding-right:calc(var(--default-grid-baseline)*4);width:60px;background-color:inherit;z-index:5}[data-v-0c249b26] table tr>th.sticky:last-child,[data-v-0c249b26] table tr>td.sticky:last-child{position:sticky;right:0;width:55px;background-color:inherit;padding-right:16px}[data-v-0c249b26] table tr>td.sticky:last-child{opacity:0}[data-v-0c249b26] table tr:hover>td:last-child{opacity:1}","",{version:3,sources:["webpack://./src/shared/components/ncTable/sections/CustomTable.vue"],names:[],mappings:"AAEA,6BACC,YAAA,CAGD,4BACC,yBAAA,CACA,iDACC,eAAA,CAIF,sEACC,0BAAA,CAGD,qEACC,uBAAA,CAGD,gCACC,gBAAA,CAEA,mBAAA,CACA,kBAAA,CAGD,8BACC,kBAAA,CAGD,8BACC,sBAAA,CACA,iBAAA,CAGD,mCACC,6CAAA,CACA,wCAAA,CACA,kBAAA,CAEA,YAAA,CACA,kBAAA,CAGD,oCACC,4BAAA,CACA,qDAAA,CACA,mBAAA,CACA,yBAAA,CACA,mBAAA,CAEA,YAAA,CACA,sBAAA,CACA,kBAAA,CAGD,wBACC,iBAAA,CACA,wBAAA,CACA,gBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,0BACC,WAAA,CAID,sDACC,iBAAA,CACA,eAAA,CAGD,gFACC,SAAA,CAGD,8IACC,SAAA,CAGD,0FACC,iBAAA,CACA,gBAAA,CAGD,2BACC,WAAA,CACA,6CAAA,CAGD,8BACC,eAAA,CACA,SAAA,CACA,SAAA,CAGC,oCACC,qBAAA,CACA,mCAAA,CACA,6CAAA,CACA,yDAAA,CACA,SAAA,CAOF,iCACC,eAAA,CACA,qBAAA,CACA,yCAAA,CAGD,qLACC,6CAAA,CAID,8CACC,eAAA,CACA,eAAA,CAEA,sEACC,YAAA,CACA,eAAA,CACA,gBAAA,CACA,eAAA,CAEA,0EACC,sBAAA,CACA,qBAAA,CAIF,gFACC,YAAA,CAIF,4DACC,SAAA,CAIF,kGACC,eAAA,CACA,MAAA,CACA,iDAAA,CACA,kDAAA,CACA,UAAA,CACA,wBAAA,CACA,SAAA,CAGD,gGACC,eAAA,CACA,OAAA,CACA,UAAA,CACA,wBAAA,CACA,kBAAA,CAGD,gDAEC,SAAA,CAGD,+CAEC,SAAA",sourceRoot:""}]);const s=o},83841:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".sticky[data-v-3619d434]{position:-webkit-sticky;position:sticky;top:90px;left:0}.selected-rows-option[data-v-3619d434]{justify-content:flex-end;display:inline-flex;white-space:nowrap;overflow:hidden;min-width:fit-content}.add-padding-left[data-v-3619d434]{padding-left:calc(var(--default-grid-baseline)*1)}[data-v-3619d434] .counter-bubble__counter{max-width:fit-content}.actionButtonsLeft[data-v-3619d434]{display:inline-flex;align-items:center;padding-left:calc(var(--default-grid-baseline)*1)}[data-v-3619d434] .actionButtonsLeft button{min-width:fit-content;margin-top:5px}.searchAndFilter[data-v-3619d434]{margin-left:calc(var(--default-grid-baseline)*3);width:auto;min-width:100px}","",{version:3,sources:["webpack://./src/shared/components/ncTable/sections/Options.vue"],names:[],mappings:"AAEA,yBACC,uBAAA,CACA,eAAA,CACA,QAAA,CACA,MAAA,CAGD,uCACC,wBAAA,CACA,mBAAA,CACA,kBAAA,CACA,eAAA,CACA,qBAAA,CAGD,mCACC,iDAAA,CAGD,2CACC,qBAAA,CAGD,oCACC,mBAAA,CACA,kBAAA,CACA,iDAAA,CAGD,4CACC,qBAAA,CACA,cAAA,CAGD,kCACC,gDAAA,CACA,UAAA,CACA,eAAA",sourceRoot:""}]);const s=o},61157:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".tables-content-widget[data-v-2801481a]{min-height:max(50vh,200px);height:50vh;overflow:scroll}.tables-content-widget .header[data-v-2801481a]{position:sticky;top:0;left:0;z-index:1}.tables-content-widget .header[data-v-2801481a] :where(.options){position:sticky;top:57px;z-index:1;padding-bottom:10px;background-color:var(--color-main-background)}.tables-content-widget .header h2[data-v-2801481a]{position:sticky;top:0;min-width:var(--widget-content-width);z-index:1;background-color:var(--color-main-background);margin:0 !important;padding:calc(var(--default-grid-baseline)*4)}.tables-content-widget .header h2 .loading-icon[data-v-2801481a]{display:inline-block;vertical-align:middle}.tables-content-widget .nc-table[data-v-2801481a]{min-width:var(--widget-content-width)}.tables-content-widget .nc-table[data-v-2801481a] :where(.options.row){display:none}.tables-content-widget .nc-table[data-v-2801481a] :where(thead){position:sticky;top:117px}.tables-content-widget .nc-table[data-v-2801481a] :where(thead) :where(.cell-wrapper){min-width:150px;max-width:200px}.tables-content-widget .nc-table[data-v-2801481a] :where(thead) :where(.sticky){background:rgba(0,0,0,0) !important}.tables-content-widget .nc-table[data-v-2801481a] :where(.pagination-footer){width:unset !important;left:unset !important}.tables-content-widget[data-v-2801481a] .options.row{width:calc(var(--widget-content-width, 100%) - 12px)}","",{version:3,sources:["webpack://./src/views/ContentReferenceWidget.vue"],names:[],mappings:"AAEA,wCACC,0BAAA,CACA,WAAA,CACA,eAAA,CAEA,gDACC,eAAA,CACA,KAAA,CACA,MAAA,CACA,SAAA,CAEA,iEACC,eAAA,CACA,QAAA,CACA,SAAA,CACA,mBAAA,CACA,6CAAA,CAGD,mDACC,eAAA,CACA,KAAA,CACA,qCAAA,CACA,SAAA,CACA,6CAAA,CACA,mBAAA,CACA,4CAAA,CAEA,iEACC,oBAAA,CACA,qBAAA,CAKH,kDACC,qCAAA,CAEA,uEACC,YAAA,CAGD,gEACC,eAAA,CACA,SAAA,CAEA,sFACC,eAAA,CACA,eAAA,CAGD,gFACC,mCAAA,CAIF,6EACC,sBAAA,CACA,qBAAA,CAIF,qDACC,oDAAA",sourceRoot:""}]);const s=o},48906:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,".tables-table[data-v-ddc6748c]{width:100%;white-space:normal;padding:12px;display:flex}.tables-table a[data-v-ddc6748c]{padding:0 !important}.tables-table a[data-v-ddc6748c]:not(:hover){text-decoration:unset !important}.tables-table .line[data-v-ddc6748c]{font-size:1.3em;padding-bottom:calc(var(--default-grid-baseline)*2)}.tables-table--image[data-v-ddc6748c]{margin-right:12px;display:flex;align-items:center}.tables-table--image .table-emoji[data-v-ddc6748c]{display:flex;align-items:center;height:50px;font-size:50px}.tables-table .spacer[data-v-ddc6748c]{flex-grow:1}.tables-table .details[data-v-ddc6748c]{display:inline-flex;align-items:self-start}[data-v-ddc6748c] .counter-bubble__counter{max-width:fit-content !important}","",{version:3,sources:["webpack://./src/views/LinkReferenceWidget.vue"],names:[],mappings:"AACA,+BACC,UAAA,CACA,kBAAA,CACA,YAAA,CACA,YAAA,CAEA,iCACC,oBAAA,CACA,6CACC,gCAAA,CAKF,qCACC,eAAA,CACA,mDAAA,CAGD,sCACC,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,mDACC,YAAA,CACA,kBAAA,CACA,WAAA,CACA,cAAA,CAIF,uCACC,WAAA,CAGD,wCACC,mBAAA,CACA,sBAAA,CAIF,2CACC,gCAAA",sourceRoot:""}]);const s=o},50600:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"\n[data-v-5d9e4d18] .text-editor__wrapper button.entry-action__image-upload {\n\tdisplay: none;\n}\n.editor-wrapper[data-v-5d9e4d18] {\n\twidth: 100%;\n\tmin-width: 200px;\n}\n.editor-wrapper.border[data-v-5d9e4d18] {\n\tborder: 2px solid var(--color-border-maxcontrast);\n\tborder-radius: var(--border-radius-large);\n}\n[data-v-5d9e4d18] .text-readonly-bar {\n\tdisplay: none !important;\n}\n.height-small[data-v-5d9e4d18] {\n\tmax-height: 320px;\n\toverflow-y: auto;\n}\n\n/* This can be deleted when the patch from text is integrated,\nthat sets the z-index of the text-menubar to 1 by default*/\n[data-v-5d9e4d18] .text-menubar  {\n\tz-index: 1 !important;\n}\n\n","",{version:3,sources:["webpack://./src/shared/components/ncEditor/NcEditor.vue"],names:[],mappings:";AA4JA;CACA,aAAA;AACA;AAEA;CACA,WAAA;CACA,gBAAA;AACA;AAEA;CACA,iDAAA;CACA,yCAAA;AACA;AAEA;CACA,wBAAA;AACA;AAEA;CACA,iBAAA;CACA,gBAAA;AACA;;AAEA;0DACA;AACA;CACA,qBAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div class=\"editor-wrapper\" :class=\"{ border: showBorder, 'hide-readonly-bar': !showReadonlyBar, 'height-small': height === 'small' }\">\n\t\t<div v-if=\"textAppAvailable\">\n\t\t\t<div ref=\"editor\" />\n\t\t</div>\n\t\t<div v-else>\n\t\t\t<NcEmptyContent\n\t\t\t\t:name=\"t('tables', 'Error')\"\n\t\t\t\t:description=\"t('tables', 'Could not load editor, text not available.')\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Alert :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcEmptyContent>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { NcEmptyContent } from '@nextcloud/vue'\nimport Alert from 'vue-material-design-icons/Alert.vue'\nimport { translate as t } from '@nextcloud/l10n'\n\nexport default {\n\n\tcomponents: {\n\t\tNcEmptyContent,\n\t\tAlert,\n\t},\n\n\tprops: {\n\t\tcanEdit: {\n\t\t      type: Boolean,\n\t\t      default: true,\n\t\t    },\n\t\ttext: {\n\t\t      type: String,\n\t\t      default: '',\n\t\t    },\n\t\tshowBorder: {\n\t\t      type: Boolean,\n\t\t      default: true,\n\t\t    },\n\t\tshowReadonlyBar: {\n\t\t      type: Boolean,\n\t\t      default: true,\n\t\t    },\n\t\theight: {\n\t\t      type: String,\n\t\t      default: null, // null, 'small'\n\t\t    },\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\ttextAppAvailable: !!window.OCA?.Text?.createEditor,\n\t\t\teditor: null,\n\t\t\tlocalValue: '',\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tlocalText: {\n\t\t\tget() {\n\t\t\t\treturn this.localValue\n\t\t\t},\n\t\t\tset(v) {\n\t\t\t\tthis.localValue = v\n\t\t\t\tthis.$emit('update:text', v)\n\t\t\t},\n\t\t},\n\t},\n\n\twatch: {\n\t\ttext(value) {\n\t\t\tif (value.trim() !== this.localValue.trim()) {\n\t\t\t\tthis.localValue = value\n\n\t\t\t\t// reset editor if content is empty\n\t\t\t\t// otherwise the (empty) content will not be updated\n\t\t\t\tif (value === '') {\n\t\t\t\t\tthis.setupEditor()\n\t\t\t\t} else {\n\t\t\t\t\tthis.editor?.setContent(value)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\n\tasync mounted() {\n\t\tthis.localValue = this.text\n\t\tawait this.setupEditor()\n\t\tthis.editor?.setContent(this.localValue, false)\n\t},\n\n\tbeforeDestroy() {\n\t\tthis?.editor?.destroy()\n\t},\n\n\tmethods: {\n\t\tt,\n\t\tasync setupEditor() {\n\t\t\tthis?.editor?.destroy()\n\t\t\tif (this.textAppAvailable) {\n\t\t\t\tthis.editor = await window.OCA.Text.createEditor({\n\t\t\t\t\tel: this.$refs.editor,\n\t\t\t\t\tcontent: this.localText,\n\t\t\t\t\treadOnly: !this.canEdit,\n\t\t\t\t\tonUpdate: ({ markdown }) => {\n\t\t\t\t\t\tthis.localText = markdown\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconsole.debug('try to load editor, but not initialized')\n\t\t\t}\n\t\t},\n\t},\n}\n<\/script>\n<style scoped>\n\n\t:deep(.text-editor__wrapper button.entry-action__image-upload) {\n\t\tdisplay: none;\n\t}\n\n\t.editor-wrapper {\n\t\twidth: 100%;\n\t\tmin-width: 200px;\n\t}\n\n\t.editor-wrapper.border {\n\t\tborder: 2px solid var(--color-border-maxcontrast);\n\t\tborder-radius: var(--border-radius-large);\n\t}\n\n\t:deep(.text-readonly-bar) {\n\t\tdisplay: none !important;\n\t}\n\n\t.height-small {\n\t\tmax-height: 320px;\n\t\toverflow-y: auto;\n\t}\n\n\t/* This can be deleted when the patch from text is integrated,\n\tthat sets the z-index of the text-menubar to 1 by default*/\n\t:deep(.text-menubar ) {\n\t\tz-index: 1 !important;\n\t}\n\n</style>\n"],sourceRoot:""}]);const s=o},82068:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"\n[data-v-180e1add] .input-field input {\n\tborder-color: var(--color-primary-element);\n}\n.empty[data-v-180e1add] .input-field input {\n\tborder-color: transparent;\n}\n\n","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/SearchForm.vue"],names:[],mappings:";AAmEA;CACA,0CAAA;AACA;AAEA;CACA,yBAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div :class=\"{ empty: localValue === '' }\">\n\t\t<NcTextField\n\t\t\t:value.sync=\"localValue\"\n\t\t\t:label=\"t('tables', 'Search')\"\n\t\t\ttrailing-button-icon=\"close\"\n\t\t\t:show-trailing-button=\"localValue !== ''\"\n\t\t\t@trailing-button-click=\"clearValue\"\n\t\t\t@update:value=\"debounceSubmit\">\n\t\t\t<Magnify :size=\"16\" />\n\t\t</NcTextField>\n\t</div>\n</template>\n\n<script>\nimport { NcTextField } from '@nextcloud/vue'\nimport Magnify from 'vue-material-design-icons/Magnify.vue'\nimport debounce from 'debounce'\nimport { translate as t } from '@nextcloud/l10n'\n\nexport default {\n\n\tcomponents: {\n\t\tMagnify,\n\t\tNcTextField,\n\t},\n\n\tprops: {\n\t\tsearchString: {\n\t\t      type: String,\n\t\t      default: null,\n\t\t    },\n\t\tcolumns: {\n\t\t      type: Array,\n\t\t      default: null,\n\t\t    },\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tlocalValue: '',\n\t\t}\n\t},\n\n\tmethods: {\n\t\tt,\n\t\tdebounceSubmit: debounce(function() {\n\t\t\tthis.submit()\n\t\t}, 500),\n\n\t\tclearValue() {\n\t\t\tthis.localValue = ''\n\t\t\tthis.submit()\n\t\t},\n\t\tsubmit() {\n\t\t\tthis.$emit('set-search-string', this.localValue)\n\t\t},\n\t},\n\n}\n<\/script>\n<style scoped>\n\n:deep(.input-field input) {\n\tborder-color: var(--color-primary-element);\n}\n\n.empty :deep(.input-field input) {\n\tborder-color: transparent;\n}\n\n</style>\n"],sourceRoot:""}]);const s=o},95677:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"\ndiv[data-v-685ce777] {\n\tpadding-right: 10px;\n\tmin-width: 12vw;\n}\n\n","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellProgress.vue"],names:[],mappings:";AA2CA;CACA,mBAAA;CACA,eAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div>\n\t\t<NcProgressBar v-if=\"getValue !== null\" :value=\"getValue\" />\n\t</div>\n</template>\n\n<script>\nimport { NcProgressBar } from '@nextcloud/vue'\n\nexport default {\n\tname: 'TableCellProgress',\n\tcomponents: { NcProgressBar },\n\tprops: {\n\t\tcolumn: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\trowId: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tcomputed: {\n\t\tgetValue() {\n\t\t\tif (this.value !== null && !isNaN(this.value)) {\n\t\t\t\treturn this.value\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n\ndiv {\n\tpadding-right: 10px;\n\tmin-width: 12vw;\n}\n\n</style>\n"],sourceRoot:""}]);const s=o},53977:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"\n.wrapper[data-v-1bdd7b4d] {\n\tpadding-right: 10px;\n}\n\n","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellStars.vue"],names:[],mappings:";AAyCA;CACA,mBAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div>\n\t\t{{ getValue }}\n\t</div>\n</template>\n\n<script>\n\nexport default {\n\tname: 'TableCellStars',\n\tprops: {\n\t\tcolumn: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\trowId: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tcomputed: {\n\t\tgetValue() {\n\t\t\tconst starEmpty = '☆'\n\t\t\tconst starFull = '★'\n\t\t\tconst v = this.value\n\t\t\treturn starFull.repeat(v) + starEmpty.repeat(5 - v)\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n\n.wrapper {\n\tpadding-right: 10px;\n}\n\n</style>\n"],sourceRoot:""}]);const s=o},48477:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"\n.wrapper[data-v-9b22e126] {\n\tpadding-right: 10px;\n}\n\n","",{version:3,sources:["webpack://./src/shared/components/ncTable/partials/TableCellYesNo.vue"],names:[],mappings:";AAwCA;CACA,mBAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div>\n\t\t<RadioboxBlankIcon v-if=\"value !== null && value === 'false'\" />\n\t\t<CheckCircleOutline v-if=\"value !== null && value === 'true'\" />\n\t</div>\n</template>\n\n<script>\nimport RadioboxBlankIcon from 'vue-material-design-icons/RadioboxBlank.vue'\nimport CheckCircleOutline from 'vue-material-design-icons/CheckCircleOutline.vue'\n\nexport default {\n\tname: 'TableCellYesNo',\n\tcomponents: {\n\t\tRadioboxBlankIcon,\n\t\tCheckCircleOutline,\n\t},\n\tprops: {\n\t\tcolumn: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\trowId: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefault: 'false',\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n\n.wrapper {\n\tpadding-right: 10px;\n}\n\n</style>\n"],sourceRoot:""}]);const s=o},47316:(t,e,n)=>{n.d(e,{A:()=>s});var a=n(71354),i=n.n(a),l=n(76314),o=n.n(l)()(i());o.push([t.id,"\n.vs__dropdown-menu {\n\tmin-width: 95px !important;\n}\n","",{version:3,sources:["webpack://./src/shared/components/ncTable/sections/CustomTable.vue"],names:[],mappings:";AA0XA;CACA,0BAAA;AACA",sourcesContent:['\x3c!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<div class="container">\n\t\t<table class="tables-list__table">\n\t\t\t<thead class="tables-list__thead">\n\t\t\t\t<TableHeader :columns="columns"\n\t\t\t\t\t:selected-rows="selectedRows"\n\t\t\t\t\t:rows="getSearchedAndFilteredAndSortedRows"\n\t\t\t\t\t:view-setting.sync="localViewSetting"\n\t\t\t\t\t:config="config"\n\t\t\t\t\t@create-row="$emit(\'create-row\')"\n\t\t\t\t\t@create-column="$emit(\'create-column\')"\n\t\t\t\t\t@edit-column="col => $emit(\'edit-column\', col)"\n\t\t\t\t\t@delete-column="col => $emit(\'delete-column\', col)"\n\t\t\t\t\t@download-csv="data => $emit(\'download-csv\', data)"\n\t\t\t\t\t@select-all-rows="selectAllRows">\n\t\t\t\t\t<template #actions>\n\t\t\t\t\t\t<slot name="actions" />\n\t\t\t\t\t</template>\n\t\t\t\t</TableHeader>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<TableRow v-for="(row, index) in currentPageRows"\n\t\t\t\t\t:key="index"\n\t\t\t\t\tdata-cy="customTableRow"\n\t\t\t\t\t:row="row"\n\t\t\t\t\t:columns="columns"\n\t\t\t\t\t:selected="isRowSelected(row.id)"\n\t\t\t\t\t:view-setting.sync="localViewSetting"\n\t\t\t\t\t:config="config"\n\t\t\t\t\t@update-row-selection="updateRowSelection"\n\t\t\t\t\t@edit-row="rowId => $emit(\'edit-row\', rowId)" />\n\t\t\t\t<tr />\n\t\t\t</tbody>\n\t\t</table>\n\t\t<div v-if="totalPages > 1" class="pagination-footer" :class="{\'large-width\': !appNavCollapsed || isMobile}">\n\t\t\t<div class="pagination-items">\n\t\t\t\t<NcButton type="tertiary" :disabled="totalPages === 1 || pageNumber <= 1" :aria-label="t(\'tables\', \'Go to first page\')" @click="pageNumber = 1">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<PageFirstIcon :size="20" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton type="tertiary" :disabled="totalPages === 1 || pageNumber <= 1" :aria-label="t(\'tables\', \'Go to previous page\')" @click="pageNumber--">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ChevronLeftIcon :size="20" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t\t<div class="page-number">\n\t\t\t\t\t<NcSelect v-model="pageNumber" :options="allPageNumbersArray" :aria-label-combobox="t(\'tables\', \'Page number\')">\n\t\t\t\t\t\t<template #selected-option-container="{ option }">\n\t\t\t\t\t\t\t<span class="selected-page">\n\t\t\t\t\t\t\t\t{{ option.label }} of {{ totalPages }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcSelect>\n\t\t\t\t</div>\n\t\t\t\t<NcButton type="tertiary" :disabled="totalPages === 1 || pageNumber >= totalPages" :aria-label="t(\'tables\', \'Go to next page\')" @click="pageNumber++">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ChevronRightIcon :size="20" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton type="tertiary" :disabled="totalPages === 1 || pageNumber >= totalPages" :aria-label="t(\'tables\', \'Go to last page\')" @click="pageNumber = totalPages">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<PageLastIcon :size="20" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport TableHeader from \'../partials/TableHeader.vue\'\nimport PageLastIcon from \'vue-material-design-icons/PageLast.vue\'\nimport PageFirstIcon from \'vue-material-design-icons/PageFirst.vue\'\nimport ChevronRightIcon from \'vue-material-design-icons/ChevronRight.vue\'\nimport ChevronLeftIcon from \'vue-material-design-icons/ChevronLeft.vue\'\nimport TableRow from \'../partials/TableRow.vue\'\nimport { subscribe, unsubscribe } from \'@nextcloud/event-bus\'\nimport { MagicFields } from \'../mixins/magicFields.js\'\nimport { NcButton, useIsMobile, NcSelect } from \'@nextcloud/vue\'\nimport { mapState } from \'pinia\'\nimport {\n\tTYPE_META_ID, TYPE_META_CREATED_BY, TYPE_META_CREATED_AT, TYPE_META_UPDATED_BY, TYPE_META_UPDATED_AT,\n} from \'../../../../shared/constants.js\'\nimport { MetaColumns } from \'../mixins/metaColumns.js\'\nimport { translate as t } from \'@nextcloud/l10n\'\nimport { useTablesStore } from \'../../../../store/store.js\'\n\nexport default {\n\tname: \'CustomTable\',\n\n\tcomponents: {\n\t\tTableRow,\n\t\tTableHeader,\n\t\tNcButton,\n\t\tPageLastIcon,\n\t\tPageFirstIcon,\n\t\tChevronLeftIcon,\n\t\tChevronRightIcon,\n\t\tNcSelect,\n\t},\n\n\tprops: {\n\t\trows: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\telementId: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t\tisView: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tviewSetting: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tsetup() {\n\t\treturn {\n\t\t\tisMobile: useIsMobile(),\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tselectedRows: [],\n\t\t\tsearchTerm: null,\n\t\t\tlocalViewSetting: this.viewSetting,\n\t\t\tpageNumber: 1,\n\t\t\trowsPerPage: 100,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t...mapState(useTablesStore, [\'appNavCollapsed\']),\n\t\tallPageNumbersArray() {\n\t\t\treturn Array.from(\n\t\t\t\t{ length: this.totalPages },\n\t\t\t\t(value, index) => 1 + index,\n\t\t\t)\n\t\t},\n\t\tcurrentPageRows() {\n\t\t\treturn this.getSearchedAndFilteredAndSortedRows.slice((this.pageNumber - 1) * this.rowsPerPage, ((this.pageNumber - 1) * this.rowsPerPage) + this.rowsPerPage)\n\t\t},\n\t\ttotalPages() {\n\t\t\treturn Math.ceil(this.getSearchedAndFilteredAndSortedRows.length / this.rowsPerPage)\n\t\t},\n\t\tsorting() {\n\t\t\treturn this.viewSetting?.sorting\n\t\t},\n\t\tgetSearchedAndFilteredRows() {\n\t\t\tconst debug = false\n\t\t\t// if we don\'t have to search and/or filter\n\t\t\tif (!this.viewSetting?.filter?.length > 0 && !this.viewSetting?.searchString) {\n\t\t\t\t// cleanup markers\n\t\t\t\tthis.rows?.forEach(row => {\n\t\t\t\t\tthis.columns?.forEach(column => {\n\t\t\t\t\t\tconst cell = row.data.find(item => item.columnId === column.id)\n\t\t\t\t\t\tif (cell === undefined) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete cell.searchStringFound\n\t\t\t\t\t\tdelete cell.filterFound\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\treturn this.rows\n\t\t\t}\n\n\t\t\tconst data = [] // array of rows\n\t\t\tconst searchString = this.viewSetting?.searchString\n\t\t\t// each row\n\t\t\tfor (const row of this.rows) {\n\t\t\t\tif (debug) {\n\t\t\t\t\tconsole.debug(\'new row ===============================================\', row)\n\t\t\t\t}\n\t\t\t\tlet filterStatusRow = null\n\t\t\t\tlet searchStatusRow = false\n\n\t\t\t\t// each column in a row => cell\n\t\t\t\tthis.columns?.forEach(column => {\n\t\t\t\t\tif (debug) {\n\t\t\t\t\t\tconsole.debug(\'new column -------------------\', column)\n\t\t\t\t\t}\n\t\t\t\t\tlet filterStatus = null\n\t\t\t\t\tlet searchStatus = true\n\t\t\t\t\tconst filters = this.getFiltersForColumn(column)\n\t\t\t\t\tlet cell\n\t\t\t\t\tif (column.id < 0) {\n\t\t\t\t\t\tcell = { columnId: column.id }\n\t\t\t\t\t\tswitch (column.id) {\n\t\t\t\t\t\tcase TYPE_META_ID:\n\t\t\t\t\t\t\tcell.value = row.id\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase TYPE_META_CREATED_BY:\n\t\t\t\t\t\t\tcell.value = row.createdBy\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase TYPE_META_UPDATED_BY:\n\t\t\t\t\t\t\tcell.value = row.editedBy\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase TYPE_META_CREATED_AT:\n\t\t\t\t\t\t\tcell.value = row.createdAt\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase TYPE_META_UPDATED_AT:\n\t\t\t\t\t\t\tcell.value = row.editedAt\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcell = row.data.find(item => item.columnId === column.id)\n\t\t\t\t\t}\n\n\t\t\t\t\t// if we don\'t have a value for this cell\n\t\t\t\t\tif (cell === undefined) {\n\t\t\t\t\t\tif (searchString) {\n\t\t\t\t\t\t\tsearchStatus = false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcell = { columnId: column.id, value: null }\n\t\t\t\t\t}\n\t\t\t\t\t// cleanup possible old markers\n\t\t\t\t\tdelete cell.searchStringFound\n\t\t\t\t\tdelete cell.filterFound\n\n\t\t\t\t\t// if we should filter\n\t\t\t\t\tif (filters !== null) {\n\t\t\t\t\t\tfilters.forEach(fil => {\n\t\t\t\t\t\t\tthis.addMagicFieldsValues(fil)\n\t\t\t\t\t\t\tif (filterStatus === null || filterStatus === true) {\n\t\t\t\t\t\t\t\tfilterStatus = column.isFilterFound(cell, fil)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t// if we should search\n\t\t\t\t\tif (searchString) {\n\t\t\t\t\t\tconsole.debug(\'look for searchString\', searchString)\n\t\t\t\t\t\tsearchStatus = column.isSearchStringFound(cell, searchString.toLowerCase())\n\t\t\t\t\t}\n\n\t\t\t\t\tif (debug) {\n\t\t\t\t\t\tconsole.debug(\'filterStatus for cell\', { cell: cell?.value, filterStatusCell: filterStatus, filterStatusRowBefore: filterStatusRow })\n\t\t\t\t\t}\n\n\t\t\t\t\t// if filterStatus is null, this result should be ignored\n\t\t\t\t\tif (filterStatus !== null && (filterStatusRow || filterStatusRow === null)) {\n\t\t\t\t\t\tfilterStatusRow = filterStatus\n\t\t\t\t\t}\n\n\t\t\t\t\tif (debug) {\n\t\t\t\t\t\tconsole.debug(\'new filterStatusRow\', filterStatusRow)\n\t\t\t\t\t}\n\n\t\t\t\t\t// filterStatusRow = filterStatus\n\t\t\t\t\tsearchStatusRow = searchStatusRow || searchStatus\n\t\t\t\t})\n\n\t\t\t\tif (debug) {\n\t\t\t\t\tconsole.debug(\'if push row\', { filterStatusRow, searchStatusRow, result: (filterStatusRow || filterStatusRow === null) && searchStatusRow })\n\t\t\t\t}\n\t\t\t\tif ((filterStatusRow || filterStatusRow === null) && searchStatusRow) {\n\t\t\t\t\tdata.push({ ...row })\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn data\n\t\t},\n\t\tgetSearchedAndFilteredAndSortedRows() {\n\t\t\tconst allColumns = this.columns.concat(MetaColumns)\n\t\t\tconst sort = (sortCols) => {\n\t\t\t\tconst sortColumn = allColumns.find(item => item.id === sortCols?.[0].columnId)\n\t\t\t\tconst nextSorts = []\n\t\t\t\tfor (let i = 1; i < sortCols.length; i++) {\n\t\t\t\t\tconst sortColumn = allColumns.find(item => item.id === sortCols[i].columnId)\n\t\t\t\t\tnextSorts.push(sortColumn?.sort?.(sortCols[i].mode))\n\t\t\t\t}\n\t\t\t\treturn [...this.getSearchedAndFilteredRows].sort(sortColumn?.sort?.(sortCols[0].mode, nextSorts))\n\t\t\t}\n\n\t\t\t// if we have to sort\n\t\t\tif (this.viewSetting?.presetSorting) {\n\t\t\t\treturn sort(this.viewSetting.presetSorting)\n\t\t\t}\n\t\t\tif (this.viewSetting?.sorting) {\n\t\t\t\treturn sort(this.viewSetting.sorting)\n\t\t\t}\n\t\t\treturn this.getSearchedAndFilteredRows\n\t\t},\n\t},\n\n\twatch: {\n\t\tlocalViewSetting() {\n\t\t\tthis.$emit(\'update:viewSetting\', this.localViewSetting)\n\t\t},\n\t\tviewSetting() {\n\t\t\tthis.localViewSetting = this.viewSetting\n\t\t},\n\t},\n\n\tupdated() {\n\t\tif (this.pageNumber > this.totalPages || this.totalPages === 1) {\n\t\t\tthis.pageNumber = this.totalPages\n\t\t}\n\t},\n\n\tmounted() {\n\t\tsubscribe(\'tables:selected-rows:deselect\', ({ elementId, isView }) => this.deselectAllRows(elementId, isView))\n\t},\n\tbeforeDestroy() {\n\t\tunsubscribe(\'tables:selected-rows:deselect\', ({ elementId, isView }) => this.deselectAllRows(elementId, isView))\n\t},\n\n\tmethods: {\n\t\tt,\n\t\taddMagicFieldsValues(filter) {\n\t\t\tObject.values(MagicFields).forEach(field => {\n\t\t\t\tconst newFilterValue = filter.value.replace(\'@\' + field.id, field.replace)\n\t\t\t\tif (filter.value !== newFilterValue) {\n\t\t\t\t\tfilter.magicValuesEnriched = newFilterValue\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tgetFiltersForColumn(column) {\n\t\t\tif (this.viewSetting?.filter?.length > 0) {\n\t\t\t\tconst columnFilter = this.viewSetting.filter.filter(item => item.columnId === column.id)\n\t\t\t\tif (columnFilter.length > 0) {\n\t\t\t\t\treturn columnFilter\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t\tdeselectAllRows(elementId, isView) {\n\t\t\tif (parseInt(elementId) === parseInt(this.elementId) && isView === this.isView) {\n\t\t\t\tthis.selectedRows = []\n\t\t\t}\n\t\t},\n\t\tselectAllRows(value) {\n\t\t\tthis.selectedRows = []\n\t\t\tif (value) {\n\t\t\t\tthis.getSearchedAndFilteredRows.forEach(item => { this.selectedRows.push(item.id) })\n\t\t\t}\n\t\t\tthis.$emit(\'update-selected-rows\', this.selectedRows)\n\t\t},\n\t\tisRowSelected(id) {\n\t\t\treturn this.selectedRows.includes(id)\n\t\t},\n\t\tupdateRowSelection(values) {\n\t\t\tconst id = values.rowId\n\t\t\tconst v = values.value\n\n\t\t\tif (this.selectedRows.includes(id) && !v) {\n\t\t\t\tconst index = this.selectedRows.indexOf(id)\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.selectedRows.splice(index, 1)\n\t\t\t\t}\n\t\t\t\tthis.$emit(\'update-selected-rows\', this.selectedRows)\n\t\t\t}\n\t\t\tif (!this.selectedRows.includes(id) && v) {\n\t\t\t\tthis.selectedRows.push(values.rowId)\n\t\t\t\tthis.$emit(\'update-selected-rows\', this.selectedRows)\n\t\t\t}\n\t\t},\n\t},\n}\n<\/script>\n\n<style>\n.vs__dropdown-menu {\n\tmin-width: 95px !important;\n}\n</style>\n\n<style lang="scss" scoped>\n\n:deep(.vs__clear) {\n\tdisplay: none;\n}\n\n:deep(.v-select) {\n\tmin-width: 95px !important;\n\t.vs__dropdown-toggle {\n\t\tbackground: none;\n\t}\n}\n\n:deep(.text-editor__wrapper .paragraph-content:last-child) {\n\tmargin-bottom: 0!important;\n}\n\n:deep(.text-editor__wrapper .ProseMirror > *:first-child) {\n\tmargin-top: 0!important;\n}\n\n.selected-page{\n\tpadding-left: 5px;\n\n\tdisplay:inline-flex;\n\talign-items: center;\n}\n\n.page-number{\n\tpadding-inline: 5px;\n}\n\n.large-width{\n\twidth: 100vw !important;\n\tleft: 0 !important;\n}\n\n.pagination-items{\n\tbackground-color: var(--color-main-background);\n\tborder-radius: var(--border-radius-large);\n\tpointer-events: all;\n\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.pagination-footer{\n\tbox-shadow: var(--box-shadow);\n\tfilter: drop-shadow(0 1px 6px var(--color-box-shadow));\n\tpadding-bottom: 20px;\n\twidth: calc(100vw - 316px);\n\tpointer-events: none;\n\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n:deep(table) {\n\tposition: relative;\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n\ttable-layout: auto;\n\twidth: 100%;\n\tborder: none;\n\n\t* {\n\t\tborder: none;\n\t}\n\t// white-space: nowrap;\n\n\ttd, th {\n\t\tpadding-right: 8px;\n\t\tmax-width: 500px;\n\t}\n\n\ttd .showOnHover, th .showOnHover {\n\t\topacity: 0;\n\t}\n\n\ttd:hover .showOnHover, th:hover .showOnHover, .showOnHover:focus-within {\n\t\topacity: 1;\n\t}\n\n\ttd:not(:first-child), th:not(:first-child) {\n\t\tpadding-right: 8px;\n\t\tpadding-left: 8px;\n\t}\n\n\ttr {\n\t\theight: 51px;\n\t\tbackground-color: var(--color-main-background);\n\t}\n\n\tthead {\n\t\tposition: sticky;\n\t\ttop: 108px;\n\t\tz-index: 6;\n\n\t\ttr {\n\t\t\tth {\n\t\t\t\tvertical-align: middle;\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t\tbox-shadow: inset 0 -1px 0 var(--color-border); // use box-shadow instead of border to be compatible with sticky heads\n\t\t\t\tbackground-color: var(--color-main-background-translucent);\n\t\t\t\tz-index: 5;\n\t\t\t}\n\t\t}\n\t}\n\n\ttbody {\n\n\t\ttd {\n\t\t\ttext-align: left;\n\t\t\tvertical-align: middle;\n\t\t\tborder: 1px solid var(--color-border-dark);\n\t\t}\n\n\t\ttr:active, tr:hover, tr:focus, tr:hover .editor-wrapper .editor {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t}\n\n\t\t// viewer integration\n\t\t.editor-wrapper {\n\t\t\tmin-width: 100px;\n\t\t\toverflow-y: auto;\n\n\t\t\t.preview .widget-custom {\n\t\t\t\tmargin-top: 0;\n\t\t\t\tmargin-bottom: 0;\n\t\t\t\tmax-height: 200px;\n\t\t\t\toverflow: hidden;\n\n\t\t\t\timg {\n\t\t\t\t\theight: auto !important;\n\t\t\t\t\twidth: 100% !important;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.preview [data-node-view-content] {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\n\t\ttr:focus-within > td:last-child {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\ttr>th.sticky:first-child,tr>td.sticky:first-child {\n\t\tposition: sticky;\n\t\tleft: 0;\n\t\tpadding-left: calc(var(--default-grid-baseline) * 4);\n\t\tpadding-right: calc(var(--default-grid-baseline) * 4);\n\t\twidth: 60px;\n\t\tbackground-color: inherit;\n\t\tz-index: 5;\n\t}\n\n\ttr>th.sticky:last-child,tr>td.sticky:last-child {\n\t\tposition: sticky;\n\t\tright: 0;\n\t\twidth: 55px;\n\t\tbackground-color: inherit;\n\t\tpadding-right: 16px;\n\t}\n\n\ttr>td.sticky:last-child {\n\t\t// visibility: hidden;\n\t\topacity: 0;\n\t}\n\n\ttr:hover>td:last-child {\n\t\t// visibility: visible;\n\t\topacity: 1;\n\t}\n\n}\n\n</style>\n'],sourceRoot:""}]);const s=o},20152:(t,e,n)=>{var a=n(85072),i=n.n(a),l=n(97825),o=n.n(l),s=n(77659),r=n.n(s),c=n(55056),d=n.n(c),u=n(10540),A=n.n(u),p=n(41113),h=n.n(p),m=n(46101),g={};g.styleTagTransform=h(),g.setAttributes=d(),g.insert=r().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=A();i()(m.A,g),m.A&&m.A.locals&&m.A.locals},361:(t,e,n)=>{var a=n(85072),i=n.n(a),l=n(97825),o=n.n(l),s=n(77659),r=n.n(s),c=n(55056),d=n.n(c),u=n(10540),A=n.n(u),p=n(41113),h=n.n(p),m=n(50600),g={};g.styleTagTransform=h(),g.setAttributes=d(),g.insert=r().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=A();i()(m.A,g),m.A&&m.A.locals&&m.A.locals},9612:(t,e,n)=>{n.d(e,{A:()=>l});var a=n(5051),i=n(83619);const l=(0,n(14486).A)(i.A,a.X,a.Y,!1,null,null,null).exports},87895:(t,e,n)=>{n.d(e,{A:()=>l});var a=n(69187),i=n(90428);n(81862);const l=(0,n(14486).A)(i.A,a.X,a.Y,!1,null,"5d9e4d18",null).exports},94623:(t,e,n)=>{n.d(e,{A:()=>l});var a=n(13325),i=n(97900);n(33983);const l=(0,n(14486).A)(i.A,a.X,a.Y,!1,null,"cd00e4b0",null).exports},79779:(t,e,n)=>{n.r(e),n.d(e,{default:()=>je});var a=n(76333),i=n(61338),l=n(49954),o=n(91297),s=n(86451),r=n(24780);const c={data:()=>({isExtraSmallMobile:window.innerWidth<=460,isSmallMobile:window.innerWidth<=640,isMediumMobile:window.innerWidth<=1024,wsize:window.innerWidth}),created(){window.addEventListener("resize",this.updateMobileSizes)},destroyed(){window.removeEventListener("resize",this.updateMobileSizes)},methods:{updateMobileSizes(){this.isExtraSmallMobile=window.innerWidth<=460,this.isSmallMobile=window.innerWidth<=640,this.isMediumMobile=window.innerWidth<=1024,this.wsize=window.innerWidth}}};var d=n(89475),u=n(17334),A=n.n(u),p=n(53334);const h={components:{Magnify:d.A,NcTextField:a.v},props:{searchString:{type:String,default:null},columns:{type:Array,default:null}},data:()=>({localValue:""}),methods:{t:p.Tl,debounceSubmit:A()((function(){this.submit()}),500),clearValue(){this.localValue="",this.submit()},submit(){this.$emit("set-search-string",this.localValue)}}};var m=n(85072),g=n.n(m),C=n(97825),b=n.n(C),w=n(77659),v=n.n(w),f=n(55056),y=n.n(f),S=n(10540),x=n.n(S),_=n(41113),T=n.n(_),k=n(82068),B={};B.styleTagTransform=T(),B.setAttributes=y(),B.insert=v().bind(null,"head"),B.domAPI=b(),B.insertStyleElement=x();g()(k.A,B);k.A&&k.A.locals&&k.A.locals;var R=n(14486);const E=(0,R.A)(h,(function(){var t=this,e=t._self._c;return e("div",{class:{empty:""===t.localValue}},[e("NcTextField",{attrs:{value:t.localValue,label:t.t("tables","Search"),"trailing-button-icon":"close","show-trailing-button":""!==t.localValue},on:{"update:value":[function(e){t.localValue=e},t.debounceSubmit],"trailing-button-click":t.clearValue}},[e("Magnify",{attrs:{size:16}})],1)],1)}),[],!1,null,"180e1add",null).exports,F={name:"Options",components:{NcActions:a.B6,NcActionButton:a.Ko,SearchForm:E,NcButton:a.x1,Plus:l.A,Check:o.A,Delete:s.A,Export:r.A},mixins:[c],props:{selectedRows:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},elementId:{type:Number,default:null},isView:{type:Boolean,default:!0},showOptions:{type:Boolean,default:!0},columns:{type:Array,default:null},viewSetting:{type:Object,default:null},config:{type:Object,default:null}},data:()=>({optionsDivWidth:null}),computed:{getSelectedRows(){const t=[];return this.selectedRows.forEach((e=>{t.push(this.getRowById(e))})),t},getSearchString(){return this.viewSetting?.searchString||""},showFullOptions(){return this.optionsDivWidth>800}},created(){this.updateOptionsDivWidth(),window.addEventListener("resize",this.updateOptionsDivWidth)},methods:{t:p.Tl,updateOptionsDivWidth(){this.optionsDivWidth=document.getElementsByClassName("options row")[0]?.offsetWidth},exportCsv(){this.$emit("download-csv",this.getSelectedRows)},getRowById(t){const e=this.rows.findIndex((e=>e.id===t));return this.rows[e]},deleteSelectedRows(){this.$emit("delete-selected-rows",this.selectedRows)},deselectAllRows(){(0,i.Ic)("tables:selected-rows:deselect",{elementId:this.elementId,isView:this.isView})}}};var D=n(83841),N={};N.styleTagTransform=T(),N.setAttributes=y(),N.insert=v().bind(null,"head"),N.domAPI=b(),N.insertStyleElement=x();g()(D.A,N);D.A&&D.A.locals&&D.A.locals;const V=(0,R.A)(F,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"options"},[t.showOptions&&(t.config.canReadRows||t.config.canCreateRows&&t.rows.length>0)?e("div",{staticClass:"fix-col-4",staticStyle:{"justify-content":"space-between"}},[e("div",{staticClass:"actionButtonsLeft",class:{"add-padding-left":t.isSmallMobile}},[!t.isSmallMobile&&t.config.canCreateRows?e("NcButton",{attrs:{"aria-label":t.t("tables","Create row"),"close-after-click":!0,type:"tertiary","data-cy":"createRowBtn"},on:{click:function(e){return t.$emit("create-row")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Plus",{attrs:{size:25}})]},proxy:!0}],null,!1,4164319895)},[t._v("\n\t\t\t\t"+t._s(t.t("tables","Create row"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.isSmallMobile&&t.config.canCreateRows?e("NcButton",{attrs:{"close-after-click":!0,"aria-label":t.t("tables","Create Row"),type:"tertiary","data-cy":"createRowBtn"},on:{click:function(e){return t.$emit("create-row")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Plus",{attrs:{size:25}})]},proxy:!0}],null,!1,4164319895)}):t._e(),t._v(" "),e("div",{staticClass:"searchAndFilter"},[e("SearchForm",{attrs:{columns:t.columns,"search-string":t.getSearchString},on:{"set-search-string":e=>t.$emit("set-search-string",e)}})],1)],1),t._v(" "),t.selectedRows.length>0?e("div",{staticClass:"selected-rows-option"},[e("div",{staticStyle:{padding:"10px",color:"var(--color-text-maxcontrast)"}},[t._v("\n\t\t\t\t"+t._s(t.n("tables","%n selected row","%n selected rows",t.selectedRows.length,{}))+"\n\t\t\t")]),t._v(" "),e("NcActions",{attrs:{type:"secondary","force-name":!0,inline:t.showFullOptions?2:0}},[e("NcActionButton",{on:{click:t.exportCsv},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Export",{attrs:{size:20}})]},proxy:!0}],null,!1,3122214156)},[t._v("\n\t\t\t\t\t"+t._s(t.t("tables","Export CSV"))+"\n\t\t\t\t")]),t._v(" "),t.config.canDeleteRows?e("NcActionButton",{on:{click:t.deleteSelectedRows},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete",{attrs:{size:20}})]},proxy:!0}],null,!1,2705356561)},[t._v("\n\t\t\t\t\t"+t._s(t.t("tables","Delete"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.showFullOptions?t._e():e("NcActionButton",{on:{click:t.deselectAllRows},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Check",{attrs:{size:20}})]},proxy:!0}],null,!1,4226377742)},[t._v("\n\t\t\t\t\t"+t._s(t.t("tables","Uncheck all"))+"\n\t\t\t\t")])],1)],1):t._e()]):t._e()])}),[],!1,null,"3619d434",null).exports;var I=n(35554),P=n(140),O=n(95988),M=n(6513),j=n(47624),H=n(57096),z=n(17517),G=n(7463),L=n(35115);const $={components:{EyeOff:j.A,Delete:s.A,Pencil:M.A,ChevronLeft:H.A,FilterCog:z.A,Magnify:d.A,NcActionInput:a.Az,NcActionRadio:a.H_,NcActionCaption:a.qN,NcActionButton:a.Ko,NcActions:a.B6,SortAsc:P.A,SortDesc:O.A,NcActionButtonGroup:a.F7},mixins:[I.A],props:{column:{type:G.PJ,default:null},openState:{type:Boolean,default:!1},config:{type:Object,default:null},viewSetting:{type:Object,default:null}},data(){return{searchValue:"",operator:null,sortMode:null,term:"",selectOperator:!1,selectValue:!1,localViewSetting:this.viewSetting}},computed:{getOperators(){return this.column.getPossibleOperators()},getDisabledOperators(){const t=this.getFilterForColumn(this.column);if(t&&t.length>0){const e=new Set;return t.forEach((t=>{t.operator.incompatibleWith.forEach((t=>e.add(t)))})),this.getOperators.filter((t=>e.has(t.id)))}return[]},getEnabledOperators(){const t=this.getFilterForColumn(this.column);if(t&&t.length>0){const e=new Set;return t.forEach((t=>{t.operator.incompatibleWith.forEach((t=>e.add(t)))})),this.getOperators.filter((t=>!e.has(t.id)))}return this.getOperators},hasOperators(){return this.getEnabledOperators.length>0},getMagicFields(){return this.column.getPossibleMagicFields()},canSort(){return this.column.canSort()},hasPresetSorting(){return this.localViewSetting?.presetSorting?.find((t=>t.columnId===this.column?.id))},getSortMode(){const t=this.localViewSetting?.presetSorting?.find((t=>t.columnId===this.column?.id))??this.localViewSetting?.sorting?.find((t=>t.columnId===this.column?.id));return t?t.mode:null},showFilter(){return this.config.canFilter},hasManageColumnEntries(){return this.showHideColumn||this.showEditColumn||this.showDeleteColumn},showHideColumn(){return this.config.canHideColumns},showEditColumn(){return this.column.id>=0&&this.config.canEditColumns},showDeleteColumn(){return this.column.id>=0&&this.config.canDeleteColumns},selectedOperator:{get(){return null===this.operator?this.getEnabledOperators[0]:this.operator},set(t){this.operator=t}},localOpenState:{get(){return this.openState},set(t){this.$emit("update:open-state",!!t)}}},watch:{localOpenState(){this.reset()},localViewSetting(){this.$emit("update:viewSetting",this.localViewSetting)},viewSetting(){this.localViewSetting=this.viewSetting}},created(){this.reset()},methods:{t:p.Tl,isDisabled(t){return this.getDisabledOperators.map((t=>t.id)).includes(t)},submitMagicField(t){this.searchValue="@"+t.id,this.createFilter(),this.localOpenState=!1},close(){this.localOpenState=!1},changeFilterOperator(t){this.selectedOperator=t,this.selectOperator=!1,t.id===L.ju.IsEmpty?this.createFilter():this.selectValue=!0},submitFilterInput(){if(this.selectedOperator.id===L.ju.Contains){const t=this.getFilterForColumn(this.column);if(t&&t.filter((t=>t.operator.id===L.ju.Contains)).map((t=>t.value)).includes(this.searchValue))return void this.reset()}this.createFilter(),this.localOpenState=!1},getFilterForColumn(t){return this.localViewSetting?.filter?.filter((e=>e.columnId===t.id))},createFilter(){const t={columnId:this.column.id,operator:this.selectedOperator,value:this.searchValue};this.localViewSetting.filter||(this.localViewSetting.filter=[]),this.localViewSetting.filter.push(t),this.localViewSetting=JSON.parse(JSON.stringify(this.localViewSetting)),this.close()},reset(){this.operator=null,this.searchValue="",this.sortMode=this.getSortMode,this.selectOperator=!1,this.selectValue=!1},sort(t){if(t===this.getSortMode)this.sortMode=null,this.localViewSetting.sorting=null;else{if("ASC"!==t&&"DESC"!==t)return;this.sortMode=t,this.localViewSetting.sorting=[{columnId:this.column.id,mode:t}]}this.localViewSetting=JSON.parse(JSON.stringify(this.localViewSetting)),this.close()},hideColumn(){this.close(),this.localViewSetting.hiddenColumns?this.localViewSetting.hiddenColumns.push(this.column.id):this.localViewSetting.hiddenColumns=[this.column.id],this.localViewSetting=JSON.parse(JSON.stringify(this.localViewSetting))},editColumn(){this.close(),this.$emit("edit-column",this.column)},deleteColumn(){this.close(),this.$emit("delete-column",this.column)}}};var U=n(58409),Y={};Y.styleTagTransform=T(),Y.setAttributes=y(),Y.insert=v().bind(null,"head"),Y.domAPI=b(),Y.insertStyleElement=x();g()(U.A,Y);U.A&&U.A.locals&&U.A.locals;const W=(0,R.A)($,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu",class:{showOnHover:null===t.getSortMode}},[e("NcActions",{attrs:{open:t.localOpenState,"force-menu":!0},on:{"update:open":function(e){t.localOpenState=e}},scopedSlots:t._u([null!==t.getSortMode?{key:"icon",fn:function(){return["DESC"===t.getSortMode?e("SortDesc",{attrs:{size:20}}):"ASC"===t.getSortMode?e("SortAsc",{attrs:{size:20}}):t._e()]},proxy:!0}:null],null,!0)},[t._v(" "),t.selectOperator?[e("NcActionButton",{on:{click:function(e){t.selectOperator=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{size:25}})]},proxy:!0}],null,!1,1407525853)},[t._v("\n\t\t\t\t"+t._s(t.t("tables","Back"))+"\n\t\t\t")]),t._v(" "),e("NcActionCaption",{attrs:{name:t.t("tables","Select operator")}}),t._v(" "),t._l(t.getOperators,(function(n,a){return e("NcActionRadio",{key:a,attrs:{name:"filter-operators-column-"+t.column.id,value:n.id,checked:t.selectedOperator.id===n.id,disabled:t.isDisabled(n.id)},on:{change:function(e){return t.changeFilterOperator(n)}}},[t._v("\n\t\t\t\t"+t._s(n.label)+"\n\t\t\t")])}))]:t.selectValue?[e("NcActionButton",{on:{click:function(e){t.selectValue=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{size:25}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("tables","Back"))+"\n\t\t\t")]),t._v(" "),e("NcActionCaption",{attrs:{name:t.t("tables","Search for value")}}),t._v(" "),e("NcActionInput",{attrs:{"label-visible":!1,label:t.t("tables","Keyword and submit"),value:t.searchValue,"show-trailing-button":!0},on:{"update:value":function(e){t.searchValue=e},submit:t.submitFilterInput},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Magnify",{attrs:{size:20}})]},proxy:!0}])}),t._v(" "),t.getMagicFields.length>0?e("NcActionCaption",{attrs:{name:t.t("tables","Or use magic values")}}):t._e(),t._v(" "),t._l(t.getMagicFields,(function(n,a){return e("NcActionButton",{key:"magic-field-"+a,attrs:{value:n.id,checked:0===a,icon:n.icon},on:{click:function(e){return t.submitMagicField(n)}}},[t._v("\n\t\t\t\t"+t._s(n.label)+"\n\t\t\t")])}))]:[!t.hasPresetSorting&&t.canSort?e("NcActionCaption",{attrs:{name:t.t("tables","Sorting")}}):t._e(),t._v(" "),!t.hasPresetSorting&&t.canSort?e("NcActionButtonGroup",[e("NcActionButton",{class:{selected:"ASC"===t.getSortMode},attrs:{"aria-label":t.t("tables","Sort asc")},on:{click:function(e){return t.sort("ASC")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SortAsc",{attrs:{size:20}})]},proxy:!0}],null,!1,1944037827)}),t._v(" "),e("NcActionButton",{class:{selected:"DESC"===t.getSortMode},attrs:{"aria-label":t.t("tables","Sort desc")},on:{click:function(e){return t.sort("DESC")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SortDesc",{attrs:{size:20}})]},proxy:!0}],null,!1,2304345955)})],1):t._e(),t._v(" "),t.showFilter&&t.hasOperators?e("NcActionCaption",{attrs:{name:t.t("tables","Filtering")}}):t._e(),t._v(" "),t.showFilter&&t.hasOperators?e("NcActionButton",{attrs:{title:t.selectedOperator.label},on:{click:function(e){t.selectOperator=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("FilterCog",{attrs:{size:25}})]},proxy:!0}],null,!1,2509705958)},[t._v("\n\t\t\t\t"+t._s(t.t("tables","Select Operator"))+"\n\t\t\t")]):t._e(),t._v(" "),t.showFilter&&t.hasOperators?e("NcActionButton",{on:{click:function(e){t.selectValue=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Magnify",{attrs:{size:25}})]},proxy:!0}],null,!1,2716638590)},[t._v("\n\t\t\t\t"+t._s(t.t("tables","Select value"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasManageColumnEntries?e("NcActionCaption",{attrs:{name:t.t("tables","Manage column")}}):t._e(),t._v(" "),t.hasManageColumnEntries?e("NcActionButtonGroup",{attrs:{name:t.t("tables","Column manage actions")}},[t.showHideColumn?e("NcActionButton",{attrs:{"aria-label":t.t("tables","Hide column")},on:{click:function(e){return t.hideColumn()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("EyeOff",{attrs:{size:25}})]},proxy:!0}],null,!1,2088169691)}):t._e(),t._v(" "),t.showEditColumn?e("NcActionButton",{attrs:{"aria-label":t.t("tables","Edit column")},on:{click:function(e){return t.editColumn()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Pencil",{attrs:{size:25}})]},proxy:!0}],null,!1,3601020720)}):t._e(),t._v(" "),t.showDeleteColumn?e("NcActionButton",{attrs:{"aria-label":t.t("tables","Delete column"),"data-cy":"deleteColumnActionBtn"},on:{click:function(e){return t.deleteColumn()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete",{attrs:{size:25}})]},proxy:!0}],null,!1,3718994068)}):t._e()],1):t._e()]],2)],1)}),[],!1,null,"f1c684ba",null).exports;var q=n(83614),X=n(26735);const J={components:{Close:q.A},props:{operator:{type:L.dJ,default:null},value:{type:String,default:""},type:{type:String,default:"highlighted"},id:{type:String,default:null}},computed:{getValue(){let t=this.value;return Object.values(X.T).forEach((e=>{t=t.replace("@"+e.id,e.label)})),t},labelText(){return this.operator.id===L.ju.IsEmpty?this.operator.getOperatorLabel():this.operator.getOperatorLabel()+' "'+this.getValue+'"'}},methods:{actionDelete(){this.$emit("delete-filter",this.id)}}};var K=n(23600),Q={};Q.styleTagTransform=T(),Q.setAttributes=y(),Q.insert=v().bind(null,"head"),Q.domAPI=b(),Q.insertStyleElement=x();g()(K.A,Q);K.A&&K.A.locals&&K.A.locals;const Z={components:{FilterLabel:(0,R.A)(J,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter",class:[t.type]},[t._v("\n\t"+t._s(t.labelText)+"\n\t"),e("button",{on:{click:t.actionDelete}},[e("Close",{attrs:{size:14}})],1)])}),[],!1,null,"333cc36c",null).exports,NcCheckboxRadioSwitch:a.AO,TableHeaderColumnOptions:W},props:{columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]},viewSetting:{type:Object,default:null},config:{type:Object,default:null}},data(){return{openedColumnHeaderMenus:{},localViewSetting:this.viewSetting}},computed:{allRowsAreSelected(){return!(!Array.isArray(this.rows)||!Array.isArray(this.selectedRows)||0===this.rows.length)&&this.rows.length===this.selectedRows.length},visibleColumns(){return this.columns.filter((t=>!this.localViewSetting?.hiddenColumns?.includes(t.id)))}},watch:{localViewSetting(){this.$emit("update:viewSetting",this.localViewSetting)},viewSetting(){this.localViewSetting=this.viewSetting}},methods:{getFilterWithId:L.uA,updateOpenState(t){this.openedColumnHeaderMenus[t]=!this.openedColumnHeaderMenus[t],this.openedColumnHeaderMenus=Object.assign({},this.openedColumnHeaderMenus)},getFilterForColumn(t){return this.localViewSetting?.filter?.filter((e=>e.columnId===t.id))},hasRightHiddenNeighbor(t){return this.localViewSetting?.hiddenColumns?.includes(this.columns[this.columns.indexOf(this.columns.find((e=>e.id===t)))+1]?.id)},unhide(t){const e=this.localViewSetting.hiddenColumns.indexOf(this.columns[this.columns.indexOf(this.columns.find((e=>e.id===t)))+1]?.id);-1!==e&&this.localViewSetting.hiddenColumns.splice(e,1)},deleteFilter(t){const e=this.localViewSetting?.filter?.findIndex((e=>e.columnId+e.operator.id+e.value===t));-1!==e&&this.localViewSetting.filter.splice(e,1)},castToFilter(t){return this.getFilterWithId(t)}}};var tt=n(19145),et={};et.styleTagTransform=T(),et.setAttributes=y(),et.insert=v().bind(null,"head"),et.domAPI=b(),et.insertStyleElement=x();g()(tt.A,et);tt.A&&tt.A.locals&&tt.A.locals;var nt=(0,R.A)(Z,(function(){var t=this,e=t._self._c;return e("tr",[t.config.canSelectRows?e("th",{class:{sticky:t.config.canSelectRows}},[e("div",{staticClass:"cell-wrapper"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.allRowsAreSelected},on:{"update:checked":e=>t.$emit("select-all-rows",e)}}),t._v(" "),t.hasRightHiddenNeighbor(-1)?e("div",{staticClass:"hidden-indicator-first",on:{click:function(e){return t.unhide(-1)}}}):t._e()],1)]):t._e(),t._v(" "),t._l(t.visibleColumns,(function(n){return e("th",{key:n.id},[e("div",{staticClass:"cell-wrapper"},[e("div",{staticClass:"cell-options-wrapper"},[e("div",{staticClass:"cell"},[e("div",{staticClass:"clickable",on:{click:function(e){return t.updateOpenState(n.id)}}},[t._v("\n\t\t\t\t\t\t"+t._s(n.title)+"\n\t\t\t\t\t")]),t._v(" "),e("TableHeaderColumnOptions",{attrs:{column:n,"open-state":t.openedColumnHeaderMenus[n.id],config:t.config,"view-setting":t.localViewSetting},on:{"update:openState":function(e){return t.$set(t.openedColumnHeaderMenus,n.id,e)},"update:open-state":function(e){return t.$set(t.openedColumnHeaderMenus,n.id,e)},"update:viewSetting":function(e){t.localViewSetting=e},"update:view-setting":function(e){t.localViewSetting=e},"edit-column":e=>t.$emit("edit-column",e),"delete-column":e=>t.$emit("delete-column",e)}})],1),t._v(" "),t.getFilterForColumn(n)?e("div",{staticClass:"filter-wrapper"},t._l(t.getFilterForColumn(n),(function(n){return e("FilterLabel",{key:n.columnId+n.operator.id+n.value,attrs:{id:n.columnId+n.operator.id+n.value,operator:t.castToFilter(n.operator.id),value:n.value},on:{"delete-filter":e=>t.deleteFilter(e)}})})),1):t._e()]),t._v(" "),t.hasRightHiddenNeighbor(n.id)?e("div",{staticClass:"hidden-indicator",on:{click:function(e){return t.unhide(n.id)}}}):t._e()])])})),t._v(" "),t.config.showActions?e("th",{class:{sticky:t.config.showActions},attrs:{"data-cy":"customTableAction"}},[t._t("actions")],2):t._e()],2)}),[],!1,null,"5ca378d8",null);const at=nt.exports;var it=n(6851),lt=n(63655),ot=n(44487),st=n(17871),rt=n(55012);const ct={name:"TableCellHtml",components:{EditorContent:st.$Z},props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:String,default:""}},data:()=>({editor:null}),watch:{value(t){this.editor.commands.setContent(t,!1)}},mounted(){this.editor=new st.KE({extensions:[rt.W],content:this.value,editable:!1})},beforeUnmount(){this.editor.destroy()}};var dt=n(33944),ut={};ut.styleTagTransform=T(),ut.setAttributes=y(),ut.insert=v().bind(null,"head"),ut.domAPI=b(),ut.insertStyleElement=x();g()(dt.A,ut);dt.A&&dt.A.locals&&dt.A.locals;const At=(0,R.A)(ct,(function(){var t=this._self._c;return t("div",[t("EditorContent",{attrs:{editor:this.editor}})],1)}),[],!1,null,"1b382b5e",null).exports;const pt={name:"TableCellProgress",components:{NcProgressBar:a.kS},props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:Number,default:null}},computed:{getValue(){return null===this.value||isNaN(this.value)?null:this.value}}};var ht=n(95677),mt={};mt.styleTagTransform=T(),mt.setAttributes=y(),mt.insert=v().bind(null,"head"),mt.domAPI=b(),mt.insertStyleElement=x();g()(ht.A,mt);ht.A&&ht.A.locals&&ht.A.locals;const gt=(0,R.A)(pt,(function(){var t=this,e=t._self._c;return e("div",[null!==t.getValue?e("NcProgressBar",{attrs:{value:t.getValue}}):t._e()],1)}),[],!1,null,"685ce777",null).exports;const Ct={name:"TableCellLink",components:{LinkWidget:n(94623).A},mixins:[I.A],props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:String,default:null}},computed:{getValueObject(){if(this.hasJsonStructure(this.value)){const t=JSON.parse(this.value);return delete t.subline,!t.resourceUrl&&t.value&&(t.resourceUrl=t.value),t||{}}return{thumbnailUrl:null,iconUrl:null,title:this.value,resourceUrl:this.value}}}};var bt=n(55865),wt={};wt.styleTagTransform=T(),wt.setAttributes=y(),wt.insert=v().bind(null,"head"),wt.domAPI=b(),wt.insertStyleElement=x();g()(bt.A,wt);bt.A&&bt.A.locals&&bt.A.locals;const vt=(0,R.A)(Ct,(function(){var t=this,e=t._self._c;return e("div",[e("LinkWidget",{attrs:{"thumbnail-url":t.getValueObject.thumbnailUrl,"icon-url":t.getValueObject.icon,title:t.getValueObject.title,subline:t.getValueObject.subline,url:t.getValueObject.resourceUrl,"truncate-length":20,"icon-size":25,"hide-default-icon":!0,"underline-title":!0}})],1)}),[],!1,null,"00673484",null).exports;const ft={name:"TableCellNumber",props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:Number,default:null}},computed:{getValue(){return null===this.value?null:this.value.toFixed(this.column?.numberDecimals)}}};var yt=n(3073),St={};St.styleTagTransform=T(),St.setAttributes=y(),St.insert=v().bind(null,"head"),St.domAPI=b(),St.insertStyleElement=x();g()(yt.A,St);yt.A&&yt.A.locals&&yt.A.locals;const xt=(0,R.A)(ft,(function(){var t=this;return(0,t._self._c)("div",[t._v("\n\t"+t._s(t.column.numberPrefix)+t._s(t.getValue)+t._s(t.column.numberSuffix)+"\n")])}),[],!1,null,"0493333b",null).exports;const _t={name:"TableCellStars",props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:Number,default:0}},computed:{getValue(){const t=this.value;return"★".repeat(t)+"☆".repeat(5-t)}}};var Tt=n(53977),kt={};kt.styleTagTransform=T(),kt.setAttributes=y(),kt.insert=v().bind(null,"head"),kt.domAPI=b(),kt.insertStyleElement=x();g()(Tt.A,kt);Tt.A&&Tt.A.locals&&Tt.A.locals;const Bt=(0,R.A)(_t,(function(){var t=this;return(0,t._self._c)("div",[t._v("\n\t"+t._s(t.getValue)+"\n")])}),[],!1,null,"1bdd7b4d",null).exports;var Rt=n(71448),Et=n(74968);const Ft={name:"TableCellYesNo",components:{RadioboxBlankIcon:Rt.A,CheckCircleOutline:Et.A},props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:String,default:"false"}}};var Dt=n(48477),Nt={};Nt.styleTagTransform=T(),Nt.setAttributes=y(),Nt.insert=v().bind(null,"head"),Nt.domAPI=b(),Nt.insertStyleElement=x();g()(Dt.A,Nt);Dt.A&&Dt.A.locals&&Dt.A.locals;const Vt=(0,R.A)(Ft,(function(){var t=this,e=t._self._c;return e("div",[null!==t.value&&"false"===t.value?e("RadioboxBlankIcon"):t._e(),t._v(" "),null!==t.value&&"true"===t.value?e("CheckCircleOutline"):t._e()],1)}),[],!1,null,"9b22e126",null).exports;const It={name:"TableCellDateTime",props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:String,default:null}},computed:{getValue(){return this.value&&"none"!==this.value&&"today"!==this.value&&"now"!==this.value?this.column.formatValue(this.value):""},getDefaultValue(){return this.column.formatValue(this.column.datetimeDefault)}}};var Pt=n(90446),Ot={};Ot.styleTagTransform=T(),Ot.setAttributes=y(),Ot.insert=v().bind(null,"head"),Ot.domAPI=b(),Ot.insertStyleElement=x();g()(Pt.A,Ot);Pt.A&&Pt.A.locals&&Pt.A.locals;const Mt=(0,R.A)(It,(function(){var t=this;return(0,t._self._c)("div",[t._v("\n\t"+t._s(t.getValue)+"\n")])}),[],!1,null,"25628c35",null).exports;const jt={name:"TableCellTextLine",filters:{truncate:(t,e)=>t?.length>=e?t.substring(0,e)+"...":t},props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:String,default:""}}};const Ht=(0,R.A)(jt,(function(){var t=this,e=t._self._c;return t.value?e("div",[t._v("\n\t"+t._s(t._f("truncate")(t.value,50))+"\n")]):t._e()}),[],!1,null,null,null).exports;const zt={name:"TableCellSelection",props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:Number,default:null}},methods:{t:p.Tl,isDeleted(){this.column.isDeletedLabel(this.value)}}};var Gt=n(23202),Lt={};Lt.styleTagTransform=T(),Lt.setAttributes=y(),Lt.insert=v().bind(null,"head"),Lt.domAPI=b(),Lt.insertStyleElement=x();g()(Gt.A,Lt);Gt.A&&Gt.A.locals&&Gt.A.locals;const $t=(0,R.A)(zt,(function(){var t=this,e=t._self._c;return e("div",[t._v("\n\t"+t._s(t.column.getLabel(t.value))),t.isDeleted()?e("span",{attrs:{title:t.t("tables","This option is outdated.")}},[t._v(" ⚠️")]):t._e()])}),[],!1,null,"524f7dde",null).exports;const Ut={name:"TableCellMultiSelection",props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:Array,default:null}},methods:{t:p.Tl,getObjects(){return this.column.getObjects(this.value)}}};var Yt=n(80135),Wt={};Wt.styleTagTransform=T(),Wt.setAttributes=y(),Wt.insert=v().bind(null,"head"),Wt.domAPI=b(),Wt.insertStyleElement=x();g()(Yt.A,Wt);Yt.A&&Yt.A.locals&&Yt.A.locals;const qt=(0,R.A)(Ut,(function(){var t=this,e=t._self._c;return e("div",[e("ul",t._l(t.getObjects(),(function(n){return e("li",{key:n.id},[t._v("\n\t\t\t"+t._s(n.label)),n.deleted?e("span",{attrs:{title:t.t("tables","This option is outdated.")}},[t._v(" ⚠️")]):t._e()])})),0)])}),[],!1,null,"b614b94c",null).exports;const Xt={name:"TableCellEditor",components:{NcEditor:n(87895).A},props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:String,default:""}}};var Jt=n(3514),Kt={};Kt.styleTagTransform=T(),Kt.setAttributes=y(),Kt.insert=v().bind(null,"head"),Kt.domAPI=b(),Kt.insertStyleElement=x();g()(Jt.A,Kt);Jt.A&&Jt.A.locals&&Jt.A.locals;const Qt=(0,R.A)(Xt,(function(){var t=this,e=t._self._c;return""!==t.value&&null!==t.value?e("NcEditor",{attrs:{"can-edit":!1,text:t.value,"show-border":!1,"show-readonly-bar":!1}}):t._e()}),[],!1,null,"706fd71a",null).exports;const Zt=(0,n(21777).HW)(),te={name:"TableCellUsergroup",components:{NcUserBubble:a.Z9},props:{column:{type:Object,default:()=>{}},rowId:{type:Number,default:null},value:{type:Array,default:()=>[]}},computed:{isCurrentUser(){return t=>this.isUser(t)&&t.id===Zt?.uid},isUser:()=>t=>0===t.type}};var ee=n(74872),ne={};ne.styleTagTransform=T(),ne.setAttributes=y(),ne.insert=v().bind(null,"head"),ne.domAPI=b(),ne.insertStyleElement=x();g()(ee.A,ne);ee.A&&ee.A.locals&&ee.A.locals;const ae=(0,R.A)(te,(function(){var t=this,e=t._self._c;return t.value?e("div",{staticClass:"table-cell-usergroup"},t._l(t.value,(function(n){return e("div",{key:n.id,staticClass:"inline usergroup-entry"},[e("NcUserBubble",{attrs:{user:n.id,"avatar-image":1===n.type?"icon-group":"","is-no-user":0!==n.type,"display-name":n.displayName??n.id,"show-user-status":t.isUser(n)&&t.column.showUserStatus,size:t.column.showUserStatus?34:20,primary:t.isCurrentUser(n)}})],1)})),0):t._e()}),[],!1,null,"1c6dd35c",null).exports;var ie=n(92171),le=n(93742);const oe={name:"TableRow",components:{TableCellYesNo:Vt,TableCellStars:Bt,TableCellNumber:xt,TableCellLink:vt,TableCellProgress:gt,TableCellHtml:At,NcButton:a.x1,Pencil:M.A,NcCheckboxRadioSwitch:a.AO,TableCellDateTime:Mt,TableCellTextLine:Ht,TableCellSelection:$t,TableCellMultiSelection:qt,TableCellTextRich:Qt,TableCellUsergroup:ae},props:{row:{type:Object,default:()=>{}},columns:{type:Array,default:()=>[]},selected:{type:Boolean,default:!1},viewSetting:{type:Object,default:null},config:{type:Object,default:null}},computed:{getSelection:{get:()=>(void 0).selected,set:()=>{alert("updating selection")}},visibleColumns(){return this.columns.filter((t=>!this.viewSetting?.hiddenColumns?.includes(t.id)))}},methods:{t:p.Tl,getTableCell(t){switch(t.type){case ie.q.TextLine:return"TableCellTextLine";case ie.q.TextLink:return"TableCellLink";case ie.q.TextRich:return"TableCellTextRich";case ie.q.Number:return"TableCellNumber";case ie.q.NumberStars:return"TableCellStars";case ie.q.NumberProgress:return"TableCellProgress";case ie.q.Selection:return"TableCellSelection";case ie.q.SelectionMulti:return"TableCellMultiSelection";case ie.q.SelectionCheck:return"TableCellYesNo";case ie.q.Datetime:case ie.q.DatetimeDate:case ie.q.DatetimeTime:return"TableCellDateTime";case ie.q.Usergroup:return"TableCellUsergroup";default:return"TableCellHtml"}},getCell(t){if(t<0){let e;switch(t){case le.PF:e=this.row.id;break;case le.ay:e=this.row.createdBy;break;case le.PB:e=this.row.lastEditBy;break;case le._y:e=this.row.createdAt;break;case le.t0:e=this.row.lastEditAt}return{columnId:t,value:e}}return this.row.data.find((e=>e.columnId===t))||null},getCellValue(t){if(!this.row)return null;const e=this.getCell(t.id);let n;return n=e?e.value:t.default(),t.parseValue(n)},truncate:t=>t.length>=400?t.substring(0,400)+"...":t}};var se=n(70341),re={};re.styleTagTransform=T(),re.setAttributes=y(),re.insert=v().bind(null,"head"),re.domAPI=b(),re.insertStyleElement=x();g()(se.A,re);se.A&&se.A.locals&&se.A.locals;const ce=(0,R.A)(oe,(function(){var t=this,e=t._self._c;return t.row?e("tr",{class:{selected:t.selected}},[t.config.canSelectRows?e("td",{class:{sticky:t.config.canSelectRows}},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.selected},on:{"update:checked":e=>t.$emit("update-row-selection",{rowId:t.row.id,value:e})}})],1):t._e(),t._v(" "),t._l(t.visibleColumns,(function(n){return e("td",{key:n.id,class:{"search-result":t.getCell(n.id)?.searchStringFound,"filter-result":t.getCell(n.id)?.filterFound}},[e(t.getTableCell(n),{tag:"component",attrs:{column:n,"row-id":t.row.id,value:t.getCellValue(n)}})],1)})),t._v(" "),t.config.showActions?e("td",{class:{sticky:t.config.showActions}},[t.config.canEditRows||t.config.canDeleteRows?e("NcButton",{attrs:{type:"primary","aria-label":t.t("tables","Edit row"),"data-cy":"editRowBtn"},on:{click:function(e){return t.$emit("edit-row",t.row.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Pencil",{attrs:{size:20}})]},proxy:!0}],null,!1,580569589)}):t._e()],1):t._e()],2):t._e()}),[],!1,null,"ab985e7e",null).exports;var de=n(65899),ue=n(95197),Ae=n(88166);const pe={name:"CustomTable",components:{TableRow:ce,TableHeader:at,NcButton:a.x1,PageLastIcon:it.A,PageFirstIcon:lt.A,ChevronLeftIcon:H.A,ChevronRightIcon:ot.A,NcSelect:a.EQ},props:{rows:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},elementId:{type:Number,default:null},isView:{type:Boolean,default:!0},viewSetting:{type:Object,default:null},config:{type:Object,default:null}},setup:()=>({isMobile:(0,a.al)()}),data(){return{selectedRows:[],searchTerm:null,localViewSetting:this.viewSetting,pageNumber:1,rowsPerPage:100}},computed:{...(0,de.aH)(Ae.I,["appNavCollapsed"]),allPageNumbersArray(){return Array.from({length:this.totalPages},((t,e)=>1+e))},currentPageRows(){return this.getSearchedAndFilteredAndSortedRows.slice((this.pageNumber-1)*this.rowsPerPage,(this.pageNumber-1)*this.rowsPerPage+this.rowsPerPage)},totalPages(){return Math.ceil(this.getSearchedAndFilteredAndSortedRows.length/this.rowsPerPage)},sorting(){return this.viewSetting?.sorting},getSearchedAndFilteredRows(){const t=!1;if(!this.viewSetting?.filter?.length>0&&!this.viewSetting?.searchString)return this.rows?.forEach((t=>{this.columns?.forEach((e=>{const n=t.data.find((t=>t.columnId===e.id));void 0!==n&&(delete n.searchStringFound,delete n.filterFound)}))})),this.rows;const e=[],n=this.viewSetting?.searchString;for(const a of this.rows){t;let i=null,l=!1;this.columns?.forEach((t=>{let e=null,o=!0;const s=this.getFiltersForColumn(t);let r;if(t.id<0)switch(r={columnId:t.id},t.id){case le.PF:r.value=a.id;break;case le.ay:r.value=a.createdBy;break;case le.PB:r.value=a.editedBy;break;case le._y:r.value=a.createdAt;break;case le.t0:r.value=a.editedAt}else r=a.data.find((e=>e.columnId===t.id));void 0===r&&(n&&(o=!1),r={columnId:t.id,value:null}),delete r.searchStringFound,delete r.filterFound,null!==s&&s.forEach((n=>{this.addMagicFieldsValues(n),null!==e&&!0!==e||(e=t.isFilterFound(r,n))})),n&&(console.debug("look for searchString",n),o=t.isSearchStringFound(r,n.toLowerCase())),null===e||!i&&null!==i||(i=e),l=l||o})),(i||null===i)&&l&&e.push({...a})}return e},getSearchedAndFilteredAndSortedRows(){const t=this.columns.concat(ue.F),e=e=>{const n=t.find((t=>t.id===e?.[0].columnId)),a=[];for(let n=1;n<e.length;n++){const i=t.find((t=>t.id===e[n].columnId));a.push(i?.sort?.(e[n].mode))}return[...this.getSearchedAndFilteredRows].sort(n?.sort?.(e[0].mode,a))};return this.viewSetting?.presetSorting?e(this.viewSetting.presetSorting):this.viewSetting?.sorting?e(this.viewSetting.sorting):this.getSearchedAndFilteredRows}},watch:{localViewSetting(){this.$emit("update:viewSetting",this.localViewSetting)},viewSetting(){this.localViewSetting=this.viewSetting}},updated(){(this.pageNumber>this.totalPages||1===this.totalPages)&&(this.pageNumber=this.totalPages)},mounted(){(0,i.B1)("tables:selected-rows:deselect",(t=>{let{elementId:e,isView:n}=t;return this.deselectAllRows(e,n)}))},beforeDestroy(){(0,i.al)("tables:selected-rows:deselect",(t=>{let{elementId:e,isView:n}=t;return this.deselectAllRows(e,n)}))},methods:{t:p.Tl,addMagicFieldsValues(t){Object.values(X.T).forEach((e=>{const n=t.value.replace("@"+e.id,e.replace);t.value!==n&&(t.magicValuesEnriched=n)}))},getFiltersForColumn(t){if(this.viewSetting?.filter?.length>0){const e=this.viewSetting.filter.filter((e=>e.columnId===t.id));if(e.length>0)return e}return null},deselectAllRows(t,e){parseInt(t)===parseInt(this.elementId)&&e===this.isView&&(this.selectedRows=[])},selectAllRows(t){this.selectedRows=[],t&&this.getSearchedAndFilteredRows.forEach((t=>{this.selectedRows.push(t.id)})),this.$emit("update-selected-rows",this.selectedRows)},isRowSelected(t){return this.selectedRows.includes(t)},updateRowSelection(t){const e=t.rowId,n=t.value;if(this.selectedRows.includes(e)&&!n){const t=this.selectedRows.indexOf(e);t>-1&&this.selectedRows.splice(t,1),this.$emit("update-selected-rows",this.selectedRows)}!this.selectedRows.includes(e)&&n&&(this.selectedRows.push(t.rowId),this.$emit("update-selected-rows",this.selectedRows))}}},he=pe;var me=n(47316),ge={};ge.styleTagTransform=T(),ge.setAttributes=y(),ge.insert=v().bind(null,"head"),ge.domAPI=b(),ge.insertStyleElement=x();g()(me.A,ge);me.A&&me.A.locals&&me.A.locals;var Ce=n(29819),be={};be.styleTagTransform=T(),be.setAttributes=y(),be.insert=v().bind(null,"head"),be.domAPI=b(),be.insertStyleElement=x();g()(Ce.A,be);Ce.A&&Ce.A.locals&&Ce.A.locals;var we=(0,R.A)(he,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("table",{staticClass:"tables-list__table"},[e("thead",{staticClass:"tables-list__thead"},[e("TableHeader",{attrs:{columns:t.columns,"selected-rows":t.selectedRows,rows:t.getSearchedAndFilteredAndSortedRows,"view-setting":t.localViewSetting,config:t.config},on:{"update:viewSetting":function(e){t.localViewSetting=e},"update:view-setting":function(e){t.localViewSetting=e},"create-row":function(e){return t.$emit("create-row")},"create-column":function(e){return t.$emit("create-column")},"edit-column":e=>t.$emit("edit-column",e),"delete-column":e=>t.$emit("delete-column",e),"download-csv":e=>t.$emit("download-csv",e),"select-all-rows":t.selectAllRows},scopedSlots:t._u([{key:"actions",fn:function(){return[t._t("actions")]},proxy:!0}],null,!0)})],1),t._v(" "),e("tbody",[t._l(t.currentPageRows,(function(n,a){return e("TableRow",{key:a,attrs:{"data-cy":"customTableRow",row:n,columns:t.columns,selected:t.isRowSelected(n.id),"view-setting":t.localViewSetting,config:t.config},on:{"update:viewSetting":function(e){t.localViewSetting=e},"update:view-setting":function(e){t.localViewSetting=e},"update-row-selection":t.updateRowSelection,"edit-row":e=>t.$emit("edit-row",e)}})})),t._v(" "),e("tr")],2)]),t._v(" "),t.totalPages>1?e("div",{staticClass:"pagination-footer",class:{"large-width":!t.appNavCollapsed||t.isMobile}},[e("div",{staticClass:"pagination-items"},[e("NcButton",{attrs:{type:"tertiary",disabled:1===t.totalPages||t.pageNumber<=1,"aria-label":t.t("tables","Go to first page")},on:{click:function(e){t.pageNumber=1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PageFirstIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,105764010)}),t._v(" "),e("NcButton",{attrs:{type:"tertiary",disabled:1===t.totalPages||t.pageNumber<=1,"aria-label":t.t("tables","Go to previous page")},on:{click:function(e){t.pageNumber--}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeftIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1589816531)}),t._v(" "),e("div",{staticClass:"page-number"},[e("NcSelect",{attrs:{options:t.allPageNumbersArray,"aria-label-combobox":t.t("tables","Page number")},scopedSlots:t._u([{key:"selected-option-container",fn:function(n){let{option:a}=n;return[e("span",{staticClass:"selected-page"},[t._v("\n\t\t\t\t\t\t\t"+t._s(a.label)+" of "+t._s(t.totalPages)+"\n\t\t\t\t\t\t")])]}}],null,!1,4260475),model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}})],1),t._v(" "),e("NcButton",{attrs:{type:"tertiary",disabled:1===t.totalPages||t.pageNumber>=t.totalPages,"aria-label":t.t("tables","Go to next page")},on:{click:function(e){t.pageNumber++}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronRightIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3494362504)}),t._v(" "),e("NcButton",{attrs:{type:"tertiary",disabled:1===t.totalPages||t.pageNumber>=t.totalPages,"aria-label":t.t("tables","Go to last page")},on:{click:function(e){t.pageNumber=t.totalPages}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PageLastIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1142722298)})],1)]):t._e()])}),[],!1,null,"0c249b26",null);const ve=we.exports;var fe=n(51651);const ye={mixins:[I.A],methods:{downloadCsv(t,e,n){t&&0!==t.length||console.debug("downloadCSV has empty parameter, expected array ob row objects",t);const a=[];t.forEach((t=>{const n={};e.forEach((e=>{if(e.id>=0){const a=t.data?t.data.find((t=>t.columnId===e.id))||"":null;n[e.title]=a?e.getValueString(a):""}else switch(e.id){case le.PF:n[e.title]=t.id;break;case le.ay:n[e.title]=t.createdBy;break;case le.PB:n[e.title]=t.lastEditBy;break;case le._y:n[e.title]=t.createdAt;break;case le.t0:n[e.title]=t.lastEditAt}})),a.push(n)}));const i=this.$papa.unparse(a,{escapeFormulae:!0}),l=n.replace(/([#0-9]\u20E3)|[\xA9\xAE\u203C\u2047-\u2049\u2122\u2139\u3030\u303D\u3297\u3299][\uFE00-\uFEFF]?|[\u2190-\u21FF][\uFE00-\uFEFF]?|[\u2300-\u23FF][\uFE00-\uFEFF]?|[\u2460-\u24FF][\uFE00-\uFEFF]?|[\u25A0-\u25FF][\uFE00-\uFEFF]?|[\u2600-\u27BF][\uFE00-\uFEFF]?|[\u2900-\u297F][\uFE00-\uFEFF]?|[\u2B00-\u2BF0][\uFE00-\uFEFF]?|(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])[\uFE00-\uFEFF]?/g,"");this.$papa.download(i,(0,fe.A)().format("YY-MM-DD_HH-mm")+"_"+l)}}};var Se=n(37896),xe=n(37900);const _e={name:"NcTable",components:{CustomTable:ve,Options:V,NcButton:a.x1,NcEmptyContent:a.yI,Plus:l.A,Cancel:Se.A},mixins:[ye],props:{rows:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},elementId:{type:Number,default:null},isView:{type:Boolean,default:!0},downloadTitle:{type:String,default:(0,p.Tl)("tables","Download")},viewSetting:{type:Object,default:null},selectedRows:{type:Array,default:null},canReadRows:{type:Boolean,default:!0},canCreateRows:{type:Boolean,default:!0},canEditRows:{type:Boolean,default:!0},canDeleteRows:{type:Boolean,default:!0},canCreateColumns:{type:Boolean,default:!0},canEditColumns:{type:Boolean,default:!0},canDeleteColumns:{type:Boolean,default:!0},canDeleteTable:{type:Boolean,default:!0},canSelectRows:{type:Boolean,default:!0},canHideColumns:{type:Boolean,default:!0},canFilter:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0}},data(){return{localSelectedRows:[],localViewSetting:this.viewSetting??{},viewerAppAvailable:!!window.OCA?.Viewer?.open,table:null}},computed:{config(){return{canReadRows:this.canReadRows,canCreateRows:this.canCreateRows,canEditRows:this.canEditRows,canDeleteRows:this.canDeleteRows,canCreateColumns:this.canCreateColumns,canEditColumns:this.canEditColumns,canDeleteColumns:this.canDeleteColumns,canDeleteTable:this.canDeleteTable,canSelectRows:this.canSelectRows,canHideColumns:this.canHideColumns,canFilter:this.canFilter,showActions:this.showActions}},parsedColumns(){return!this.columns.length||this.columns[0]instanceof G.PJ?this.columns:this.columns.map((t=>(0,xe.G)(t)))}},watch:{localSelectedRows(){this.$emit("update:selectedRows",this.localSelectedRows)},localViewSetting(){this.$emit("update:viewSetting",this.localViewSetting)},viewSetting(){this.localViewSetting=this.viewSetting}},mounted(){(0,i.B1)("tables:selected-rows:deselect",(t=>{let{elementId:e,isView:n}=t;return this.deselectRows(e,n)})),this.viewerAppAvailable&&this.$refs.table.addEventListener("click",(function(t){const e=t.target.closest(".image_container.widget-file img");if(!e)return;const n=decodeURIComponent(e.src.match(/\/dav\/files\/(.+?)\/(.+)/)[2]);OCA.Viewer.open({path:n,list:[{filename:n}]})}))},beforeDestroy(){(0,i.al)("tables:selected-rows:deselect",(t=>{let{elementId:e,isView:n}=t;return this.deselectRows(e,n)}))},methods:{t:p.Tl,deselectRows(t,e){parseInt(t)===parseInt(this.elementId)&&e===this.isView&&(this.localSelectedRows=[])},setSearchString(t){this.localViewSetting.searchString=""!==t?t:null,this.localViewSetting=JSON.parse(JSON.stringify(this.localViewSetting))}}};var Te=n(16809),ke={};ke.styleTagTransform=T(),ke.setAttributes=y(),ke.insert=v().bind(null,"head"),ke.domAPI=b(),ke.insertStyleElement=x();g()(Te.A,ke);Te.A&&Te.A.locals&&Te.A.locals;var Be=n(43653),Re={};Re.styleTagTransform=T(),Re.setAttributes=y(),Re.insert=v().bind(null,"head"),Re.domAPI=b(),Re.insertStyleElement=x();g()(Be.A,Re);Be.A&&Be.A.locals&&Be.A.locals;var Ee=(0,R.A)(_e,(function(){var t=this,e=t._self._c;return e("div",{ref:"table",staticClass:"NcTable",attrs:{"data-cy":"ncTable"}},[e("div",{staticClass:"options row",staticStyle:{"padding-right":"calc(var(--default-grid-baseline) * 2)"}},[e("Options",{attrs:{rows:t.rows,columns:t.parsedColumns,"element-id":t.elementId,"is-view":t.isView,"selected-rows":t.localSelectedRows,"show-options":0!==t.parsedColumns.length,"view-setting":t.localViewSetting,config:t.config},on:{"update:viewSetting":function(e){t.localViewSetting=e},"update:view-setting":function(e){t.localViewSetting=e},"create-row":function(e){return t.$emit("create-row")},"download-csv":e=>t.downloadCsv(e,t.parsedColumns,t.downloadTitle),"set-search-string":e=>t.setSearchString(e),"delete-selected-rows":e=>t.$emit("delete-selected-rows",e)}})],1),t._v(" "),e("div",{staticClass:"custom-table row"},[t.config.canReadRows||t.config.canCreateRows&&t.rows.length>0?e("CustomTable",{attrs:{columns:t.parsedColumns,rows:t.rows,"is-view":t.isView,"element-id":t.elementId,"view-setting":t.localViewSetting,config:t.config},on:{"update:viewSetting":function(e){t.localViewSetting=e},"update:view-setting":function(e){t.localViewSetting=e},"create-row":function(e){return t.$emit("create-row")},"edit-row":e=>t.$emit("edit-row",e),"create-column":function(e){return t.$emit("create-column")},"edit-column":e=>t.$emit("edit-column",e),"delete-column":e=>t.$emit("delete-column",e),"update-selected-rows":e=>t.localSelectedRows=e,"download-csv":e=>t.downloadCsv(e,t.parsedColumns,t.table)},scopedSlots:t._u([{key:"actions",fn:function(){return[t._t("actions")]},proxy:!0}],null,!0)}):t.config.canCreateRows&&0===t.rows.length?e("NcEmptyContent",{attrs:{name:t.t("tables","Create rows"),description:t.t("tables","You are not allowed to read this table, but you can still create rows.")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Plus",{attrs:{size:25}})]},proxy:!0},{key:"action",fn:function(){return[e("NcButton",{attrs:{"aria-label":t.t("tables","Create row"),type:"primary"},on:{click:function(e){return t.$emit("create-row")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Plus",{attrs:{size:25}})]},proxy:!0}])},[t._v("\n\t\t\t\t\t"+t._s(t.t("tables","Create row"))+"\n\t\t\t\t")])]},proxy:!0}])}):e("NcEmptyContent",{attrs:{name:t.t("tables","No permissions"),description:t.t("tables","You have no permissions for this table.")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Cancel",{attrs:{size:25}})]},proxy:!0}])})],1)])}),[],!1,null,"053a123c",null);const Fe=Ee.exports;var De=n(16880),Ne=n(97786),Ve=n(85168),Ie=n(9795);const Pe={components:{NcTable:Fe,Options:V,NcLoadingIcon:a.ne},mixins:[De.A],props:{richObjectType:{type:String,default:""},richObject:{type:Object,default:null},accessible:{type:Boolean,default:!0}},data:()=>({searchExp:null,rows:null,tablesStore:(0,Ae.I)(),dataStore:(0,Ie.D)()}),computed:{tablePermissions(){return{canCreateRows:this.canCreateRowInElement(this.richObject),canReadRows:!0,canEditRows:this.canUpdateData(this.richObject),canDeleteRows:this.canDeleteData(this.richObject),canCreateColumns:!1,canEditColumns:!1,canDeleteColumns:!1,canDeleteTable:!1,canSelectRows:!1,canHideColumns:!1,canFilter:!1,showActions:this.canManageElement(this.richObject)}},filteredRows(){return this.searchExp?this.rows.filter((t=>t.data.some((t=>String(t.value).search(this.searchExp)>=0)))):this.rows}},async mounted(){(0,Ne.wYm)(this.$el,(t=>{const e=t[0],{width:n}=e.contentRect;this.$el.style.setProperty("--widget-content-width",`${n}px`)})),await this.loadRows()},methods:{...(0,de.i0)(Ie.D,["loadRowsFromBE","getRows"]),search(t){this.searchExp=""!==t?new RegExp(t.trim(),"ig"):null},async createRow(){const{default:t}=await Promise.all([n.e("vendors-node_modules_nextcloud_dialogs_dist_style_css-node_modules_vue-material-design-icons_-1ccf79"),n.e("src_shared_components_ncTable_mixins_rowHelper_js-src_modules_main_partials_ColumnFormCompone-180085"),n.e("src_modules_modals_CreateRow_vue")]).then(n.bind(n,55276));(0,Ve.Ss)(t,{showModal:!0,columns:this.richObject.columns,isView:Boolean(this.richObject.type),elementId:this.richObject.id},(()=>{const t=this.getRows;if(t.length>this.rows.length){const e=t.at(-1);this.rows.push(e)}}))},async editRow(t){const{default:e}=await Promise.all([n.e("vendors-node_modules_nextcloud_dialogs_dist_style_css-node_modules_vue-material-design-icons_-1ccf79"),n.e("src_shared_components_ncTable_mixins_rowHelper_js-src_modules_main_partials_ColumnFormCompone-180085"),n.e("src_modules_modals_EditRow_vue")]).then(n.bind(n,30004));(0,Ve.Ss)(e,{showModal:!0,columns:this.richObject.columns,row:this.getRow(t),isView:Boolean(this.richObject.type),element:this.richObject},(()=>{const e=this.getRows,n=this.rows.findIndex((e=>e.id===t)),a=e.find((e=>e.id===t));this.rows.splice(n,1,a)}))},getRow(t){return this.rows.find((e=>e.id===t))},async loadRows(){await this.loadRowsFromBE({tableId:this.richObject.id})&&(this.rows=this.getRows)}}};var Oe=n(61157),Me={};Me.styleTagTransform=T(),Me.setAttributes=y(),Me.insert=v().bind(null,"head"),Me.domAPI=b(),Me.insertStyleElement=x();g()(Oe.A,Me);Oe.A&&Oe.A.locals&&Oe.A.locals;const je=(0,R.A)(Pe,(function(){var t=this,e=t._self._c;return t.richObject?e("div",{staticClass:"tables-content-widget"},[e("div",{staticClass:"header"},[e("h2",[t.rows?e("span",[t._v(t._s(t.richObject.emoji))]):e("NcLoadingIcon",{attrs:{size:30}}),t._v(" "+t._s(t.richObject.title)+"\n\t\t")],1),t._v(" "),e("Options",{attrs:{config:t.tablePermissions,"show-options":!0},on:{"create-row":t.createRow,"set-search-string":t.search}})],1),t._v(" "),t.rows?e("div",{staticClass:"nc-table"},[e("NcTable",t._b({attrs:{rows:t.filteredRows,columns:t.richObject.columns},on:{"edit-row":t.editRow}},"NcTable",t.tablePermissions,!1))],1):t._e()]):t._e()}),[],!1,null,"2801481a",null).exports},162:(t,e,n)=>{n.r(e),n.d(e,{default:()=>y});var a=n(9612),i=n(24319),l=n(76333),o=n(53334);const s={components:{IconTables:a.A,IconView:i.A,NcUserBubble:l.Z9,NcCounterBubble:l.E7},props:{richObjectType:{type:String,default:""},richObject:{type:Object,default:null},accessible:{type:Boolean,default:!0}},computed:{emoji(){return this.richObject.emoji},getType(){return this.richObject?.type??null}},methods:{n:o.zw}};var r=n(85072),c=n.n(r),d=n(97825),u=n.n(d),A=n(77659),p=n.n(A),h=n(55056),m=n.n(h),g=n(10540),C=n.n(g),b=n(41113),w=n.n(b),v=n(48906),f={};f.styleTagTransform=w(),f.setAttributes=m(),f.insert=p().bind(null,"head"),f.domAPI=u(),f.insertStyleElement=C();c()(v.A,f);v.A&&v.A.locals&&v.A.locals;const y=(0,n(14486).A)(s,(function(){var t=this,e=t._self._c;return t.richObject?e("div",{staticClass:"tables-table"},[e("div",{staticClass:"tables-table--image"},["table"===t.getType?e("IconTables",{attrs:{size:50}}):t._e(),t._v(" "),"view"===t.getType?e("IconView",{attrs:{size:50}}):t._e()],1),t._v(" "),e("div",{staticClass:"tables-table--info"},[e("div",{staticClass:"line"},[e("strong",[e("a",{attrs:{href:t.richObject.link,target:"_blank"}},[t._v("\n\t\t\t\t\t"+t._s(t.richObject.emoji+" "+t.richObject.title)+"\n\t\t\t\t")])])]),t._v(" "),e("div",{staticClass:"details"},[e("NcUserBubble",{attrs:{user:t.richObject.ownership,"display-name":t.richObject.ownerDisplayName}}),t._v(" \n\t\t\t"),e("NcCounterBubble",[t._v(t._s(t.n("tables","{nb} row","{nb} rows",t.richObject.rowsCount,{nb:t.richObject.rowsCount})))])],1)])]):t._e()}),[],!1,null,"ddc6748c",null).exports},83619:(t,e,n)=>{n.d(e,{A:()=>a});const a=n(13186).A},90428:(t,e,n)=>{n.d(e,{A:()=>a});const a=n(70579).A},97900:(t,e,n)=>{n.d(e,{A:()=>a});const a=n(10119).A},33983:(t,e,n)=>{n(20152)},81862:(t,e,n)=>{n(361)},27518:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},27514:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},79722:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},86886:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"}}]);
//# sourceMappingURL=tables-reference-table-lazy.js.map?v=c5c2ad9e239ae1d79e9e