"use strict";(self.webpackChunktables=self.webpackChunktables||[]).push([["src_store_data_js-src_store_store_js"],{7463:(e,t,a)=>{a.d(t,{FY:()=>n,Kn:()=>u,PJ:()=>r,R2:()=>d,cf:()=>l,ic:()=>o});var s=a(35115),i=a(26735);class r{type=null;constructor(e){this.createdAt=e.createdAt,this.createdBy=e.createdBy,this.id=e.id,this.lastEditAt=e.lastEditAt,this.lastEditBy=e.lastEditBy,this.mandatory=e.mandatory,this.tableId=e.tableId,this.title=e.title,this.description=e.description,this.createdByDisplayName=e.createdByDisplayName,this.lastEditByDisplayName=e.lastEditByDisplayName}canSort(){return"function"==typeof this.sort}getNextSortsResult(e,t,a){if(!e)return 0;for(const s of e){const e=s(t,a);if(0!==e)return e}return 0}getPossibleOperators(){return Object.values(s.Cu).filter((e=>e.goodFor.includes(this.type)))}getPossibleMagicFields(){return Object.values(i.T).filter((e=>e.goodFor.includes(this.type)))}isSearchStringFound(e,t,a){return!(null==e||!e.toLowerCase().includes(a))&&(t.searchStringFound=!0,!0)}isFilterFound(e,t){return!!e()&&(t.filterFound=!0,!0)}getValueString(e){return e.value}parseValue(e){return e}}class n extends r{constructor(e){super(e),this.usergroupDefault=e.usergroupDefault}default(){return this.usergroupDefault}}class l extends r{constructor(e){super(e),this.numberDefault=e.numberDefault}default(){return this.numberDefault}}class o extends r{constructor(e){super(e),this.datetimeDefault=e.datetimeDefault}formatValue(e){}default(){return this.datetimeDefault}}class u extends r{constructor(e){super(e),this.textDefault=e.textDefault}default(){return this.textDefault}}class d extends r{constructor(e){super(e),this.selectionDefault=e.selectionDefault}default(){return this.selectionDefault}}},92171:(e,t,a)=>{a.d(t,{q:()=>s});const s={TextLine:"text-line",TextLong:"text-long",TextRich:"text-rich",Selection:"selection",SelectionMulti:"selection-multi",Number:"number",SelectionCheck:"selection-check",TextLink:"text-link",NumberStars:"number-stars",NumberProgress:"number-progress",DatetimeDate:"datetime-date",DatetimeTime:"datetime-time",Datetime:"datetime",Usergroup:"usergroup"}},37900:(e,t,a)=>{a.d(t,{G:()=>g});var s=a(92171),i=a(1765),r=a(33721),n=a(47148),l=a(55149),o=a(56862),u=a(98488),d=a(72770),c=a(55604),h=a(28103),p=a(19609),m=a(95323),b=a(61861),w=a(97677),v=a(43776);function g(e){const t=e.type+(""===e.subtype?"":"-"+e.subtype);switch(t){case s.q.TextLine:return new p.A(e);case s.q.TextLink:return new m.A(e);case s.q.TextLong:return new b.A(e);case s.q.TextRich:return new w.A(e);case s.q.Number:return new l.A(e);case s.q.NumberStars:return new u.A(e);case s.q.NumberProgress:return new o.A(e);case s.q.Selection:return new c.A(e);case s.q.SelectionMulti:return new h.A(e);case s.q.SelectionCheck:return new d.A(e);case s.q.Datetime:return new r.A(e);case s.q.DatetimeDate:return new i.A(e);case s.q.DatetimeTime:return new n.A(e);case s.q.Usergroup:return new v.A(e);default:throw Error(t+" is not a valid column type!")}}},33721:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(7463),i=a(92171),r=a(51651),n=a(35115),l=a(93742);class o extends s.ic{constructor(e){super(e),this.type=i.q.Datetime}formatValue(e){return(0,r.A)(e,"YYYY-MM-DD HH:mm:ss").format("lll")}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{let i=e.data.find((e=>e.columnId===this.id))?.value||"",n=s.data.find((e=>e.columnId===this.id))?.value||"";if(this.id===l._y&&(i=e.createdAt,n=s.createdAt),this.id===l.t0&&(i=e.lastEditAt,n=s.lastEditAt),!i&&n)return-1*a;if(i&&!n)return 1*a;if(!i&&!n)return super.getNextSortsResult(t,e,s);const o=new r.A(i,"YYY-MM-DD HH:mm"),u=new r.A(n,"YYY-MM-DD HH:mm");return o.diff(u)*a||super.getNextSortsResult(t,e,s)}}isSearchStringFound(e,t){const a=new r.A(e.value,"YYYY-MM-DD HH:mm").format("lll");return super.isSearchStringFound(a,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s=new r.A(a,"YYY-MM-DD HH:mm"),i=new r.A(e.value,"YYY-MM-DD HH:mm"),l={[n.ju.IsEqual]:()=>s.isSame(i),[n.ju.IsGreaterThan]:()=>s.isBefore(i),[n.ju.IsGreaterThanOrEqual]:()=>s.isSameOrBefore(i),[n.ju.IsLowerThan]:()=>s.isAfter(i),[n.ju.IsLowerThanOrEqual]:()=>s.isSameOrAfter(i),[n.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(l,e)}}},1765:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(7463),i=a(92171),r=a(51651),n=a(35115);class l extends s.ic{constructor(e){super(e),this.type=i.q.DatetimeDate}formatValue(e){return(0,r.A)(e,"YYYY-MM-DD HH:mm:ss").format("ll")}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{const i=e.data.find((e=>e.columnId===this.id))?.value||"",n=new r.A(i),l=s.data.find((e=>e.columnId===this.id))?.value||"",o=new r.A(l);return!i&&l?-1*a:i&&!l?1*a:(i||l)&&n.diff(o)*a||super.getNextSortsResult(t,e,s)}}isSearchStringFound(e,t){const a=new r.A(e.value,"YYYY-MM-DD").format("ll");return super.isSearchStringFound(a,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s=new r.A(a),i=new r.A(e.value),l={[n.ju.IsEqual]:()=>s.isSame(i),[n.ju.IsGreaterThan]:()=>s.isBefore(i),[n.ju.IsGreaterThanOrEqual]:()=>s.isSameOrBefore(i),[n.ju.IsLowerThan]:()=>s.isAfter(i),[n.ju.IsLowerThanOrEqual]:()=>s.isSameOrAfter(i),[n.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(l,e)}}},47148:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(7463),i=a(92171),r=a(51651),n=a(35115);class l extends s.ic{constructor(e){super(e),this.type=i.q.DatetimeTime}formatValue(e){return(0,r.A)(e,"HH:mm:ss").format("LT")}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{const i=e.data.find((e=>e.columnId===this.id))?.value||"",n=new r.A(i,"HH:mm"),l=s.data.find((e=>e.columnId===this.id))?.value||"",o=new r.A(l,"HH:mm");return!i&&l?-1*a:i&&!l?1*a:(i||l)&&n.diff(o)*a||super.getNextSortsResult(t,e,s)}}isSearchStringFound(e,t){const a=new r.A(e.value,"YYYY-MM-DD HH:mm").format("lll");return super.isSearchStringFound(a,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s=new r.A(a,"HH:mm"),i=new r.A(e.value,"HH:mm"),l={[n.ju.IsEqual]:()=>s.isSame(i),[n.ju.IsGreaterThan]:()=>s.isBefore(i),[n.ju.IsGreaterThanOrEqual]:()=>s.isSameOrBefore(i),[n.ju.IsLowerThan]:()=>s.isAfter(i),[n.ju.IsLowerThanOrEqual]:()=>s.isSameOrAfter(i),[n.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(l,e)}}},55149:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(7463),i=a(92171),r=a(35115),n=a(93742);class l extends s.cf{constructor(e){super(e),this.type=i.q.Number,this.numberDecimals=e.numberDecimals,this.numberMax=e.numberMax,this.numberMin=e.numberMin,this.numberPrefix=e.numberPrefix,this.numberSuffix=e.numberSuffix}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{let i=e.data.find((e=>e.columnId===this.id))?.value||null,r=s.data.find((e=>e.columnId===this.id))?.value||null;return this.id===n.PF&&(i=e.id,r=s.id),!i&&r?-1*a:i&&!r?1*a:(i||r)&&(i<r?-1:i>r?1:0)*a||super.getNextSortsResult(t,e,s)}}isSearchStringFound(e,t){return super.isSearchStringFound(""+e.value,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s={[r.ju.IsEqual]:()=>parseInt(e.value)===parseInt(a),[r.ju.IsGreaterThan]:()=>parseInt(e.value)>parseInt(a),[r.ju.IsGreaterThanOrEqual]:()=>parseInt(e.value)>=parseInt(a),[r.ju.IsLowerThan]:()=>parseInt(e.value)<parseInt(a),[r.ju.IsLowerThanOrEqual]:()=>parseInt(e.value)<=parseInt(a),[r.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(s,e)}parseValue(e){return null===e?null:parseFloat(e)}}},56862:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.cf{constructor(e){super(e),this.type=i.q.NumberProgress}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{const i=e.data.find((e=>e.columnId===this.id))?.value||0,r=parseInt(i),n=s.data.find((e=>e.columnId===this.id))?.value||0,l=parseInt(n);return(r<l?-1:r>l?1:0)*a||super.getNextSortsResult(t,e,s)}}isSearchStringFound(e,t){return super.isSearchStringFound(""+e.value,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s={[r.ju.IsEqual]:()=>parseInt(e.value)===parseInt(a),[r.ju.IsGreaterThan]:()=>parseInt(e.value)>parseInt(a),[r.ju.IsGreaterThanOrEqual]:()=>parseInt(e.value)>=parseInt(a),[r.ju.IsLowerThan]:()=>parseInt(e.value)<parseInt(a),[r.ju.IsLowerThanOrEqual]:()=>parseInt(e.value)<=parseInt(a),[r.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(s,e)}parseValue(e){return parseInt(e)}}},98488:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.cf{constructor(e){super(e),this.type=i.q.NumberStars}sort(e,t){const a="DESC"===e?1:-1;return(e,s)=>{const i=e.data.find((e=>e.columnId===this.id))?.value,r=Number.isNaN(parseInt(i))?-1:parseInt(i),n=s.data.find((e=>e.columnId===this.id))?.value,l=Number.isNaN(parseInt(n))?-1:parseInt(n);return(r<l?-1:r>l?1:0)*a||super.getNextSortsResult(t,e,s)}}isSearchStringFound(e,t){return super.isSearchStringFound(""+e.value,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s={[r.ju.IsEqual]:()=>parseInt(e.value?e.value:0)===parseInt(a),[r.ju.IsGreaterThan]:()=>parseInt(e.value?e.value:0)>parseInt(a),[r.ju.IsGreaterThanOrEqual]:()=>parseInt(e.value?e.value:0)>=parseInt(a),[r.ju.IsLowerThan]:()=>parseInt(e.value?e.value:0)<parseInt(a),[r.ju.IsLowerThanOrEqual]:()=>parseInt(e.value?e.value:0)<=parseInt(a),[r.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(s,e)}}},55604:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.R2{constructor(e){super(e),this.type=i.q.Selection,this.selectionOptions=e.selectionOptions}getValueString(e){return e=e||this.value||null,this.getLabel(e.value)}getLabel(e){const t=this.selectionOptions?.findIndex((t=>t.id===e));return this.selectionOptions[t]?.label}isDeletedLabel(e){const t=this.selectionOptions?.findIndex((t=>t.id===e));return!!this.selectionOptions[t]?.deleted}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{const i=parseInt(e.data.find((e=>e.columnId===this.id))?.value),r=Number.isNaN(i)?"":this.selectionOptions.find((e=>e.id===i))?.label,n=this.removeEmoji(r).trim(),l=parseInt(s.data.find((e=>e.columnId===this.id))?.value??null),o=Number.isNaN(l)?"":this.selectionOptions.find((e=>e.id===l))?.label,u=this.removeEmoji(o).trim();return(n<u?-1:n>u?1:0)*a||super.getNextSortsResult(t,e,s)}}removeEmoji(e){return e.replace(/([#0-9]\u20E3)|[\xA9\xAE\u203C\u2047-\u2049\u2122\u2139\u3030\u303D\u3297\u3299][\uFE00-\uFEFF]?|[\u2190-\u21FF][\uFE00-\uFEFF]?|[\u2300-\u23FF][\uFE00-\uFEFF]?|[\u2460-\u24FF][\uFE00-\uFEFF]?|[\u25A0-\u25FF][\uFE00-\uFEFF]?|[\u2600-\u27BF][\uFE00-\uFEFF]?|[\u2900-\u297F][\uFE00-\uFEFF]?|[\u2B00-\u2BF0][\uFE00-\uFEFF]?|(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])[\uFE00-\uFEFF]?/g,"")}isSearchStringFound(e,t){return super.isSearchStringFound(this.getLabel(e.value),e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s=this.getLabel(e.value),i={[r.ju.Contains]:()=>s?.includes(a),[r.ju.BeginsWith]:()=>s?.startsWith(a),[r.ju.EndsWith]:()=>s?.endsWith(a),[r.ju.IsEqual]:()=>s===a,[r.ju.IsEmpty]:()=>!s}[t.operator.id];return super.isFilterFound(i,e)}parseValue(e){return parseInt(e)}}},72770:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.R2{constructor(e){super(e),this.type=i.q.SelectionCheck}sort(e,t){const a="DESC"===e?1:-1;return(e,s)=>{const i=e.data.find((e=>e.columnId===this.id))?.value||"",r=!0===i||"true"===i,n=s.data.find((e=>e.columnId===this.id))?.value||"";return(r-(!0===n||"true"===n))*a||super.getNextSortsResult(t,e,s)}}isSearchStringFound(e,t){return!1}isFilterFound(e,t){const a=""+t.magicValuesEnriched?t.magicValuesEnriched:t.value,s={[r.ju.IsEqual]:()=>"true"===e.value&&"yes"===a||"false"===e.value&&"no"===a,[r.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(s,e)}}},28103:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.R2{constructor(e){super(e),this.type=i.q.SelectionMulti,this.selectionOptions=e.selectionOptions}default(){return this.selectionDefault?JSON.parse(this.selectionDefault):[]}getValueString(e){e=e||this.value||null;const t=this.getObjects(e.value);let a="";return t?.forEach((e=>{""===a?a=e.label:a+=", "+e.label})),a}getDefaultObjects(){return this.getObjects(this.default())}getObjects(e){const t=[];return e?.forEach((e=>{t.push(this.getOptionObject(parseInt(e)))})),t}getOptionObject(e){const t=this.selectionOptions?.findIndex((t=>t.id===e));if(void 0!==t)return this.selectionOptions[t]||null}isSearchStringFound(e,t){return super.isSearchStringFound(this.getValueString(e),e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s=this.getValueString(e),i={[r.ju.Contains]:()=>s?.includes(a),[r.ju.IsEqual]:()=>s===a,[r.ju.IsEmpty]:()=>!s}[t.operator.id];return super.isFilterFound(i,e)}}},19609:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(7463),i=a(92171),r=a(35115),n=a(93742);class l extends s.Kn{constructor(e){super(e),this.type=i.q.TextLine,this.textMaxLength=e.textMaxLength}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{let i=e.data.find((e=>e.columnId===this.id))?.value?.toLowerCase()||"",r=s.data.find((e=>e.columnId===this.id))?.value?.toLowerCase()||"";return this.id===n.ay&&(i=e.createdBy?.toLowerCase()||"",r=s.createdBy?.toLowerCase()||""),this.id===n.PB&&(i=e.lastEditBy?.toLowerCase()||"",r=s.lastEditBy?.toLowerCase()||""),i.localeCompare(r,void 0)*a||super.getNextSortsResult(t,e,s)}}getValueString(e){return e.value.replace(/(<([^>]+)>)/gi,"")}isSearchStringFound(e,t){return super.isSearchStringFound(e.value,e,t)}isFilterFound(e,t){const a=(t.magicValuesEnriched?t.magicValuesEnriched:t.value).toLowerCase(),s=e.value?.toLowerCase();if(!s&t.operator.id!==r.ju.IsEmpty)return!1;const i={[r.ju.Contains]:()=>s.includes(a),[r.ju.BeginsWith]:()=>s.startsWith(a),[r.ju.EndsWith]:()=>s.endsWith(a),[r.ju.IsEqual]:()=>s===a,[r.ju.IsEmpty]:()=>!s}[t.operator.id];return super.isFilterFound(i,e)}}},95323:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.Kn{constructor(e){super(e),this.type=i.q.TextLink,this.textAllowedPattern=e.textAllowedPattern}sort(e,t){const a="DESC"===e?-1:1;return(e,s)=>{const i=e.data.find((e=>e.columnId===this.id))?.value?.toLowerCase()||"",r=this.getValueFromCellValue(i),n=s.data.find((e=>e.columnId===this.id))?.value?.toLowerCase()||"",l=this.getValueFromCellValue(n);return r.localeCompare(l,void 0)*a||super.getNextSortsResult(t,e,s)}}getValueFromCellValue(e){try{const t=JSON.parse(e);return t?.title||""}catch(t){return e}}getValueString(e){try{const t=JSON.parse(e.value),a=t?.resourceUrl?" ("+t?.resourceUrl+")":"";return t?.title+a||""}catch(t){return e.value}}isSearchStringFound(e,t){return super.isSearchStringFound(e.value,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s=this.getValueFromCellValue(e.value),i={[r.ju.Contains]:()=>s.includes(a),[r.ju.BeginsWith]:()=>s.startsWith(a),[r.ju.EndsWith]:()=>s.endsWith(a),[r.ju.IsEqual]:()=>s===a,[r.ju.IsEmpty]:()=>!s}[t.operator.id];return super.isFilterFound(i,e)}}},61861:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.Kn{constructor(e){super(e),this.type=i.q.TextLong}getValueString(e){return e.value.replace(/(<([^>]+)>)/gi,"")}isSearchStringFound(e,t){return super.isSearchStringFound(e.value,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s={[r.ju.Contains]:()=>e.value.includes(a),[r.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(s,e)}}},97677:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(7463),i=a(92171),r=a(35115);class n extends s.Kn{constructor(e){super(e),this.type=i.q.TextRich}isSearchStringFound(e,t){return super.isSearchStringFound(e.value,e,t)}isFilterFound(e,t){const a=t.magicValuesEnriched?t.magicValuesEnriched:t.value,s={[r.ju.Contains]:()=>e.value&&e.value.includes(a),[r.ju.IsEmpty]:()=>!e.value}[t.operator.id];return super.isFilterFound(s,e)}}},43776:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(7463),i=a(92171);class r extends s.FY{constructor(e){super(e),this.type=i.q.Usergroup,this.showUserStatus=e.showUserStatus,this.usergroupMultipleItems=e.usergroupMultipleItems,this.usergroupSelectUsers=e.usergroupSelectUsers,this.usergroupSelectGroups=e.usergroupSelectGroups,this.usergroupSelectTeams=e.usergroupSelectTeams}getValueString(e){e=e||this.value||null;const t=this.getObjects(e.value);let a="";return t?.forEach((e=>{""===a?a=e.id:a+=", "+e.id})),a}getObjects(e){const t=[];return e?.forEach((e=>{t.push(e)})),t}isSearchStringFound(e,t){return super.isSearchStringFound(this.getValueString(e),e,t)}}},35115:(e,t,a)=>{a.d(t,{Cu:()=>u,dJ:()=>n,ju:()=>o,uA:()=>l});var s=a(92171),i=a(53334);class r{constructor(){this.icon="icon-add",this.source="operators",this.subline=(0,i.Tl)("tables","Filter operator")}}class n extends r{constructor(){let{id:e,label:t,goodFor:a,incompatibleWith:s,shortLabel:i=null,noSearchValue:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.id=e,this.label=t,this.shortLabel=i,this.goodFor=a,this.incompatibleWith=s,this.noSearchValue=r}getOperatorLabel(){return this.shortLabel??this.label}}function l(e){return Object.values(u).find((t=>t.id===e))}const o={Contains:"contains",BeginsWith:"begins-with",EndsWith:"ends-with",IsEqual:"is-equal",IsGreaterThan:"is-greater-than",IsGreaterThanOrEqual:"is-greater-than-or-equal",IsLowerThan:"is-lower-than",IsLowerThanOrEqual:"is-lower-than-or-equal",IsEmpty:"is-empty"},u={Contains:new n({id:o.Contains,label:(0,i.Tl)("tables","Contains"),goodFor:[s.q.TextLine,s.q.TextLong,s.q.TextLink,s.q.TextRich,s.q.SelectionMulti,s.q.Usergroup],incompatibleWith:[o.IsEmpty,o.IsEqual]}),BeginsWith:new n({id:o.BeginsWith,label:(0,i.Tl)("tables","Begins with"),goodFor:[s.q.TextLine,s.q.TextLink],incompatibleWith:[o.IsEmpty,o.IsEqual,o.BeginsWith]}),EndsWith:new n({id:o.EndsWith,label:(0,i.Tl)("tables","Ends with"),goodFor:[s.q.TextLine,s.q.TextLink],incompatibleWith:[o.IsEmpty,o.IsEqual,o.EndsWith]}),IsEqual:new n({id:o.IsEqual,label:(0,i.Tl)("tables","Is equal"),shortLabel:"=",goodFor:[s.q.TextLine,s.q.Number,s.q.SelectionCheck,s.q.TextLink,s.q.NumberStars,s.q.NumberProgress,s.q.DatetimeDate,s.q.DatetimeTime,s.q.Datetime,s.q.Selection,s.q.SelectionMulti,s.q.Usergroup],incompatibleWith:[o.IsEmpty,o.IsEqual,o.BeginsWith,o.EndsWith,o.Contains,o.IsGreaterThan,o.IsGreaterThanOrEqual,o.IsLowerThan,o.IsLowerThanOrEqual]}),IsGreaterThan:new n({id:o.IsGreaterThan,label:(0,i.Tl)("tables","Is greater than"),shortLabel:">",goodFor:[s.q.Number,s.q.NumberStars,s.q.NumberProgress,s.q.DatetimeDate,s.q.DatetimeTime,s.q.Datetime],incompatibleWith:[o.IsEmpty,o.IsEqual,o.IsGreaterThan,o.IsGreaterThanOrEqual]}),IsGreaterThanOrEqual:new n({id:o.IsGreaterThanOrEqual,label:(0,i.Tl)("tables","Is greater than or equal"),shortLabel:">=",goodFor:[s.q.Number,s.q.NumberStars,s.q.NumberProgress,s.q.DatetimeDate,s.q.DatetimeTime,s.q.Datetime],incompatibleWith:[o.IsEmpty,o.IsEqual,o.IsGreaterThan,o.IsGreaterThanOrEqual]}),IsLowerThan:new n({id:o.IsLowerThan,label:(0,i.Tl)("tables","Is lower than"),shortLabel:"<",goodFor:[s.q.Number,s.q.NumberStars,s.q.NumberProgress,s.q.DatetimeDate,s.q.DatetimeTime,s.q.Datetime],incompatibleWith:[o.IsEmpty,o.IsEqual,o.IsLowerThan,o.IsLowerThanOrEqual]}),IsLowerThanOrEqual:new n({id:o.IsLowerThanOrEqual,label:(0,i.Tl)("tables","Is lower than or equal"),shortLabel:"<=",goodFor:[s.q.Number,s.q.NumberStars,s.q.NumberProgress,s.q.DatetimeDate,s.q.DatetimeTime,s.q.Datetime],incompatibleWith:[o.IsEmpty,o.IsEqual,o.IsLowerThan,o.IsLowerThanOrEqual]}),IsEmpty:new n({id:o.IsEmpty,label:(0,i.Tl)("tables","Is empty"),goodFor:[s.q.TextLine,s.q.TextRich,s.q.Number,s.q.TextLink,s.q.NumberProgress,s.q.DatetimeDate,s.q.DatetimeTime,s.q.Datetime,s.q.SelectionCheck,s.q.Usergroup],incompatibleWith:[o.Contains,o.BeginsWith,o.EndsWith,o.IsEqual,o.IsGreaterThan,o.IsGreaterThanOrEqual,o.IsLowerThan,o.IsLowerThanOrEqual,o.IsEmpty],noSearchValue:!0})}},26735:(e,t,a)=>{a.d(t,{T:()=>u});var s=a(21777),i=a(51651),r=a(92171),n=a(53334);class l{constructor(){this.source="magic-fields",this.subline=(0,n.Tl)("tables","Magic field")}}class o extends l{constructor(){let{id:e,label:t,icon:a,goodFor:s,replace:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.id=e,this.label=t,this.icon=a,this.goodFor=s,this.replace=i}}const u={Me:new o({id:"me",label:(0,n.Tl)("tables","Me (user ID)"),icon:"icon-user",goodFor:[r.q.TextLine,r.q.Selection,r.q.SelectionMulti,r.q.TextRich,r.q.TextLink],replace:(0,s.HW)()?.uid}),MyName:new o({id:"my-name",label:(0,n.Tl)("tables","Me (name)"),icon:"icon-user",goodFor:[r.q.TextLine,r.q.Selection,r.q.SelectionMulti,r.q.TextRich,r.q.TextLink],replace:(0,s.HW)()?.displayName}),Checked:new o({id:"checked",label:(0,n.Tl)("tables","Checked"),icon:"icon-checkmark",goodFor:[r.q.SelectionCheck],replace:"yes"}),Unchecked:new o({id:"unchecked",label:(0,n.Tl)("tables","Unchecked"),icon:"icon-close",goodFor:[r.q.SelectionCheck],replace:"no"}),Stars0:new o({id:"stars-0",label:"☆☆☆☆☆",icon:"icon-star",goodFor:[r.q.NumberStars],replace:"0"}),Stars1:new o({id:"stars-1",label:"★☆☆☆☆",icon:"icon-star",goodFor:[r.q.NumberStars],replace:"1"}),Stars2:new o({id:"stars-2",label:"★★☆☆☆",icon:"icon-star",goodFor:[r.q.NumberStars],replace:"2"}),Stars3:new o({id:"stars-3",label:"★★★☆☆",icon:"icon-star",goodFor:[r.q.NumberStars],replace:"3"}),Stars4:new o({id:"stars-4",label:"★★★★☆",icon:"icon-star",goodFor:[r.q.NumberStars],replace:"4"}),Stars5:new o({id:"stars-5",label:"★★★★★",icon:"icon-star",goodFor:[r.q.NumberStars],replace:"5"}),DatetimeDateToday:new o({id:"datetime-date-today",label:(0,n.Tl)("tables","Today"),icon:"icon-calendar-dark",goodFor:[r.q.DatetimeDate,r.q.Datetime],replace:(new i.A).format("YYYY-MM-DD")}),DatetimeDateStartOfYear:new o({id:"datetime-date-start-of-year",label:(0,n.Tl)("tables","Start of the year"),icon:"icon-history",goodFor:[r.q.DatetimeDate],replace:(new i.A).startOf("year").format("YYYY-MM-DD")}),DatetimeDateStartOfMonth:new o({id:"datetime-date-start-of-month",label:(0,n.Tl)("tables","Start of the month"),icon:"icon-history",goodFor:[r.q.DatetimeDate],replace:(new i.A).startOf("month").format("YYYY-MM-DD")}),DatetimeDateStartOfWeek:new o({id:"datetime-date-start-of-week",label:(0,n.Tl)("tables","Start of the week"),icon:"icon-history",goodFor:[r.q.DatetimeDate],replace:(new i.A).startOf("week").format("YYYY-MM-DD")}),DatetimeTimeNow:new o({id:"datetime-time-now",label:(0,n.Tl)("tables","Now"),icon:"icon-calendar-dark",goodFor:[r.q.DatetimeTime],replace:(new i.A).format("HH:mm")}),DatetimeNow:new o({id:"datetime-now",label:(0,n.Tl)("tables","Now"),icon:"icon-calendar-dark",goodFor:[r.q.Datetime],replace:(new i.A).format("YYYY-MM-DD HH:mm")})}},95197:(e,t,a)=>{a.d(t,{F:()=>o});var s=a(33721),i=a(55149),r=a(19609),n=a(53334),l=a(93742);const o=[new i.A({id:l.PF,title:(0,n.Tl)("tables","ID")}),new r.A({id:l.ay,title:(0,n.Tl)("tables","Creator")}),new r.A({id:l.PB,title:(0,n.Tl)("tables","Last editor")}),new s.A({id:l._y,title:(0,n.Tl)("tables","Created at")}),new s.A({id:l.t0,title:(0,n.Tl)("tables","Last edited at")})]},88413:(e,a,s)=>{s.d(a,{A:()=>n});var i=s(85168);function r(e,a,s){console.error("Axios error",e),(0,i.Qg)(a+" "+function(e){return 401===e?t("tables","Request is not authorized. Are you logged in?"):403===e?t("tables","Request not allowed."):404===e?t("tables","Resource not found."):t("tables","Unknown error.")}(s))}function n(e,t){const a=e?.response?.status||null;a?r(e,t,a):function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.error("Error occurred: "+(t??""),e?.message),(0,i.Qg)(t)}(e,t)}},9795:(e,a,s)=>{s.d(a,{D:()=>p});var i=s(70715),r=s(65899),n=s(63814),l=s(88413),o=s(37900),u=s(95197),d=s(85168),c=s(85471);function h(e,t){return t=t.toString(),e?"view-"+t:t}const p=(0,r.nY)("data",{state:()=>({loading:{},rows:{},columns:{}}),getters:{getColumns:e=>(t,a)=>{const s=h(t,a);return e.columns[s]??[]},getRows:e=>(t,a)=>{const s=h(t,a);return e.rows[s]??[]}},actions:{clearState(){this.loading={},this.columns={},this.rows={}},async getColumnsFromBE(e){let{tableId:a,viewId:s}=e;const r=h(!!s,s??a);this.loading[r]=!0;let u=null;try{if(a&&s?u=await i.Ay.get((0,n.Jv)("/apps/tables/api/1/tables/"+a+"/columns")+"?viewId="+s):a&&!s?u=await i.Ay.get((0,n.Jv)("/apps/tables/api/1/tables/"+a+"/columns")):!a&&s&&(u=await i.Ay.get((0,n.Jv)("/apps/tables/api/1/views/"+s+"/columns"))),!Array.isArray(u.data)){const e=new Error("Expected array, but is not");return(0,l.A)(e,"Format for loaded columns not valid."),!1}}catch(e){return(0,l.A)(e,t("tables","Could not load columns.")),!1}const d=u.data.map((e=>(0,o.G)(e)));return this.loading[r]=!1,d},async loadColumnsFromBE(e){let{view:t,tableId:a}=e,s=await this.getColumnsFromBE({tableId:a,viewId:t?.id});t&&(s=s.concat(u.F.filter((e=>t.columns.includes(e.id)))),s=s.sort(((e,a)=>t.columns.indexOf(e.id)-t.columns.indexOf(a.id))));const i=h(!!t?.id,t?.id??a);return(0,c.hZ)(this.columns,i,s),!0},async insertNewColumn(e){let{isView:a,elementId:s,data:r}=e;const u=h(a,s);this.loading[u]=!0;let d=null;try{d=await i.Ay.post((0,n.Jv)("/apps/tables/api/1/columns"),r)}catch(e){return(0,l.A)(e,t("tables","Could not insert column.")),!1}return u&&(this.columns[u].push((0,o.G)(d.data)),this.loading[u]=!1),!0},async updateColumn(e){let{id:a,isView:s,elementId:r,data:u}=e;u.selectionOptions=JSON.stringify(u.selectionOptions),u.usergroupDefault=JSON.stringify(u.usergroupDefault);let d=null;try{d=await i.Ay.put((0,n.Jv)("/apps/tables/api/1/columns/"+a),u)}catch(e){return(0,l.A)(e,t("tables","Could not update column.")),!1}const p=h(s,r);if(p&&this.columns[p]){const e=d.data,t=this.columns[p].findIndex((t=>t.id===e.id));(0,c.hZ)(this.columns[p],t,(0,o.G)(e))}return!0},async removeColumn(e){let{id:a,isView:s,elementId:r}=e;try{await i.Ay.delete((0,n.Jv)("/apps/tables/api/1/columns/"+a))}catch(e){return(0,l.A)(e,t("tables","Could not remove column.")),!1}const o=h(s,r);if(o&&this.columns[o]){const e=this.columns[o].filter((e=>e.id!==a));(0,c.hZ)(this.columns,o,e)}return!0},async loadRowsFromBE(e){let{tableId:a,viewId:s}=e;const r=h(!!s,s??a);this.loading[r]=!0;let o=null;try{o=s?await i.Ay.get((0,n.Jv)("/apps/tables/row/view/"+s)):await i.Ay.get((0,n.Jv)("/apps/tables/row/table/"+a))}catch(e){return(0,l.A)(e,t("tables","Could not load rows.")),!1}return(0,c.hZ)(this.rows,r,o.data),this.loading[r]=!1,!0},removeRows(e){let{isView:t,elementId:a}=e;const s=h(t,a);(0,c.hZ)(this.rows,s,[])},async updateRow(e){let{id:a,isView:s,elementId:r,data:o}=e,u=null;const p=s?r:null;try{u=await i.Ay.put((0,n.Jv)("/apps/tables/row/"+a),{viewId:p,data:o})}catch(e){return console.debug(e?.response),e?.response?.data?.message?.startsWith("User should not be able to access row")?((0,d.Qg)(t("tables","Outdated data. View is reloaded")),await this.loadRowsFromBE({viewId:p})):(0,l.A)(e,t("tables","Could not update row.")),!1}const m=h(s,r);if(m&&this.rows[m]){const e=u.data,t=this.rows[m].findIndex((t=>t.id===e.id));(0,c.hZ)(this.rows[m],t,e)}return!0},async insertNewRow(e){let{viewId:a,tableId:s,data:r}=e,o=null;try{const e=null==a?"tables":"views",t=null==a?s:a;o=await i.Ay.post((0,n.KT)("/apps/tables/api/2/"+e+"/"+t+"/rows"),{data:r})}catch(e){return(0,l.A)(e,t("tables","Could not insert row.")),!1}const u=h(!!a,a??s);if(u&&this.rows[u]){const e=o?.data?.ocs?.data,t=this.rows[u].length;(0,c.hZ)(this.rows[u],t,e)}return!0},async removeRow(e){let{rowId:a,isView:s,elementId:r}=e;const o=s?r:null;try{o?await i.Ay.delete((0,n.Jv)("/apps/tables/view/"+o+"/row/"+a)):await i.Ay.delete((0,n.Jv)("/apps/tables/row/"+a))}catch(e){return e?.response?.data?.message?.startsWith("User should not be able to access row")?((0,d.Qg)(t("tables","Outdated data. View is reloaded")),await this.loadRowsFromBE({viewId:o})):(0,l.A)(e,t("tables","Could not remove row.")),!1}const u=h(s,r);if(u&&this.rows[u]){const e=this.rows[u].filter((e=>e.id!==a));(0,c.hZ)(this.rows,u,e)}return!0}}})},88166:(e,a,s)=>{s.d(a,{I:()=>h});var i=s(65899),r=s(70715),n=s(63814),l=s(85168),o=s(88413),u=s(93742),d=s(21777),c=s(85471);const h=(0,i.nY)("store",{state:()=>({loading:{tables:!0,viewsShared:!0,contexts:!0},tables:[],views:[],templates:[],contexts:[],activeViewId:null,activeTableId:null,activeRowId:null,activeElementIsView:!1,activeContextId:null,appNavCollapsed:!1}),getters:{getTable:e=>t=>e.tables.find((e=>e.id===t)),getContext:e=>t=>e.contexts.find((e=>e.id===t)),getView:e=>t=>e.views.find((e=>e.id===t)),activeView:e=>e.views&&e.activeViewId?e.views.find((t=>t.id===e.activeViewId)):null,activeTable:e=>e.tables&&e.activeTableId?e.tables.find((t=>t.id===e.activeTableId)):null,activeElement:e=>e.activeTableId&&e.tables?e.tables.find((t=>t.id===e.activeTableId)):e.views&&e.activeViewId?e.views.find((t=>t.id===e.activeViewId)):null,activeContext:e=>e.contexts&&e.activeContextId?e.contexts.find((t=>t.id===e.activeContextId)):null,isView:e=>e.activeElementIsView,isLoading:e=>t=>e.loading[t]??!1,isLoadingSomething:e=>Object.keys(e.loading).filter((t=>e.loading[t])).length>0},actions:{setAppNavCollapsed(e){this.appNavCollapsed=!!e},setLoading(e){let{key:t,value:a}=e;this.loading[t]=!!a},setActiveViewId(e){this.activeViewId!==e&&(this.activeViewId=e,this.activeTableId=null,this.activeElementIsView=!0)},setActiveTableId(e){this.activeTableId!==e&&(this.activeTableId=e,this.activeViewId=null,this.activeElementIsView=!1)},setActiveContextId(e){this.activeContextId!==e&&(this.activeContextId=parseInt(e))},setTables(e){this.tables=e},setViews(e){this.views=e},setTemplates(e){this.templates=e},setContexts(e){this.contexts=e},setTable(e){const t=this.tables.findIndex((t=>t.id===e.id));this.tables.splice(t,1,e)},setView(e){const t=this.views.findIndex((t=>t.id===e.id));this.views[t]=e},setContext(e){const t=this.contexts.findIndex((t=>t.id===e.id));this.contexts[t]=e},setActiveRowId(e){this.activeRowId=e},async insertNewTable(e){let{data:a}=e,s=null;try{s=(await r.Ay.post((0,n.KT)("/apps/tables/api/2/tables"),a)).data.ocs}catch(e){return(0,o.A)(e,t("tables","Could not insert table.")),!1}const i=this.tables;return i.push(s.data),this.setTables(i),s.data},async loadTablesFromBE(){this.setLoading({key:"tables",value:!0});try{const e=await r.Ay.get((0,n.Jv)("/apps/tables/table"));this.setTables(e.data),this.views=[],e.data.forEach((e=>{e.views&&(this.views=this.views.concat(e.views))}))}catch(e){(0,o.A)(e,t("tables","Could not load tables.")),(0,l.Qg)(t("tables","Could not fetch tables"))}return this.setLoading({key:"tables",value:!1}),!0},async loadViewsSharedWithMeFromBE(){this.setLoading({key:"viewsShared",value:!0});try{(await r.Ay.get((0,n.Jv)("/apps/tables/view"))).data.forEach((e=>{0===this.views.filter((t=>t.id===e.id)).length&&this.views.push(e)}))}catch(e){(0,o.A)(e,t("tables","Could not load shared views.")),(0,l.Qg)(t("tables","Could not load shared views"))}return this.setLoading({key:"viewsShared",value:!1}),!0},async loadTemplatesFromBE(){try{const e=await r.Ay.get((0,n.Jv)("/apps/tables/table/templates"));this.templates=e.data}catch(e){(0,o.A)(e,t("tables","Could not load templates.")),(0,l.Qg)(t("tables","Could not fetch templates"))}},async insertNewView(e){let{data:a}=e,s=null;try{s=await r.Ay.post((0,n.Jv)("/apps/tables/view"),a)}catch(e){return(0,o.A)(e,t("tables","Could not insert view.")),!1}const i=this.views;i.push(s.data),this.setViews(i);return this.tables.find((e=>e.id===s.data.tableId)).views.push(s.data),s.data.id},async updateView(e){let{id:a,data:s}=e,i=null;try{i=await r.Ay.put((0,n.Jv)("/apps/tables/view/"+a),s)}catch(e){return(0,o.A)(e,t("tables","Could not update view.")),!1}const l=i.data,u=this.views,d=u.findIndex((e=>e.id===l.id));return u[d]=l,this.setViews([...u]),!0},async removeView(e){let{viewId:a}=e;try{await r.Ay.delete((0,n.Jv)("/apps/tables/view/"+a))}catch(e){return(0,o.A)(e,t("tables","Could not remove view.")),!1}const s=this.views,i=s.findIndex((e=>e.id===a));return s.splice(i,1),this.setViews([...s]),!0},async reloadViewsOfTable(e){let{tableId:a}=e,s=null;try{s=await r.Ay.get((0,n.Jv)("/apps/tables/view/table/"+a));const e=this.views;s.data.forEach((t=>{const a=e.findIndex((e=>e.id===t.id));(0,c.hZ)(this.views,a,t)}))}catch(e){return(0,o.A)(e,t("tables","Could not reload view.")),!1}return!0},async updateTable(e){let{id:a,data:s}=e,i=null;try{i=(await r.Ay.put((0,n.KT)("/apps/tables/api/2/tables/"+a),s)).data.ocs}catch(e){return(0,o.A)(e,t("tables","Could not update table.")),!1}const l=i.data,u=this.tables.findIndex((e=>e.id===l.id));return(0,c.hZ)(this.tables,u,l),!0},async favoriteView(e){let{id:a}=e;try{await r.Ay.post((0,n.KT)(`/apps/tables/api/2/favorites/${u.oY}/${a}`))}catch(e){return(0,o.A)(e,t("tables","Could not favorite view")),!1}const s=this.views.findIndex((e=>e.id===a)),i=this.views[s];return i.favorite=!0,this.setView(i),!0},async removeFavoriteView(e){let{id:a}=e;try{await r.Ay.delete((0,n.KT)(`/apps/tables/api/2/favorites/${u.oY}/${a}`))}catch(e){return(0,o.A)(e,t("tables","Could not remove view from favorites")),!1}const s=this.views.findIndex((e=>e.id===a)),i=this.views[s];return i.favorite=!1,this.setView(i),!0},async favoriteTable(e){let{id:a}=e;try{await r.Ay.post((0,n.KT)(`/apps/tables/api/2/favorites/${u.HH}/${a}`))}catch(e){return(0,o.A)(e,t("tables","Could not favorite table")),!1}const s=this.tables.findIndex((e=>e.id===a)),i=this.tables[s];return i.favorite=!0,this.setTable(i),!0},async removeFavoriteTable(e){let{id:a}=e;try{await r.Ay.delete((0,n.KT)(`/apps/tables/api/2/favorites/${u.HH}/${a}`))}catch(e){return(0,o.A)(e,t("tables","Could not remove table from favorites")),!1}const s=this.tables.findIndex((e=>e.id===a)),i=this.tables[s];return i.favorite=!1,this.setTable(i),!0},async shareContext(e){let{id:a,previousReceivers:s,receivers:i,displayMode:l}=e;const u={nodeType:"context",nodeId:a,displayMode:l};try{for(const e of i){u.receiverType=e.isUser?"user":"group",u.receiver=e.id;if(!s.find((e=>e.receiver===u.receiver&&e.receiver_type===u.receiverType))){const t=await r.Ay.post((0,n.Jv)("/apps/tables/share"),u);if(t?.data&&t?.data?.id){const a=t.data.id;await this.updateDisplayMode({shareId:a,displayMode:l,target:"default"}),e.id===(0,d.HW)().uid&&await this.updateDisplayMode({shareId:a,displayMode:l,target:"self"})}}}}catch(e){(0,o.A)(e,t("tables","Could not add application share."))}try{for(const e of s){if(i.find((t=>{const a=t.isUser?"user":"group";return t.id===e.receiver&&a===e.receiver_type}))){const t=e.share_id;await this.updateDisplayMode({shareId:t,displayMode:l,target:"default"})}else await r.Ay.delete((0,n.Jv)("/apps/tables/share/"+e.share_id))}}catch(e){(0,o.A)(e,t("tables","Could not remove application share."))}},async updateDisplayMode(e){let{shareId:a,displayMode:s,target:i}=e;try{await r.Ay.put((0,n.Jv)("/apps/tables/share/"+a+"/display-mode"),{displayMode:s,target:i})}catch(e){(0,o.A)(e,t("tables","Could not update display mode."))}},async insertNewContext(e){let{data:a,receivers:s,displayMode:i}=e;this.setLoading({key:"contexts",value:!0});let l=null;try{l=await r.Ay.post((0,n.KT)("/apps/tables/api/2/contexts"),a);const e=l?.data?.ocs?.data?.id;e&&await this.shareContext({id:e,previousReceivers:[],receivers:s,displayMode:i})}catch(e){return(0,o.A)(e,t("tables","Could not insert application.")),!1}const u=this.contexts;return u.push(l.data.ocs.data),this.setContexts(u),this.setLoading({key:"contexts",value:!1}),l.data.ocs.data},async updateContext(e){let{id:a,data:s,previousReceivers:i,receivers:l,displayMode:u}=e,d=null;try{d=await r.Ay.put((0,n.KT)("/apps/tables/api/2/contexts/"+a),s),await this.shareContext({id:a,previousReceivers:i,receivers:l,displayMode:u})}catch(e){return(0,o.A)(e,t("tables","Could not update application.")),!1}const h=d.data.ocs.data,p=this.contexts.findIndex((e=>e.id===h.id));return(0,c.hZ)(this.contexts,p,h),!0},async transferTable(e){let{id:a,data:s}=e;try{await r.Ay.put((0,n.KT)("/apps/tables/api/2/tables/"+a+"/transfer"),s)}catch(e){return(0,o.A)(e,t("tables","Could not transfer table.")),!1}const i=this.tables,l=i.findIndex((e=>e.id===a));return i.splice(l,1),this.setTables([...i]),!0},async getAllContexts(){this.setLoading({key:"contexts",value:!0});try{const e=await r.Ay.get((0,n.KT)("/apps/tables/api/2/contexts"));this.contexts=e.data.ocs.data,await this.getContextsTablesAndViews()}catch(e){(0,o.A)(e,t("tables","Could not load applications.")),(0,l.Qg)(t("tables","Could not fetch applications"))}return this.setLoading({key:"contexts",value:!1}),!0},async loadContext(e){let{id:a}=e;try{const e=await r.Ay.get((0,n.KT)("/apps/tables/api/2/contexts/"+a));this.setContext(e.data.ocs.data)}catch(e){(0,o.A)(e,t("tables","Could not load application.")),(0,l.Qg)(t("tables","Could not fetch application"))}return!0},async getContextsTablesAndViews(){for(const e of this.contexts)for(const t of Object.values(e?.nodes))parseInt(t.node_type)===u.HH?await this.loadContextTable({id:t.node_id}):parseInt(t.node_type)===u.oY&&await this.loadContextView({id:t.node_id})},async loadContextTable(e){let{id:a}=e;if(this.tables.find((e=>e.id===a)))return!0;let s;try{s=await r.Ay.get((0,n.KT)("/apps/tables/api/2/tables/"+a));const e=this.tables;e.push(s.data.ocs.data),this.setTables([...e])}catch(e){(0,o.A)(e,t("tables","Could not load table.")),(0,l.Qg)(t("tables","Could not fetch table"))}return s?.data.ocs.data},async loadContextView(e){let{id:a}=e;if(this.views.find((e=>e.id===a)))return!0;let s;try{s=await r.Ay.get((0,n.Jv)("/apps/tables/view/"+a));const e=this.views;e.push(s.data),this.setViews([...e])}catch(e){(0,o.A)(e,t("tables","Could not load view")),(0,l.Qg)(t("tables","Could not fetch view"))}return s?.data},async transferContext(e){let{id:a,data:s}=e;try{await r.Ay.put((0,n.KT)("/apps/tables/api/2/contexts/"+a+"/transfer"),s)}catch(e){return(0,o.A)(e,t("tables","Could not transfer application.")),!1}const i=this.contexts,l=i.findIndex((e=>e.id===a));return i.splice(l,1),this.setContexts([...i]),!0},async removeContext(e){let{context:a}=e;try{await r.Ay.delete((0,n.KT)("/apps/tables/api/2/contexts/"+a.id))}catch(e){return(0,o.A)(e,t("tables","Could not remove application.")),!1}const s=this.contexts,i=s.findIndex((e=>e.id===a.id));return s.splice(i,1),this.setContexts([...s]),!0},async removeTable(e){let{tableId:a}=e;try{await r.Ay.delete((0,n.Jv)("/apps/tables/table/"+a))}catch(e){return(0,o.A)(e,t("tables","Could not remove table.")),!1}const s=this.tables,i=s.findIndex((e=>e.id===a));return s.splice(i,1),this.setTables([...s]),!0},setTableHasShares(e){let{tableId:t,hasShares:a}=e;const s=this.tables.find((e=>e.id===t));s&&(s.hasShares=!!a)},setViewHasShares(e){let{viewId:t,hasShares:a}=e;const s=this.views.find((e=>e.id===t));s&&(s.hasShares=!!a)}}})}}]);
//# sourceMappingURL=tables-src_store_data_js-src_store_store_js.js.map?v=b60bd7c8b57d103f2853