/*! third party licenses: js/vendor.LICENSE.txt */
import{g as mi,c as Ce,p as lo,a as an}from"./epubviewer-main.mjs";import"./index-DBcqYq5n.chunk.mjs";var kr={exports:{}},Xn={exports:{}},co=void 0,Yn=function(n){return n!==co&&n!==null},fo=Yn,po={object:!0,function:!0,undefined:!0},go=function(n){return fo(n)?hasOwnProperty.call(po,typeof n):!1},mo=go,vo=function(n){if(!mo(n))return!1;try{return n.constructor?n.constructor.prototype===n:!1}catch{return!1}},yo=vo,wo=function(n){if(typeof n!="function"||!hasOwnProperty.call(n,"length"))return!1;try{if(typeof n.length!="number"||typeof n.call!="function"||typeof n.apply!="function")return!1}catch{return!1}return!yo(n)},bo=wo,Eo=/^\s*class[\s{/}]/,_o=Function.prototype.toString,xo=function(n){return!(!bo(n)||Eo.test(_o.call(n)))},Ao=function(){var n=Object.assign,t;return typeof n!="function"?!1:(t={foo:"raz"},n(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")},un,hn;function Co(){return hn||(hn=1,un=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),un}var ko=function(){},So=ko(),Wr=function(n){return n!==So&&n!==null},gr,ln;function No(){if(ln)return gr;ln=1;var n=Wr,t=Object.keys;return gr=function(e){return t(n(e)?Object(e):e)},gr}var cn,dn;function To(){return dn||(dn=1,cn=Co()()?Object.keys:No()),cn}var mr,fn;function Do(){if(fn)return mr;fn=1;var n=Wr;return mr=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t},mr}var vr,pn;function Io(){if(pn)return vr;pn=1;var n=To(),t=Do(),e=Math.max;return vr=function(i,r){var s,o,a=e(arguments.length,2),h;for(i=Object(t(i)),h=function(d){try{i[d]=r[d]}catch(l){s||(s=l)}},o=1;o<a;++o)r=arguments[o],n(r).forEach(h);if(s!==void 0)throw s;return i},vr}var Ro=Ao()?Object.assign:Io(),Bo=Wr,Oo=Array.prototype.forEach,Lo=Object.create,Fo=function(n,t){var e;for(e in n)t[e]=n[e]},zo=function(n){var t=Lo(null);return Oo.call(arguments,function(e){Bo(e)&&Fo(Object(e),t)}),t},yr="razdwatrzy",Po=function(){return typeof yr.contains!="function"?!1:yr.contains("dwa")===!0&&yr.contains("foo")===!1},wr,gn;function qo(){if(gn)return wr;gn=1;var n=String.prototype.indexOf;return wr=function(t){return n.call(this,t,arguments[1])>-1},wr}var Mo=Po()?String.prototype.contains:qo(),Mi=Yn,mn=xo,Zn=Ro,$n=zo,Ci=Mo,Uo=Xn.exports=function(n,t){var e,i,r,s,o;return arguments.length<2||typeof n!="string"?(s=t,t=n,n=null):s=arguments[2],Mi(n)?(e=Ci.call(n,"c"),i=Ci.call(n,"e"),r=Ci.call(n,"w")):(e=r=!0,i=!1),o={value:t,configurable:e,enumerable:i,writable:r},s?Zn($n(s),o):o};Uo.gs=function(n,t,e){var i,r,s,o;return typeof n!="string"?(s=e,e=t,t=n,n=null):s=arguments[3],Mi(t)?mn(t)?Mi(e)?mn(e)||(s=e,e=void 0):e=void 0:(s=t,t=e=void 0):t=void 0,Mi(n)?(i=Ci.call(n,"c"),r=Ci.call(n,"e")):(i=!0,r=!1),o={get:t,set:e,configurable:i,enumerable:r},s?Zn($n(s),o):o};var jo=Xn.exports,Wo=function(n){if(typeof n!="function")throw new TypeError(n+" is not a function");return n};(function(n,t){var e=jo,i=Wo,r=Function.prototype.apply,s=Function.prototype.call,o=Object.create,a=Object.defineProperty,h=Object.defineProperties,d=Object.prototype.hasOwnProperty,l={configurable:!0,enumerable:!1,writable:!0},g,w,b,D,O,p,_;g=function(x,k){var F;return i(k),d.call(this,"__ee__")?F=this.__ee__:(F=l.value=o(null),a(this,"__ee__",l),l.value=null),F[x]?typeof F[x]=="object"?F[x].push(k):F[x]=[F[x],k]:F[x]=k,this},w=function(x,k){var F,A;return i(k),A=this,g.call(this,x,F=function(){b.call(A,x,F),r.call(k,this,arguments)}),F.__eeOnceListener__=k,this},b=function(x,k){var F,A,T,B;if(i(k),!d.call(this,"__ee__"))return this;if(F=this.__ee__,!F[x])return this;if(A=F[x],typeof A=="object")for(B=0;T=A[B];++B)(T===k||T.__eeOnceListener__===k)&&(A.length===2?F[x]=A[B?0:1]:A.splice(B,1));else(A===k||A.__eeOnceListener__===k)&&delete F[x];return this},D=function(x){var k,F,A,T,B;if(d.call(this,"__ee__")&&(T=this.__ee__[x],!!T))if(typeof T=="object"){for(F=arguments.length,B=new Array(F-1),k=1;k<F;++k)B[k-1]=arguments[k];for(T=T.slice(),k=0;A=T[k];++k)r.call(A,this,B)}else switch(arguments.length){case 1:s.call(T,this);break;case 2:s.call(T,this,arguments[1]);break;case 3:s.call(T,this,arguments[1],arguments[2]);break;default:for(F=arguments.length,B=new Array(F-1),k=1;k<F;++k)B[k-1]=arguments[k];r.call(T,this,B)}},O={on:g,once:w,off:b,emit:D},p={on:e(g),once:e(w),off:e(b),emit:e(D)},_=h({},p),n.exports=t=function(x){return x==null?o(_):h(Object(x),p)},t.methods=O})(kr,kr.exports);var Vo=kr.exports;const Pe=mi(Vo);var Ge={},Xe={};function Ho(n,t,e){if(e===void 0&&(e=Array.prototype),n&&typeof e.find=="function")return e.find.call(n,t);for(var i=0;i<n.length;i++)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];if(t.call(void 0,r,i,n))return r}}function Vr(n,t){return t===void 0&&(t=Object),t&&typeof t.freeze=="function"?t.freeze(n):n}var Kn=Vr({HTML:"text/html",isHTML:function(n){return n===Kn.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Jn=Vr({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===Jn.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Xe.find=Ho,Xe.freeze=Vr,Xe.MIME_TYPE=Kn,Xe.NAMESPACE=Jn;var Qn=Xe,Le=Qn.find,ki=Qn.NAMESPACE;function Go(n){return n!==""}function Xo(n){return n?n.split(/[\t\n\f\r ]+/).filter(Go):[]}function Yo(n,t){return n.hasOwnProperty(t)||(n[t]=!0),n}function vn(n){if(!n)return[];var t=Xo(n);return Object.keys(t.reduce(Yo,{}))}function Zo(n){return function(t){return n&&n.indexOf(t)!==-1}}function Si(n,t){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}function ye(n,t){var e=n.prototype;if(!(e instanceof t)){let i=function(){};i.prototype=t.prototype,i=new i,Si(e,i),n.prototype=e=i}e.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),e.constructor=n)}var ve={},Re=ve.ELEMENT_NODE=1,fi=ve.ATTRIBUTE_NODE=2,Gi=ve.TEXT_NODE=3,ts=ve.CDATA_SECTION_NODE=4,es=ve.ENTITY_REFERENCE_NODE=5,$o=ve.ENTITY_NODE=6,is=ve.PROCESSING_INSTRUCTION_NODE=7,rs=ve.COMMENT_NODE=8,ns=ve.DOCUMENT_NODE=9,ss=ve.DOCUMENT_TYPE_NODE=10,Ue=ve.DOCUMENT_FRAGMENT_NODE=11,Ko=ve.NOTATION_NODE=12,de={},ue={};de.INDEX_SIZE_ERR=(ue[1]="Index size error",1),de.DOMSTRING_SIZE_ERR=(ue[2]="DOMString size error",2);var me=de.HIERARCHY_REQUEST_ERR=(ue[3]="Hierarchy request error",3);de.WRONG_DOCUMENT_ERR=(ue[4]="Wrong document",4),de.INVALID_CHARACTER_ERR=(ue[5]="Invalid character",5),de.NO_DATA_ALLOWED_ERR=(ue[6]="No data allowed",6),de.NO_MODIFICATION_ALLOWED_ERR=(ue[7]="No modification allowed",7);var os=de.NOT_FOUND_ERR=(ue[8]="Not found",8);de.NOT_SUPPORTED_ERR=(ue[9]="Not supported",9);var yn=de.INUSE_ATTRIBUTE_ERR=(ue[10]="Attribute in use",10);de.INVALID_STATE_ERR=(ue[11]="Invalid state",11),de.SYNTAX_ERR=(ue[12]="Syntax error",12),de.INVALID_MODIFICATION_ERR=(ue[13]="Invalid modification",13),de.NAMESPACE_ERR=(ue[14]="Invalid namespace",14),de.INVALID_ACCESS_ERR=(ue[15]="Invalid access",15);function Qt(n,t){if(t instanceof Error)var e=t;else e=this,Error.call(this,ue[n]),this.message=ue[n],Error.captureStackTrace&&Error.captureStackTrace(this,Qt);return e.code=n,t&&(this.message=this.message+": "+t),e}Qt.prototype=Error.prototype,Si(de,Qt);function Me(){}Me.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,t){for(var e=[],i=0;i<this.length;i++)li(this[i],e,n,t);return e.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function pi(n,t){this._node=n,this._refresh=t,Hr(this)}function Hr(n){var t=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==t){var e=n._refresh(n._node);if(gs(n,"length",e.length),!n.$$length||e.length<n.$$length)for(var i=e.length;i in n;i++)Object.prototype.hasOwnProperty.call(n,i)&&delete n[i];Si(e,n),n._inc=t}}pi.prototype.item=function(n){return Hr(this),this[n]||null},ye(pi,Me);function Xi(){}function as(n,t){for(var e=n.length;e--;)if(n[e]===t)return e}function wn(n,t,e,i){if(i?t[as(t,i)]=e:t[t.length++]=e,n){e.ownerElement=n;var r=n.ownerDocument;r&&(i&&ls(r,n,i),Jo(r,n,e))}}function bn(n,t,e){var i=as(t,e);if(i>=0){for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,n){var s=n.ownerDocument;s&&(ls(s,n,e),e.ownerElement=null)}}else throw new Qt(os,new Error(n.tagName+"@"+e))}Xi.prototype={length:0,item:Me.prototype.item,getNamedItem:function(n){for(var t=this.length;t--;){var e=this[t];if(e.nodeName==n)return e}},setNamedItem:function(n){var t=n.ownerElement;if(t&&t!=this._ownerElement)throw new Qt(yn);var e=this.getNamedItem(n.nodeName);return wn(this._ownerElement,this,n,e),e},setNamedItemNS:function(n){var t=n.ownerElement,e;if(t&&t!=this._ownerElement)throw new Qt(yn);return e=this.getNamedItemNS(n.namespaceURI,n.localName),wn(this._ownerElement,this,n,e),e},removeNamedItem:function(n){var t=this.getNamedItem(n);return bn(this._ownerElement,this,t),t},removeNamedItemNS:function(n,t){var e=this.getNamedItemNS(n,t);return bn(this._ownerElement,this,e),e},getNamedItemNS:function(n,t){for(var e=this.length;e--;){var i=this[e];if(i.localName==t&&i.namespaceURI==n)return i}return null}};function us(){}us.prototype={hasFeature:function(n,t){return!0},createDocument:function(n,t,e){var i=new Ti;if(i.implementation=this,i.childNodes=new Me,i.doctype=e||null,e&&i.appendChild(e),t){var r=i.createElementNS(n,t);i.appendChild(r)}return i},createDocumentType:function(n,t,e){var i=new $i;return i.name=n,i.nodeName=n,i.publicId=t||"",i.systemId=e||"",i}};function zt(){}zt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,t){return Yi(this,n,t)},replaceChild:function(n,t){Yi(this,n,t,ds),t&&this.removeChild(t)},removeChild:function(n){return cs(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return Rr(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var t=n.nextSibling;t&&t.nodeType==Gi&&n.nodeType==Gi?(this.removeChild(t),n.appendData(t.data)):(n.normalize(),n=t)}},isSupported:function(n,t){return this.ownerDocument.implementation.hasFeature(n,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var t=this;t;){var e=t._nsMap;if(e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]===n)return i}t=t.nodeType==fi?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(n){for(var t=this;t;){var e=t._nsMap;if(e&&n in e&&Object.prototype.hasOwnProperty.call(e,n))return e[n];t=t.nodeType==fi?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(n){var t=this.lookupPrefix(n);return t==null}};function hs(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}Si(ve,zt),Si(ve,zt.prototype);function Ni(n,t){if(t(n))return!0;if(n=n.firstChild)do if(Ni(n,t))return!0;while(n=n.nextSibling)}function Ti(){this.ownerDocument=this}function Jo(n,t,e){n&&n._inc++;var i=e.namespaceURI;i===ki.XMLNS&&(t._nsMap[e.prefix?e.localName:""]=e.value)}function ls(n,t,e,i){n&&n._inc++;var r=e.namespaceURI;r===ki.XMLNS&&delete t._nsMap[e.prefix?e.localName:""]}function Gr(n,t,e){if(n&&n._inc){n._inc++;var i=t.childNodes;if(e)i[i.length++]=e;else{for(var r=t.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function cs(n,t){var e=t.previousSibling,i=t.nextSibling;return e?e.nextSibling=i:n.firstChild=i,i?i.previousSibling=e:n.lastChild=e,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,Gr(n.ownerDocument,n),t}function Qo(n){return n&&(n.nodeType===zt.DOCUMENT_NODE||n.nodeType===zt.DOCUMENT_FRAGMENT_NODE||n.nodeType===zt.ELEMENT_NODE)}function ta(n){return n&&(Fe(n)||Xr(n)||je(n)||n.nodeType===zt.DOCUMENT_FRAGMENT_NODE||n.nodeType===zt.COMMENT_NODE||n.nodeType===zt.PROCESSING_INSTRUCTION_NODE)}function je(n){return n&&n.nodeType===zt.DOCUMENT_TYPE_NODE}function Fe(n){return n&&n.nodeType===zt.ELEMENT_NODE}function Xr(n){return n&&n.nodeType===zt.TEXT_NODE}function En(n,t){var e=n.childNodes||[];if(Le(e,Fe)||je(t))return!1;var i=Le(e,je);return!(t&&i&&e.indexOf(i)>e.indexOf(t))}function _n(n,t){var e=n.childNodes||[];function i(s){return Fe(s)&&s!==t}if(Le(e,i))return!1;var r=Le(e,je);return!(t&&r&&e.indexOf(r)>e.indexOf(t))}function ea(n,t,e){if(!Qo(n))throw new Qt(me,"Unexpected parent node type "+n.nodeType);if(e&&e.parentNode!==n)throw new Qt(os,"child not in parent");if(!ta(t)||je(t)&&n.nodeType!==zt.DOCUMENT_NODE)throw new Qt(me,"Unexpected node type "+t.nodeType+" for parent node type "+n.nodeType)}function ia(n,t,e){var i=n.childNodes||[],r=t.childNodes||[];if(t.nodeType===zt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(Fe);if(s.length>1||Le(r,Xr))throw new Qt(me,"More than one element or text in fragment");if(s.length===1&&!En(n,e))throw new Qt(me,"Element in fragment can not be inserted before doctype")}if(Fe(t)&&!En(n,e))throw new Qt(me,"Only one element can be added and only after doctype");if(je(t)){if(Le(i,je))throw new Qt(me,"Only one doctype is allowed");var o=Le(i,Fe);if(e&&i.indexOf(o)<i.indexOf(e))throw new Qt(me,"Doctype can only be inserted before an element");if(!e&&o)throw new Qt(me,"Doctype can not be appended since element is present")}}function ds(n,t,e){var i=n.childNodes||[],r=t.childNodes||[];if(t.nodeType===zt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(Fe);if(s.length>1||Le(r,Xr))throw new Qt(me,"More than one element or text in fragment");if(s.length===1&&!_n(n,e))throw new Qt(me,"Element in fragment can not be inserted before doctype")}if(Fe(t)&&!_n(n,e))throw new Qt(me,"Only one element can be added and only after doctype");if(je(t)){if(Le(i,function(a){return je(a)&&a!==e}))throw new Qt(me,"Only one doctype is allowed");var o=Le(i,Fe);if(e&&i.indexOf(o)<i.indexOf(e))throw new Qt(me,"Doctype can only be inserted before an element")}}function Yi(n,t,e,i){ea(n,t,e),n.nodeType===zt.DOCUMENT_NODE&&(i||ia)(n,t,e);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===Ue){var s=t.firstChild;if(s==null)return t;var o=t.lastChild}else s=o=t;var a=e?e.previousSibling:n.lastChild;s.previousSibling=a,o.nextSibling=e,a?a.nextSibling=s:n.firstChild=s,e==null?n.lastChild=o:e.previousSibling=o;do s.parentNode=n;while(s!==o&&(s=s.nextSibling));return Gr(n.ownerDocument||n,n),t.nodeType==Ue&&(t.firstChild=t.lastChild=null),t}function ra(n,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=n,t.previousSibling=n.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:n.firstChild=t,n.lastChild=t,Gr(n.ownerDocument,n,t),t}Ti.prototype={nodeName:"#document",nodeType:ns,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,t){if(n.nodeType==Ue){for(var e=n.firstChild;e;){var i=e.nextSibling;this.insertBefore(e,t),e=i}return n}return Yi(this,n,t),n.ownerDocument=this,this.documentElement===null&&n.nodeType===Re&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),cs(this,n)},replaceChild:function(n,t){Yi(this,n,t,ds),n.ownerDocument=this,t&&this.removeChild(t),Fe(n)&&(this.documentElement=n)},importNode:function(n,t){return ps(this,n,t)},getElementById:function(n){var t=null;return Ni(this.documentElement,function(e){if(e.nodeType==Re&&e.getAttribute("id")==n)return t=e,!0}),t},getElementsByClassName:function(n){var t=vn(n);return new pi(this,function(e){var i=[];return t.length>0&&Ni(e.documentElement,function(r){if(r!==e&&r.nodeType===Re){var s=r.getAttribute("class");if(s){var o=n===s;if(!o){var a=vn(s);o=t.every(Zo(a))}o&&i.push(r)}}}),i})},createElement:function(n){var t=new $e;t.ownerDocument=this,t.nodeName=n,t.tagName=n,t.localName=n,t.childNodes=new Me;var e=t.attributes=new Xi;return e._ownerElement=t,t},createDocumentFragment:function(){var n=new Ui;return n.ownerDocument=this,n.childNodes=new Me,n},createTextNode:function(n){var t=new Sr;return t.ownerDocument=this,t.appendData(n),t},createComment:function(n){var t=new Nr;return t.ownerDocument=this,t.appendData(n),t},createCDATASection:function(n){var t=new Tr;return t.ownerDocument=this,t.appendData(n),t},createProcessingInstruction:function(n,t){var e=new Ir;return e.ownerDocument=this,e.tagName=e.nodeName=e.target=n,e.nodeValue=e.data=t,e},createAttribute:function(n){var t=new Zi;return t.ownerDocument=this,t.name=n,t.nodeName=n,t.localName=n,t.specified=!0,t},createEntityReference:function(n){var t=new Dr;return t.ownerDocument=this,t.nodeName=n,t},createElementNS:function(n,t){var e=new $e,i=t.split(":"),r=e.attributes=new Xi;return e.childNodes=new Me,e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.namespaceURI=n,i.length==2?(e.prefix=i[0],e.localName=i[1]):e.localName=t,r._ownerElement=e,e},createAttributeNS:function(n,t){var e=new Zi,i=t.split(":");return e.ownerDocument=this,e.nodeName=t,e.name=t,e.namespaceURI=n,e.specified=!0,i.length==2?(e.prefix=i[0],e.localName=i[1]):e.localName=t,e}},ye(Ti,zt);function $e(){this._nsMap={}}$e.prototype={nodeType:Re,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var t=this.getAttributeNode(n);return t&&t.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,t){var e=this.ownerDocument.createAttribute(n);e.value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(n){var t=this.getAttributeNode(n);t&&this.removeAttributeNode(t)},appendChild:function(n){return n.nodeType===Ue?this.insertBefore(n,null):ra(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,t){var e=this.getAttributeNodeNS(n,t);e&&this.removeAttributeNode(e)},hasAttributeNS:function(n,t){return this.getAttributeNodeNS(n,t)!=null},getAttributeNS:function(n,t){var e=this.getAttributeNodeNS(n,t);return e&&e.value||""},setAttributeNS:function(n,t,e){var i=this.ownerDocument.createAttributeNS(n,t);i.value=i.nodeValue=""+e,this.setAttributeNode(i)},getAttributeNodeNS:function(n,t){return this.attributes.getNamedItemNS(n,t)},getElementsByTagName:function(n){return new pi(this,function(t){var e=[];return Ni(t,function(i){i!==t&&i.nodeType==Re&&(n==="*"||i.tagName==n)&&e.push(i)}),e})},getElementsByTagNameNS:function(n,t){return new pi(this,function(e){var i=[];return Ni(e,function(r){r!==e&&r.nodeType===Re&&(n==="*"||r.namespaceURI===n)&&(t==="*"||r.localName==t)&&i.push(r)}),i})}},Ti.prototype.getElementsByTagName=$e.prototype.getElementsByTagName,Ti.prototype.getElementsByTagNameNS=$e.prototype.getElementsByTagNameNS,ye($e,zt);function Zi(){}Zi.prototype.nodeType=fi,ye(Zi,zt);function Di(){}Di.prototype={data:"",substringData:function(n,t){return this.data.substring(n,n+t)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,t){this.replaceData(n,0,t)},appendChild:function(n){throw new Error(ue[me])},deleteData:function(n,t){this.replaceData(n,t,"")},replaceData:function(n,t,e){var i=this.data.substring(0,n),r=this.data.substring(n+t);e=i+e+r,this.nodeValue=this.data=e,this.length=e.length}},ye(Di,zt);function Sr(){}Sr.prototype={nodeName:"#text",nodeType:Gi,splitText:function(n){var t=this.data,e=t.substring(n);t=t.substring(0,n),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(e);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},ye(Sr,Di);function Nr(){}Nr.prototype={nodeName:"#comment",nodeType:rs},ye(Nr,Di);function Tr(){}Tr.prototype={nodeName:"#cdata-section",nodeType:ts},ye(Tr,Di);function $i(){}$i.prototype.nodeType=ss,ye($i,zt);function xn(){}xn.prototype.nodeType=Ko,ye(xn,zt);function An(){}An.prototype.nodeType=$o,ye(An,zt);function Dr(){}Dr.prototype.nodeType=es,ye(Dr,zt);function Ui(){}Ui.prototype.nodeName="#document-fragment",Ui.prototype.nodeType=Ue,ye(Ui,zt);function Ir(){}Ir.prototype.nodeType=is,ye(Ir,zt);function fs(){}fs.prototype.serializeToString=function(n,t,e){return Cn.call(n,t,e)},zt.prototype.toString=Cn;function Cn(n,t){var e=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&r==null){var r=i.lookupPrefix(s);if(r==null)var o=[{namespace:s,prefix:null}]}return li(this,e,n,t,o),e.join("")}function kn(n,t,e){var i=n.prefix||"",r=n.namespaceURI;if(!r||i==="xml"&&r===ki.XML||r===ki.XMLNS)return!1;for(var s=e.length;s--;){var o=e[s];if(o.prefix===i)return o.namespace!==r}return!0}function br(n,t,e){n.push(" ",t,'="',e.replace(/[<&"]/g,hs),'"')}function li(n,t,e,i,r){if(r||(r=[]),i)if(n=i(n),n){if(typeof n=="string"){t.push(n);return}}else return;switch(n.nodeType){case Re:var s=n.attributes,o=s.length,a=n.firstChild,h=n.tagName;e=ki.isHTML(n.namespaceURI)||e;var d=h;if(!e&&!n.prefix&&n.namespaceURI){for(var l,g=0;g<s.length;g++)if(s.item(g).name==="xmlns"){l=s.item(g).value;break}if(!l)for(var w=r.length-1;w>=0;w--){var b=r[w];if(b.prefix===""&&b.namespace===n.namespaceURI){l=b.namespace;break}}if(l!==n.namespaceURI)for(var w=r.length-1;w>=0;w--){var b=r[w];if(b.namespace===n.namespaceURI){b.prefix&&(d=b.prefix+":"+h);break}}}t.push("<",d);for(var D=0;D<o;D++){var O=s.item(D);O.prefix=="xmlns"?r.push({prefix:O.localName,namespace:O.value}):O.nodeName=="xmlns"&&r.push({prefix:"",namespace:O.value})}for(var D=0;D<o;D++){var O=s.item(D);if(kn(O,e,r)){var p=O.prefix||"",_=O.namespaceURI;br(t,p?"xmlns:"+p:"xmlns",_),r.push({prefix:p,namespace:_})}li(O,t,e,i,r)}if(h===d&&kn(n,e,r)){var p=n.prefix||"",_=n.namespaceURI;br(t,p?"xmlns:"+p:"xmlns",_),r.push({prefix:p,namespace:_})}if(a||e&&!/^(?:meta|link|img|br|hr|input)$/i.test(h)){if(t.push(">"),e&&/^script$/i.test(h))for(;a;)a.data?t.push(a.data):li(a,t,e,i,r.slice()),a=a.nextSibling;else for(;a;)li(a,t,e,i,r.slice()),a=a.nextSibling;t.push("</",d,">")}else t.push("/>");return;case ns:case Ue:for(var a=n.firstChild;a;)li(a,t,e,i,r.slice()),a=a.nextSibling;return;case fi:return br(t,n.name,n.value);case Gi:return t.push(n.data.replace(/[<&]/g,hs).replace(/]]>/g,"]]&gt;"));case ts:return t.push("<![CDATA[",n.data,"]]>");case rs:return t.push("<!--",n.data,"-->");case ss:var x=n.publicId,k=n.systemId;if(t.push("<!DOCTYPE ",n.name),x)t.push(" PUBLIC ",x),k&&k!="."&&t.push(" ",k),t.push(">");else if(k&&k!=".")t.push(" SYSTEM ",k,">");else{var F=n.internalSubset;F&&t.push(" [",F,"]"),t.push(">")}return;case is:return t.push("<?",n.target," ",n.data,"?>");case es:return t.push("&",n.nodeName,";");default:t.push("??",n.nodeName)}}function ps(n,t,e){var i;switch(t.nodeType){case Re:i=t.cloneNode(!1),i.ownerDocument=n;case Ue:break;case fi:e=!0;break}if(i||(i=t.cloneNode(!1)),i.ownerDocument=n,i.parentNode=null,e)for(var r=t.firstChild;r;)i.appendChild(ps(n,r,e)),r=r.nextSibling;return i}function Rr(n,t,e){var i=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=t[r];typeof s!="object"&&s!=i[r]&&(i[r]=s)}switch(t.childNodes&&(i.childNodes=new Me),i.ownerDocument=n,i.nodeType){case Re:var o=t.attributes,a=i.attributes=new Xi,h=o.length;a._ownerElement=i;for(var d=0;d<h;d++)i.setAttributeNode(Rr(n,o.item(d),!0));break;case fi:e=!0}if(e)for(var l=t.firstChild;l;)i.appendChild(Rr(n,l,e)),l=l.nextSibling;return i}function gs(n,t,e){n[t]=e}try{if(Object.defineProperty){let n=function(t){switch(t.nodeType){case Re:case Ue:var e=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&e.push(n(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}};Object.defineProperty(pi.prototype,"length",{get:function(){return Hr(this),this.$$length}}),Object.defineProperty(zt.prototype,"textContent",{get:function(){return n(this)},set:function(t){switch(this.nodeType){case Re:case Ue:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),gs=function(t,e,i){t["$$"+e]=i}}}catch{}Ge.DocumentType=$i,Ge.DOMException=Qt,Ge.DOMImplementation=us,Ge.Element=$e,Ge.Node=zt,Ge.NodeList=Me,Ge.XMLSerializer=fs;var xi={},ms={};(function(n){var t=Xe.freeze;n.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=t({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(ms);var Br={},Ii=Xe.NAMESPACE,Or=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Sn=new RegExp("[\\-\\.0-9"+Or.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Nn=new RegExp("^"+Or.source+Sn.source+"*(?::"+Or.source+Sn.source+"*)?$"),yi=0,He=1,ti=2,wi=3,ei=4,ii=5,bi=6,Pi=7;function ci(n,t){this.message=n,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,ci)}ci.prototype=new Error,ci.prototype.name=ci.name;function vs(){}vs.prototype={parse:function(n,t,e){var i=this.domBuilder;i.startDocument(),ys(t,t={}),na(n,t,e,i,this.errorHandler),i.endDocument()}};function na(n,t,e,i,r){function s(ft){if(ft>65535){ft-=65536;var ot=55296+(ft>>10),yt=56320+(ft&1023);return String.fromCharCode(ot,yt)}else return String.fromCharCode(ft)}function o(ft){var ot=ft.slice(1,-1);return ot in e?e[ot]:ot.charAt(0)==="#"?s(parseInt(ot.substr(1).replace("x","0x"))):(r.error("entity not found:"+ft),ft)}function a(ft){if(ft>O){var ot=n.substring(O,ft).replace(/&#?\w+;/g,o);w&&h(O),i.characters(ot,0,ft-O),O=ft}}function h(ft,ot){for(;ft>=l&&(ot=g.exec(n));)d=ot.index,l=d+ot[0].length,w.lineNumber++;w.columnNumber=ft-d+1}for(var d=0,l=0,g=/.*(?:\r\n?|\n)|.*$/g,w=i.locator,b=[{currentNSMap:t}],D={},O=0;;){try{var p=n.indexOf("<",O);if(p<0){if(!n.substr(O).match(/^\s*$/)){var _=i.doc,x=_.createTextNode(n.substr(O));_.appendChild(x),i.currentElement=x}return}switch(p>O&&a(p),n.charAt(p+1)){case"/":var X=n.indexOf(">",p+3),k=n.substring(p+2,X).replace(/[ \t\n\r]+$/g,""),F=b.pop();X<0?(k=n.substring(p+2).replace(/[\s<].*/,""),r.error("end tag name: "+k+" is not complete:"+F.tagName),X=p+1+k.length):k.match(/\s</)&&(k=k.replace(/[\s<].*/,""),r.error("end tag name: "+k+" maybe not complete"),X=p+1+k.length);var A=F.localNSMap,T=F.tagName==k,B=T||F.tagName&&F.tagName.toLowerCase()==k.toLowerCase();if(B){if(i.endElement(F.uri,F.localName,k),A)for(var z in A)Object.prototype.hasOwnProperty.call(A,z)&&i.endPrefixMapping(z);T||r.fatalError("end tag name: "+k+" is not match the current start tagName:"+F.tagName)}else b.push(F);X++;break;case"?":w&&h(p),X=ha(n,p,i);break;case"!":w&&h(p),X=ua(n,p,i,r);break;default:w&&h(p);var M=new ws,W=b[b.length-1].currentNSMap,X=sa(n,p,M,W,o,r),st=M.length;if(!M.closed&&aa(n,X,M.tagName,D)&&(M.closed=!0,e.nbsp||r.warning("unclosed xml attribute")),w&&st){for(var dt=Tn(w,{}),lt=0;lt<st;lt++){var bt=M[lt];h(bt.offset),bt.locator=Tn(w,{})}i.locator=dt,Dn(M,i,W)&&b.push(M),i.locator=w}else Dn(M,i,W)&&b.push(M);Ii.isHTML(M.uri)&&!M.closed?X=oa(n,X,M.tagName,o,i):X++}}catch(ft){if(ft instanceof ci)throw ft;r.error("element parse error: "+ft),X=-1}X>O?O=X:a(Math.max(p,O)+1)}}function Tn(n,t){return t.lineNumber=n.lineNumber,t.columnNumber=n.columnNumber,t}function sa(n,t,e,i,r,s){function o(w,b,D){e.attributeNames.hasOwnProperty(w)&&s.fatalError("Attribute "+w+" redefined"),e.addValue(w,b,D)}for(var a,h,d=++t,l=yi;;){var g=n.charAt(d);switch(g){case"=":if(l===He)a=n.slice(t,d),l=wi;else if(l===ti)l=wi;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(l===wi||l===He)if(l===He&&(s.warning('attribute value must after "="'),a=n.slice(t,d)),t=d+1,d=n.indexOf(g,t),d>0)h=n.slice(t,d).replace(/&#?\w+;/g,r),o(a,h,t-1),l=ii;else throw new Error("attribute value no end '"+g+"' match");else if(l==ei)h=n.slice(t,d).replace(/&#?\w+;/g,r),o(a,h,t),s.warning('attribute "'+a+'" missed start quot('+g+")!!"),t=d+1,l=ii;else throw new Error('attribute value must after "="');break;case"/":switch(l){case yi:e.setTagName(n.slice(t,d));case ii:case bi:case Pi:l=Pi,e.closed=!0;case ei:case He:break;case ti:e.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),l==yi&&e.setTagName(n.slice(t,d)),d;case">":switch(l){case yi:e.setTagName(n.slice(t,d));case ii:case bi:case Pi:break;case ei:case He:h=n.slice(t,d),h.slice(-1)==="/"&&(e.closed=!0,h=h.slice(0,-1));case ti:l===ti&&(h=a),l==ei?(s.warning('attribute "'+h+'" missed quot(")!'),o(a,h.replace(/&#?\w+;/g,r),t)):((!Ii.isHTML(i[""])||!h.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),o(h,h,t));break;case wi:throw new Error("attribute value missed!!")}return d;case"":g=" ";default:if(g<=" ")switch(l){case yi:e.setTagName(n.slice(t,d)),l=bi;break;case He:a=n.slice(t,d),l=ti;break;case ei:var h=n.slice(t,d).replace(/&#?\w+;/g,r);s.warning('attribute "'+h+'" missed quot(")!!'),o(a,h,t);case ii:l=bi;break}else switch(l){case ti:e.tagName,(!Ii.isHTML(i[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),o(a,a,t),t=d,l=He;break;case ii:s.warning('attribute space is required"'+a+'"!!');case bi:l=He,t=d;break;case wi:l=ei,t=d;break;case Pi:throw new Error("elements closed character '/' and '>' must be connected to")}}d++}}function Dn(n,t,e){for(var i=n.tagName,r=null,s=n.length;s--;){var o=n[s],a=o.qName,h=o.value,w=a.indexOf(":");if(w>0)var d=o.prefix=a.slice(0,w),l=a.slice(w+1),g=d==="xmlns"&&l;else l=a,d=null,g=a==="xmlns"&&"";o.localName=l,g!==!1&&(r==null&&(r={},ys(e,e={})),e[g]=r[g]=h,o.uri=Ii.XMLNS,t.startPrefixMapping(g,h))}for(var s=n.length;s--;){o=n[s];var d=o.prefix;d&&(d==="xml"&&(o.uri=Ii.XML),d!=="xmlns"&&(o.uri=e[d||""]))}var w=i.indexOf(":");w>0?(d=n.prefix=i.slice(0,w),l=n.localName=i.slice(w+1)):(d=null,l=n.localName=i);var b=n.uri=e[d||""];if(t.startElement(b,l,i,n),n.closed){if(t.endElement(b,l,i),r)for(d in r)Object.prototype.hasOwnProperty.call(r,d)&&t.endPrefixMapping(d)}else return n.currentNSMap=e,n.localNSMap=r,!0}function oa(n,t,e,i,r){if(/^(?:script|textarea)$/i.test(e)){var s=n.indexOf("</"+e+">",t),o=n.substring(t+1,s);if(/[&<]/.test(o))return/^script$/i.test(e)?(r.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,i),r.characters(o,0,o.length),s)}return t+1}function aa(n,t,e,i){var r=i[e];return r==null&&(r=n.lastIndexOf("</"+e+">"),r<t&&(r=n.lastIndexOf("</"+e)),i[e]=r),r<t}function ys(n,t){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}function ua(n,t,e,i){var r=n.charAt(t+2);switch(r){case"-":if(n.charAt(t+3)==="-"){var s=n.indexOf("-->",t+4);return s>t?(e.comment(n,t+4,s-t-4),s+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(t+3,6)=="CDATA["){var s=n.indexOf("]]>",t+9);return e.startCDATA(),e.characters(n,t+9,s-t-9),e.endCDATA(),s+3}var o=la(n,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var h=o[1][0],d=!1,l=!1;a>3&&(/^public$/i.test(o[2][0])?(d=o[3][0],l=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(l=o[3][0]));var g=o[a-1];return e.startDTD(h,d,l),e.endDTD(),g.index+g[0].length}}return-1}function ha(n,t,e){var i=n.indexOf("?>",t);if(i){var r=n.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,e.processingInstruction(r[1],r[2]),i+2):-1}return-1}function ws(){this.attributeNames={}}ws.prototype={setTagName:function(n){if(!Nn.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,t,e){if(!Nn.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:t,offset:e}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function la(n,t){var e,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(n);e=r.exec(n);)if(i.push(e),e[1])return i}Br.XMLReader=vs,Br.ParseError=ci;var ca=Xe,Lr=Ge,In=ms,bs=Br,da=Lr.DOMImplementation,Rn=ca.NAMESPACE,fa=bs.ParseError,pa=bs.XMLReader;function Es(n){this.options=n||{locator:{}}}Es.prototype.parseFromString=function(n,t){var e=this.options,i=new pa,r=e.domBuilder||new Li,s=e.errorHandler,o=e.locator,a=e.xmlns||{},h=/\/x?html?$/.test(t),d=h?In.HTML_ENTITIES:In.XML_ENTITIES;return o&&r.setDocumentLocator(o),i.errorHandler=ga(s,r,o),i.domBuilder=e.domBuilder||r,h&&(a[""]=Rn.HTML),a.xml=a.xml||Rn.XML,n&&typeof n=="string"?i.parse(n,a,d):i.errorHandler.error("invalid doc source"),r.doc};function ga(n,t,e){if(!n){if(t instanceof Li)return t;n=t}var i={},r=n instanceof Function;e=e||{};function s(o){var a=n[o];!a&&r&&(a=n.length==2?function(h){n(o,h)}:n),i[o]=a&&function(h){a("[xmldom "+o+"]	"+h+Fr(e))}||function(){}}return s("warning"),s("error"),s("fatalError"),i}function Li(){this.cdata=!1}function ri(n,t){t.lineNumber=n.lineNumber,t.columnNumber=n.columnNumber}Li.prototype={startDocument:function(){this.doc=new da().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,t,e,i){var r=this.doc,s=r.createElementNS(n,e||t),o=i.length;qi(this,s),this.currentElement=s,this.locator&&ri(this.locator,s);for(var a=0;a<o;a++){var n=i.getURI(a),h=i.getValue(a),e=i.getQName(a),d=r.createAttributeNS(n,e);this.locator&&ri(i.getLocator(a),d),d.value=d.nodeValue=h,s.setAttributeNode(d)}},endElement:function(n,t,e){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(n,t){},endPrefixMapping:function(n){},processingInstruction:function(n,t){var e=this.doc.createProcessingInstruction(n,t);this.locator&&ri(this.locator,e),qi(this,e)},ignorableWhitespace:function(n,t,e){},characters:function(n,t,e){if(n=Bn.apply(this,arguments),n){if(this.cdata)var i=this.doc.createCDATASection(n);else var i=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(n)&&this.doc.appendChild(i),this.locator&&ri(this.locator,i)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,t,e){n=Bn.apply(this,arguments);var i=this.doc.createComment(n);this.locator&&ri(this.locator,i),qi(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,t,e){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(n,t,e);this.locator&&ri(this.locator,r),qi(this,r),this.doc.doctype=r}},warning:function(n){console.warn("[xmldom warning]	"+n,Fr(this.locator))},error:function(n){console.error("[xmldom error]	"+n,Fr(this.locator))},fatalError:function(n){throw new fa(n,this.locator)}};function Fr(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function Bn(n,t,e){return typeof n=="string"?n.substr(t,e):n.length>=t+e||t?new java.lang.String(n,t,e)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){Li.prototype[n]=function(){return null}});function qi(n,t){n.currentElement?n.currentElement.appendChild(t):n.doc.appendChild(t)}xi.__DOMHandler=Li,xi.DOMParser=Es,xi.DOMImplementation=Lr.DOMImplementation,xi.XMLSerializer=Lr.XMLSerializer;var _s=xi.DOMParser;const Yr=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,ma=1,va=3,xs=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function ur(){var n=new Date().getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(e=="x"?i:i&7|8).toString(16)});return t}function ya(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function As(n){return!!(n&&n.nodeType==1)}function Zt(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Cs(n){let t=parseFloat(n);return Zt(n)===!1?!1:typeof n=="string"&&n.indexOf(".")>-1?!0:Math.floor(t)!==t}function ai(n){var t=["Webkit","webkit","Moz","O","ms"],e=["-webkit-","-webkit-","-moz-","-o-","-ms-"],i=n.toLowerCase(),r=t.length;if(typeof document>"u"||typeof document.body.style[i]<"u")return n;for(var s=0;s<r;s++)if(typeof document.body.style[e[s]+i]<"u")return e[s]+i;return n}function ks(n){for(var t=1,e=arguments.length;t<e;t++){var i=arguments[t];for(var r in i)n[r]===void 0&&(n[r]=i[r])}return n}function le(n){var t=[].slice.call(arguments,1);return t.forEach(function(e){e&&Object.getOwnPropertyNames(e).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}),n}function wa(n,t,e){var i=gi(n,t,e);return t.splice(i,0,n),i}function gi(n,t,e,i,r){var s=i||0,o=r||t.length,a=parseInt(s+(o-s)/2),h;return e||(e=function(d,l){if(d>l)return 1;if(d<l)return-1;if(d==l)return 0}),o-s<=0?a:(h=e(t[a],n),o-s===1?h>=0?a:a+1:h===0?a:h===-1?gi(n,t,e,a,o):gi(n,t,e,s,a))}function Ki(n,t,e,i,r){var s=i||0,o=r||t.length,a=parseInt(s+(o-s)/2),h;return e||(e=function(d,l){if(d>l)return 1;if(d<l)return-1;if(d==l)return 0}),o-s<=0?-1:(h=e(t[a],n),o-s===1?h===0?a:-1:h===0?a:h===-1?Ki(n,t,e,a,o):Ki(n,t,e,s,a))}function ji(n){var t=window.getComputedStyle(n),e=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],i=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],r=0,s=0;return e.forEach(function(o){r+=parseFloat(t[o])||0}),i.forEach(function(o){s+=parseFloat(t[o])||0}),{height:s,width:r}}function Ji(n){var t=window.getComputedStyle(n),e=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],i=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],r=0,s=0;return e.forEach(function(o){r+=parseFloat(t[o])||0}),i.forEach(function(o){s+=parseFloat(t[o])||0}),{height:s,width:r}}function zr(n){let t,e=n.ownerDocument;if(n.nodeType==Node.TEXT_NODE){let i=e.createRange();i.selectNodeContents(n),t=i.getBoundingClientRect()}else t=n.getBoundingClientRect();return t}function Qi(){var n=window.innerWidth,t=window.innerHeight;return{top:0,left:0,right:n,bottom:t,width:n,height:t}}function Zr(n,t){for(var e=n.parentNode,i=e.childNodes,r,s=-1,o=0;o<i.length&&(r=i[o],r.nodeType===t&&s++,r!=n);o++);return s}function ba(n){return Zr(n,va)}function Ss(n){return Zr(n,ma)}function Ri(n){return["xml","opf","ncx"].indexOf(n)>-1}function Ns(n,t){return new Blob([n],{type:t})}function tr(n,t){var e,i=Ns(n,t);return e=xs.createObjectURL(i),e}function Ts(n){return xs.revokeObjectURL(n)}function Pr(n,t){var e,i;if(typeof n=="string")return e=btoa(n),i="data:"+t+";base64,"+e,i}function Ds(n){return Object.prototype.toString.call(n).slice(8,-1)}function ze(n,t,e){var i,r;return typeof DOMParser>"u"||e?r=_s:r=DOMParser,n.charCodeAt(0)===65279&&(n=n.slice(1)),i=new r().parseFromString(n,t),i}function Mt(n,t){var e;if(!n)throw new Error("No Element Provided");if(typeof n.querySelector<"u")return n.querySelector(t);if(e=n.getElementsByTagName(t),e.length)return e[0]}function We(n,t){return typeof n.querySelector<"u"?n.querySelectorAll(t):n.getElementsByTagName(t)}function ui(n,t,e){var i,r;if(typeof n.querySelector<"u"){t+="[";for(var s in e)t+=s+"~='"+e[s]+"'";return t+="]",n.querySelector(t)}else if(i=n.getElementsByTagName(t),r=Array.prototype.slice.call(i,0).filter(function(o){for(var a in e)if(o.getAttribute(a)===e[a])return!0;return!1}),r)return r[0]}function er(n,t){var e=n.ownerDocument||n;typeof e.createTreeWalker<"u"?Is(n,t,NodeFilter.SHOW_TEXT):$r(n,function(i){i&&i.nodeType===3&&t(i)})}function Is(n,t,e){var i=document.createTreeWalker(n,e,null,!1);let r;for(;r=i.nextNode();)t(r)}function $r(n,t){if(t(n))return!0;if(n=n.firstChild,n)do{if($r(n,t))return!0;n=n.nextSibling}while(n)}function Rs(n){return new Promise(function(t,e){var i=new FileReader;i.readAsDataURL(n),i.onloadend=function(){t(i.result)}})}function Nt(){this.resolve=null,this.reject=null,this.id=ur(),this.promise=new Promise((n,t)=>{this.resolve=n,this.reject=t}),Object.freeze(this)}function ir(n,t,e){var i;if(typeof n.querySelector<"u"&&(i=n.querySelector(`${t}[*|type="${e}"]`)),!i||i.length===0){i=We(n,t);for(var r=0;r<i.length;r++)if(i[r].getAttributeNS("http://www.idpf.org/2007/ops","type")===e||i[r].getAttribute("epub:type")===e)return i[r]}else return i}function qr(n){for(var t=[],e=n.childNodes,i=0;i<e.length;i++){let r=e[i];r.nodeType===1&&t.push(r)}return t}function Mr(n){for(var t=[n];n;n=n.parentNode)t.unshift(n);return t}function hi(n,t,e){for(var i=[],r=n.childNodes,s=0;s<r.length;s++){let o=r[s];if(o.nodeType===1&&o.nodeName.toLowerCase()===t){if(e)return o;i.push(o)}}if(!e)return i}function Ea(n,t){let e;if(!(n===null||t===""))for(e=n.parentNode;e.nodeType===1;){if(e.tagName.toLowerCase()===t)return e;e=e.parentNode}}class Bs{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(t,e){this.startContainer=t,this.startOffset=e,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(t,e){this.endContainer=t,this.endOffset=e,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(t){this.collapsed=!0,t?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(t){let e=t.parentNode,i=Array.prototype.indexOf.call(e.childNodes,t);this.setStart(e,i),this.setEnd(e,i+1)}selectNodeContents(t){t.childNodes[t.childNodes-1];let e=t.nodeType===3?t.textContent.length:parent.childNodes.length;this.setStart(t,0),this.setEnd(t,e)}_commonAncestorContainer(t,e){var i=Mr(t||this.startContainer),r=Mr(e||this.endContainer);if(i[0]==r[0]){for(var s=0;s<i.length;s++)if(i[s]!=r[s])return i[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const _a=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:Bs,blob2base64:Rs,borders:Ji,bounds:ji,createBase64Url:Pr,createBlob:Ns,createBlobUrl:tr,defaults:ks,defer:Nt,documentHeight:ya,extend:le,filterChildren:hi,findChildren:qr,getParentByTagName:Ea,indexOfElementNode:Ss,indexOfNode:Zr,indexOfSorted:Ki,indexOfTextNode:ba,insert:wa,isElement:As,isFloat:Cs,isNumber:Zt,isXml:Ri,locationOf:gi,nodeBounds:zr,parents:Mr,parse:ze,prefixed:ai,qs:Mt,qsa:We,qsp:ui,querySelectorByType:ir,requestAnimationFrame:Yr,revokeBlobUrl:Ts,sprint:er,treeWalker:Is,type:Ds,uuid:ur,walk:$r,windowBounds:Qi},Symbol.toStringTag,{value:"Module"}));if(!Os)var Os={cwd:function(){return"/"}};function Be(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+n)}function On(n,t){for(var e="",i=-1,r=0,s,o=0;o<=n.length;++o){if(o<n.length)s=n.charCodeAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||r===1))if(i!==o-1&&r===2){if(e.length<2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){for(var a=e.length-1,h=a;h>=0&&e.charCodeAt(h)!==47;--h);if(h!==a){h===-1?e="":e=e.slice(0,h),i=o,r=0;continue}}else if(e.length===2||e.length===1){e="",i=o,r=0;continue}}t&&(e.length>0?e+="/..":e="..")}else e.length>0?e+="/"+n.slice(i+1,o):e=n.slice(i+1,o);i=o,r=0}else s===46&&r!==-1?++r:r=-1}return e}function xa(n,t){var e=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+i:e+n+i:i}var Wi={resolve:function(){for(var n="",t=!1,e,i=arguments.length-1;i>=-1&&!t;i--){var r;i>=0?r=arguments[i]:(e===void 0&&(e=Os.cwd()),r=e),Be(r),r.length!==0&&(n=r+"/"+n,t=r.charCodeAt(0)===47)}return n=On(n,!t),t?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(Be(n),n.length===0)return".";var t=n.charCodeAt(0)===47,e=n.charCodeAt(n.length-1)===47;return n=On(n,!t),n.length===0&&!t&&(n="."),n.length>0&&e&&(n+="/"),t?"/"+n:n},isAbsolute:function(n){return Be(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,t=0;t<arguments.length;++t){var e=arguments[t];Be(e),e.length>0&&(n===void 0?n=e:n+="/"+e)}return n===void 0?".":Wi.normalize(n)},relative:function(n,t){if(Be(n),Be(t),n===t||(n=Wi.resolve(n),t=Wi.resolve(t),n===t))return"";for(var e=1;e<n.length&&n.charCodeAt(e)===47;++e);for(var i=n.length,r=i-e,s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var o=t.length,a=o-s,h=r<a?r:a,d=-1,l=0;l<=h;++l){if(l===h){if(a>h){if(t.charCodeAt(s+l)===47)return t.slice(s+l+1);if(l===0)return t.slice(s+l)}else r>h&&(n.charCodeAt(e+l)===47?d=l:l===0&&(d=0));break}var g=n.charCodeAt(e+l),w=t.charCodeAt(s+l);if(g!==w)break;g===47&&(d=l)}var b="";for(l=e+d+1;l<=i;++l)(l===i||n.charCodeAt(l)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+t.slice(s+d):(s+=d,t.charCodeAt(s)===47&&++s,t.slice(s))},_makeLong:function(n){return n},dirname:function(n){if(Be(n),n.length===0)return".";for(var t=n.charCodeAt(0),e=t===47,i=-1,r=!0,s=n.length-1;s>=1;--s)if(t=n.charCodeAt(s),t===47){if(!r){i=s;break}}else r=!1;return i===-1?e?"/":".":e&&i===1?"//":n.slice(0,i)},basename:function(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Be(n);var e=0,i=-1,r=!0,s;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";var o=t.length-1,a=-1;for(s=n.length-1;s>=0;--s){var h=n.charCodeAt(s);if(h===47){if(!r){e=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(h===t.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=n.length),n.slice(e,i)}else{for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!r){e=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(e,i)}},extname:function(n){Be(n);for(var t=-1,e=0,i=-1,r=!0,s=0,o=n.length-1;o>=0;--o){var a=n.charCodeAt(o);if(a===47){if(!r){e=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":n.slice(t,i)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof n);return xa("/",n)},parse:function(n){Be(n);var t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;var e=n.charCodeAt(0),i=e===47,r;i?(t.root="/",r=1):r=0;for(var s=-1,o=0,a=-1,h=!0,d=n.length-1,l=0;d>=r;--d){if(e=n.charCodeAt(d),e===47){if(!h){o=d+1;break}continue}a===-1&&(h=!1,a=d+1),e===46?s===-1?s=d:l!==1&&(l=1):s!==-1&&(l=-1)}return s===-1||a===-1||l===0||l===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?t.base=t.name=n.slice(1,a):t.base=t.name=n.slice(o,a)):(o===0&&i?(t.name=n.slice(1,s),t.base=n.slice(1,a)):(t.name=n.slice(o,s),t.base=n.slice(o,a)),t.ext=n.slice(s,a)),o>0?t.dir=n.slice(0,o-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",posix:null},Aa=Wi;const Ye=mi(Aa);class Ve{constructor(t){var e,i;e=t.indexOf("://"),e>-1&&(t=new URL(t).pathname),i=this.parse(t),this.path=t,this.isDirectory(t)?this.directory=t:this.directory=i.dir+"/",this.filename=i.base,this.extension=i.ext.slice(1)}parse(t){return Ye.parse(t)}isAbsolute(t){return Ye.isAbsolute(t||this.path)}isDirectory(t){return t.charAt(t.length-1)==="/"}resolve(t){return Ye.resolve(this.directory,t)}relative(t){var e=t&&t.indexOf("://")>-1;return e?t:Ye.relative(this.directory,t)}splitPath(t){return this.splitPathRe.exec(t).slice(1)}toString(){return this.path}}class De{constructor(t,e){var i=t.indexOf("://")>-1,r=t,s;if(this.Url=void 0,this.href=t,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=e,!i&&e!==!1&&typeof e!="string"&&window&&window.location&&(this.base=window.location.href),i||this.base)try{this.base?this.Url=new URL(t,this.base):this.Url=new URL(t),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,r=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new Ve(this.base),r=s.resolve(r))}this.Path=new Ve(r),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(t){var e=t.indexOf("://")>-1,i;return e?t:(i=Ye.resolve(this.directory,t),this.origin+i)}relative(t){return Ye.relative(t,this.directory)}toString(){return this.href}}const ni=1,xe=3,Ca=9;class Tt{constructor(t,e,i){var r;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Tt))return new Tt(t,e,i);if(typeof e=="string"?this.base=this.parseComponent(e):typeof e=="object"&&e.steps&&(this.base=e),r=this.checkType(t),r==="string")return this.str=t,le(this,this.parse(t));if(r==="range")return le(this,this.fromRange(t,this.base,i));if(r==="node")return le(this,this.fromNode(t,this.base,i));if(r==="EpubCFI"&&t.path)return t;if(t)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(t){return this.isCfiString(t)?"string":t&&typeof t=="object"&&(Ds(t)==="Range"||typeof t.startContainer<"u")?"range":t&&typeof t=="object"&&typeof t.nodeType<"u"?"node":t&&typeof t=="object"&&t instanceof Tt?"EpubCFI":!1}parse(t){var e={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},i,r,s;return typeof t!="string"?{spinePos:-1}:(t.indexOf("epubcfi(")===0&&t[t.length-1]===")"&&(t=t.slice(8,t.length-1)),i=this.getChapterComponent(t),i?(e.base=this.parseComponent(i),r=this.getPathComponent(t),e.path=this.parseComponent(r),s=this.getRange(t),s&&(e.range=!0,e.start=this.parseComponent(s[0]),e.end=this.parseComponent(s[1])),e.spinePos=e.base.steps[1].index,e):{spinePos:-1})}parseComponent(t){var e={steps:[],terminal:{offset:null,assertion:null}},i=t.split(":"),r=i[0].split("/"),s;return i.length>1&&(s=i[1],e.terminal=this.parseTerminal(s)),r[0]===""&&r.shift(),e.steps=r.map(function(o){return this.parseStep(o)}.bind(this)),e}parseStep(t){var e,i,r,s,o;if(s=t.match(/\[(.*)\]/),s&&s[1]&&(o=s[1]),i=parseInt(t),!isNaN(i))return i%2===0?(e="element",r=i/2-1):(e="text",r=(i-1)/2),{type:e,index:r,id:o||null}}parseTerminal(t){var e,i,r=t.match(/\[(.*)\]/);return r&&r[1]?(e=parseInt(t.split("[")[0]),i=r[1]):e=parseInt(t),Zt(e)||(e=null),{offset:e,assertion:i}}getChapterComponent(t){var e=t.split("!");return e[0]}getPathComponent(t){var e=t.split("!");if(e[1])return e[1].split(",")[0]}getRange(t){var e=t.split(",");return e.length===3?[e[1],e[2]]:!1}getCharecterOffsetComponent(t){var e=t.split(":");return e[1]||""}joinSteps(t){return t?t.map(function(e){var i="";return e.type==="element"&&(i+=(e.index+1)*2),e.type==="text"&&(i+=1+2*e.index),e.id&&(i+="["+e.id+"]"),i}).join("/"):""}segmentString(t){var e="/";return e+=this.joinSteps(t.steps),t.terminal&&t.terminal.offset!=null&&(e+=":"+t.terminal.offset),t.terminal&&t.terminal.assertion!=null&&(e+="["+t.terminal.assertion+"]"),e}toString(){var t="epubcfi(";return t+=this.segmentString(this.base),t+="!",t+=this.segmentString(this.path),this.range&&this.start&&(t+=",",t+=this.segmentString(this.start)),this.range&&this.end&&(t+=",",t+=this.segmentString(this.end)),t+=")",t}compare(t,e){var i,r,s,o;if(typeof t=="string"&&(t=new Tt(t)),typeof e=="string"&&(e=new Tt(e)),t.spinePos>e.spinePos)return 1;if(t.spinePos<e.spinePos)return-1;t.range?(i=t.path.steps.concat(t.start.steps),s=t.start.terminal):(i=t.path.steps,s=t.path.terminal),e.range?(r=e.path.steps.concat(e.start.steps),o=e.start.terminal):(r=e.path.steps,o=e.path.terminal);for(var a=0;a<i.length;a++){if(!i[a])return-1;if(!r[a]||i[a].index>r[a].index)return 1;if(i[a].index<r[a].index)return-1}return i.length<r.length?-1:s.offset>o.offset?1:s.offset<o.offset?-1:0}step(t){var e=t.nodeType===xe?"text":"element";return{id:t.id,tagName:t.tagName,type:e,index:this.position(t)}}filteredStep(t,e){var i=this.filter(t,e),r;if(i)return r=i.nodeType===xe?"text":"element",{id:i.id,tagName:i.tagName,type:r,index:this.filteredPosition(i,e)}}pathTo(t,e,i){for(var r={steps:[],terminal:{offset:null,assertion:null}},s=t,o;s&&s.parentNode&&s.parentNode.nodeType!=Ca;)i?o=this.filteredStep(s,i):o=this.step(s),o&&r.steps.unshift(o),s=s.parentNode;return e!=null&&e>=0&&(r.terminal.offset=e,r.steps[r.steps.length-1].type!="text"&&r.steps.push({type:"text",index:0})),r}equalStep(t,e){return!t||!e?!1:t.index===e.index&&t.id===e.id&&t.type===e.type}fromRange(t,e,i){var r={range:!1,base:{},path:{},start:null,end:null},s=t.startContainer,o=t.endContainer,a=t.startOffset,h=t.endOffset,d=!1;if(i&&(d=s.ownerDocument.querySelector("."+i)!=null),typeof e=="string"?(r.base=this.parseComponent(e),r.spinePos=r.base.steps[1].index):typeof e=="object"&&(r.base=e),t.collapsed)d&&(a=this.patchOffset(s,a,i)),r.path=this.pathTo(s,a,i);else{r.range=!0,d&&(a=this.patchOffset(s,a,i)),r.start=this.pathTo(s,a,i),d&&(h=this.patchOffset(o,h,i)),r.end=this.pathTo(o,h,i),r.path={steps:[],terminal:null};var l=r.start.steps.length,g;for(g=0;g<l&&this.equalStep(r.start.steps[g],r.end.steps[g]);g++)g===l-1?r.start.terminal===r.end.terminal&&(r.path.steps.push(r.start.steps[g]),r.range=!1):r.path.steps.push(r.start.steps[g]);r.start.steps=r.start.steps.slice(r.path.steps.length),r.end.steps=r.end.steps.slice(r.path.steps.length)}return r}fromNode(t,e,i){var r={range:!1,base:{},path:{},start:null,end:null};return typeof e=="string"?(r.base=this.parseComponent(e),r.spinePos=r.base.steps[1].index):typeof e=="object"&&(r.base=e),r.path=this.pathTo(t,null,i),r}filter(t,e){var i,r,s,o,a,h=!1;return t.nodeType===xe?(h=!0,s=t.parentNode,i=t.parentNode.classList.contains(e)):(h=!1,i=t.classList.contains(e)),i&&h?(o=s.previousSibling,a=s.nextSibling,o&&o.nodeType===xe?r=o:a&&a.nodeType===xe&&(r=a),r||t):i&&!h?!1:t}patchOffset(t,e,i){if(t.nodeType!=xe)throw new Error("Anchor must be a text node");var r=t,s=e;for(t.parentNode.classList.contains(i)&&(r=t.parentNode);r.previousSibling;){if(r.previousSibling.nodeType===ni)if(r.previousSibling.classList.contains(i))s+=r.previousSibling.textContent.length;else break;else s+=r.previousSibling.textContent.length;r=r.previousSibling}return s}normalizedMap(t,e,i){var r={},s=-1,o,a=t.length,h,d;for(o=0;o<a;o++)h=t[o].nodeType,h===ni&&t[o].classList.contains(i)&&(h=xe),o>0&&h===xe&&d===xe?r[o]=s:e===h&&(s=s+1,r[o]=s),d=h;return r}position(t){var e,i;return t.nodeType===ni?(e=t.parentNode.children,e||(e=qr(t.parentNode)),i=Array.prototype.indexOf.call(e,t)):(e=this.textNodes(t.parentNode),i=e.indexOf(t)),i}filteredPosition(t,e){var i,r,s;return t.nodeType===ni?(i=t.parentNode.children,s=this.normalizedMap(i,ni,e)):(i=t.parentNode.childNodes,t.parentNode.classList.contains(e)&&(t=t.parentNode,i=t.parentNode.childNodes),s=this.normalizedMap(i,xe,e)),r=Array.prototype.indexOf.call(i,t),s[r]}stepsToXpath(t){var e=[".","*"];return t.forEach(function(i){var r=i.index+1;i.id?e.push("*[position()="+r+" and @id='"+i.id+"']"):i.type==="text"?e.push("text()["+r+"]"):e.push("*["+r+"]")}),e.join("/")}stepsToQuerySelector(t){var e=["html"];return t.forEach(function(i){var r=i.index+1;i.id?e.push("#"+i.id):i.type==="text"||e.push("*:nth-child("+r+")")}),e.join(">")}textNodes(t,e){return Array.prototype.slice.call(t.childNodes).filter(function(i){return i.nodeType===xe?!0:!!(e&&i.classList.contains(e))})}walkToNode(t,e,i){var r=e||document,s=r.documentElement,o,a,h=t.length,d;for(d=0;d<h&&(a=t[d],a.type==="element"?a.id?s=r.getElementById(a.id):(o=s.children||qr(s),s=o[a.index]):a.type==="text"&&(s=this.textNodes(s,i)[a.index]),!!s);d++);return s}findNode(t,e,i){var r=e||document,s,o;return!i&&typeof r.evaluate<"u"?(o=this.stepsToXpath(t),s=r.evaluate(o,r,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):i?s=this.walkToNode(t,r,i):s=this.walkToNode(t,r),s}fixMiss(t,e,i,r){var s=this.findNode(t.slice(0,-1),i,r),o=s.childNodes,a=this.normalizedMap(o,xe,r),h,d,l=t[t.length-1].index;for(let g in a){if(!a.hasOwnProperty(g))return;if(a[g]===l)if(h=o[g],d=h.textContent.length,e>d)e=e-d;else{h.nodeType===ni?s=h.childNodes[0]:s=h;break}}return{container:s,offset:e}}toRange(t,e){var i=t||document,r,s,o,a,h,d=this,l,g,w=e?i.querySelector("."+e)!=null:!1,b;if(typeof i.createRange<"u"?r=i.createRange():r=new Bs,d.range?(s=d.start,l=d.path.steps.concat(s.steps),a=this.findNode(l,i,w?e:null),o=d.end,g=d.path.steps.concat(o.steps),h=this.findNode(g,i,w?e:null)):(s=d.path,l=d.path.steps,a=this.findNode(d.path.steps,i,w?e:null)),a)try{s.terminal.offset!=null?r.setStart(a,s.terminal.offset):r.setStart(a,0)}catch{b=this.fixMiss(l,s.terminal.offset,i,w?e:null),r.setStart(b.container,b.offset)}else return console.log("No startContainer found for",this.toString()),null;if(h)try{o.terminal.offset!=null?r.setEnd(h,o.terminal.offset):r.setEnd(h,0)}catch{b=this.fixMiss(g,d.end.terminal.offset,i,w?e:null),r.setEnd(b.container,b.offset)}return r}isCfiString(t){return typeof t=="string"&&t.indexOf("epubcfi(")===0&&t[t.length-1]===")"}generateChapterComponent(t,e,i){var r=parseInt(e),s=(t+1)*2,o="/"+s+"/";return o+=(r+1)*2,i&&(o+="["+i+"]"),o}collapse(t){this.range&&(this.range=!1,t?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Ie{constructor(t){this.context=t||this,this.hooks=[]}register(){for(var t=0;t<arguments.length;++t)if(typeof arguments[t]=="function")this.hooks.push(arguments[t]);else for(var e=0;e<arguments[t].length;++e)this.hooks.push(arguments[t][e])}deregister(t){let e;for(let i=0;i<this.hooks.length;i++)if(e=this.hooks[i],e===t){this.hooks.splice(i,1);break}}trigger(){var t=arguments,e=this.context,i=[];return this.hooks.forEach(function(r){try{var s=r.apply(e,t)}catch(o){console.log(o)}s&&typeof s.then=="function"&&i.push(s)}),Promise.all(i)}list(){return this.hooks}clear(){return this.hooks=[]}}function Ls(n,t){var e,i,r=t.url,s=r.indexOf("://")>-1;n&&(i=Mt(n,"head"),e=Mt(i,"base"),e||(e=n.createElement("base"),i.insertBefore(e,i.firstChild)),!s&&window&&window.location&&(r=window.location.origin+r),e.setAttribute("href",r))}function ka(n,t){var e,i,r=t.canonical;n&&(e=Mt(n,"head"),i=Mt(e,"link[rel='canonical']"),i?i.setAttribute("href",r):(i=n.createElement("link"),i.setAttribute("rel","canonical"),i.setAttribute("href",r),e.appendChild(i)))}function Sa(n,t){var e,i,r=t.idref;n&&(e=Mt(n,"head"),i=Mt(e,"link[property='dc.identifier']"),i?i.setAttribute("content",r):(i=n.createElement("meta"),i.setAttribute("name","dc.identifier"),i.setAttribute("content",r),e.appendChild(i)))}function Na(n,t){var e=n.querySelectorAll("a[href]");if(e.length)for(var i=Mt(n.ownerDocument,"base"),r=i?i.getAttribute("href"):void 0,s=function(a){var h=a.getAttribute("href");if(h.indexOf("mailto:")!==0){var d=h.indexOf("://")>-1;if(d)a.setAttribute("target","_blank");else{var l;try{l=new De(h,r)}catch{}a.onclick=function(){return l&&l.hash?t(l.Path.path+l.hash):t(l?l.Path.path:h),!1}}}}.bind(this),o=0;o<e.length;o++)s(e[o])}function Ln(n,t,e){return t.forEach(function(i,r){i&&e[r]&&(i=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=n.replace(new RegExp(i,"g"),e[r]))}),n}function Bi(n,t,e,i){var r=typeof window<"u"?window.URL:!1,s=r?"blob":"arraybuffer",o=new Nt,a=new XMLHttpRequest,h=XMLHttpRequest.prototype,d;"overrideMimeType"in h||Object.defineProperty(h,"overrideMimeType",{value:function(){}}),e&&(a.withCredentials=!0),a.onreadystatechange=g,a.onerror=l,a.open("GET",n,!0);for(d in i)a.setRequestHeader(d,i[d]);t=="json"&&a.setRequestHeader("Accept","application/json"),t||(t=new Ve(n).extension),t=="blob"&&(a.responseType=s),Ri(t)&&a.overrideMimeType("text/xml"),t=="binary"&&(a.responseType="arraybuffer"),a.send();function l(w){o.reject(w)}function g(){if(this.readyState===XMLHttpRequest.DONE){var w=!1;if((this.responseType===""||this.responseType==="document")&&(w=this.responseXML),this.status===200||this.status===0||w){var b;if(!this.response&&!w)return o.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),o.promise;if(this.status===403)return o.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),o.promise;w?b=this.responseXML:Ri(t)?b=ze(this.response,"text/xml"):t=="xhtml"?b=ze(this.response,"application/xhtml+xml"):t=="html"||t=="htm"?b=ze(this.response,"text/html"):t=="json"?b=JSON.parse(this.response):t=="blob"?r?b=this.response:b=new Blob([this.response]):b=this.response,o.resolve(b)}else o.reject({status:this.status,message:this.response,stack:new Error().stack})}}return o.promise}class Ta{constructor(t,e){this.idref=t.idref,this.linear=t.linear==="yes",this.properties=t.properties,this.index=t.index,this.href=t.href,this.url=t.url,this.canonical=t.canonical,this.next=t.next,this.prev=t.prev,this.cfiBase=t.cfiBase,e?this.hooks=e:(this.hooks={},this.hooks.serialize=new Ie(this),this.hooks.content=new Ie(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(t){var e=t||this.request||Bi,i=new Nt,r=i.promise;return this.contents?i.resolve(this.contents):e(this.url).then(function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){i.resolve(this.contents)}.bind(this)).catch(function(s){i.reject(s)}),r}base(){return Ls(this.document,this)}render(t){var e=new Nt,i=e.promise;return this.output,this.load(t).then(function(r){var s=typeof navigator<"u"&&navigator.userAgent||"",o=s.indexOf("Trident")>=0,a;typeof XMLSerializer>"u"||o?a=_s:a=XMLSerializer;var h=new a;return this.output=h.serializeToString(r),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){e.resolve(this.output)}.bind(this)).catch(function(r){e.reject(r)}),i}find(t){var e=this,i=[],r=t.toLowerCase(),s=function(o){for(var a=o.textContent.toLowerCase(),h=e.document.createRange(),d,l,g=-1,w,b=150;l!=-1;)l=a.indexOf(r,g+1),l!=-1&&(h=e.document.createRange(),h.setStart(o,l),h.setEnd(o,l+r.length),d=e.cfiFromRange(h),o.textContent.length<b?w=o.textContent:(w=o.textContent.substring(l-b/2,l+b/2),w="..."+w+"..."),i.push({cfi:d,excerpt:w})),g=l};return er(e.document,function(o){s(o)}),i}search(t,e=5){if(typeof document.createTreeWalker>"u")return this.find(t);let i=[];const r=150,s=this,o=t.toLowerCase(),a=function(g){const w=g.reduce((b,D)=>b+D.textContent,"").toLowerCase().indexOf(o);if(w!=-1){const b=w+o.length;let D=0,O=0;if(w<g[0].length){let p;for(;D<g.length-1&&(O+=g[D].length,!(b<=O));)D+=1;let _=g[0],x=g[D],k=s.document.createRange();k.setStart(_,w);let F=g.slice(0,D).reduce((T,B)=>T+B.textContent.length,0);k.setEnd(x,F>b?b:b-F),p=s.cfiFromRange(k);let A=g.slice(0,D+1).reduce((T,B)=>T+B.textContent,"");A.length>r&&(A=A.substring(w-r/2,w+r/2),A="..."+A+"..."),i.push({cfi:p,excerpt:A})}}},h=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let d,l=[];for(;d=h.nextNode();)l.push(d),l.length==e&&(a(l.slice(0,e)),l=l.slice(1,e));return l.length>0&&a(l),i}reconcileLayoutSettings(t){var e={layout:t.layout,spread:t.spread,orientation:t.orientation};return this.properties.forEach(function(i){var r=i.replace("rendition:",""),s=r.indexOf("-"),o,a;s!=-1&&(o=r.slice(0,s),a=r.slice(s+1),e[o]=a)}),e}cfiFromRange(t){return new Tt(t,this.cfiBase).toString()}cfiFromElement(t){return new Tt(t,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class Da{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Ie,this.hooks.content=new Ie,this.hooks.content.register(Ls),this.hooks.content.register(ka),this.hooks.content.register(Sa),this.epubcfi=new Tt,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(t,e,i){this.items=t.spine,this.manifest=t.manifest,this.spineNodeIndex=t.spineNodeIndex,this.baseUrl=t.baseUrl||t.basePath||"",this.length=this.items.length,this.items.forEach((r,s)=>{var o=this.manifest[r.idref],a;r.index=s,r.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,r.index,r.id),r.href&&(r.url=e(r.href,!0),r.canonical=i(r.href)),o&&(r.href=o.href,r.url=e(r.href,!0),r.canonical=i(r.href),o.properties.length&&r.properties.push.apply(r.properties,o.properties)),r.linear==="yes"?(r.prev=function(){let h=r.index;for(;h>0;){let d=this.get(h-1);if(d&&d.linear)return d;h-=1}}.bind(this),r.next=function(){let h=r.index;for(;h<this.spineItems.length-1;){let d=this.get(h+1);if(d&&d.linear)return d;h+=1}}.bind(this)):(r.prev=function(){},r.next=function(){}),a=new Ta(r,this.hooks),this.append(a)}),this.loaded=!0}get(t){var e=0;if(typeof t>"u")for(;e<this.spineItems.length;){let i=this.spineItems[e];if(i&&i.linear)break;e+=1}else this.epubcfi.isCfiString(t)?e=new Tt(t).spinePos:typeof t=="number"||isNaN(t)===!1?e=t:typeof t=="string"&&t.indexOf("#")===0?e=this.spineById[t.substring(1)]:typeof t=="string"&&(t=t.split("#")[0],e=this.spineByHref[t]||this.spineByHref[encodeURI(t)]);return this.spineItems[e]||null}append(t){var e=this.spineItems.length;return t.index=e,this.spineItems.push(t),this.spineByHref[decodeURI(t.href)]=e,this.spineByHref[encodeURI(t.href)]=e,this.spineByHref[t.href]=e,this.spineById[t.idref]=e,e}prepend(t){return this.spineByHref[t.href]=0,this.spineById[t.idref]=0,this.spineItems.forEach(function(e,i){e.index=i}),0}remove(t){var e=this.spineItems.indexOf(t);if(e>-1)return delete this.spineByHref[t.href],delete this.spineById[t.idref],this.spineItems.splice(e,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let t=0;do{let e=this.get(t);if(e&&e.linear)return e;t+=1}while(t<this.spineItems.length)}last(){let t=this.spineItems.length-1;do{let e=this.get(t);if(e&&e.linear)return e;t-=1}while(t>=0)}destroy(){this.each(t=>t.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class Kr{constructor(t){this._q=[],this.context=t,this.tick=Yr,this.running=!1,this.paused=!1}enqueue(){var t,e,i,r=[].shift.call(arguments),s=arguments;if(!r)throw new Error("No Task Provided");return typeof r=="function"?(t=new Nt,e=t.promise,i={task:r,args:s,deferred:t,promise:e}):i={promise:r},this._q.push(i),this.paused==!1&&!this.running&&this.run(),i.promise}dequeue(){var t,e,i;if(this._q.length&&!this.paused){if(t=this._q.shift(),e=t.task,e)return i=e.apply(this.context,t.args),i&&typeof i.then=="function"?i.then(function(){t.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){t.deferred.reject.apply(this.context,arguments)}.bind(this)):(t.deferred.resolve.apply(this.context,i),t.promise);if(t.promise)return t.promise}else return t=new Nt,t.deferred.resolve(),t.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Nt),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const rr="0.3",Vi=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],at={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class Fs{constructor(t,e,i){this.spine=t,this.request=e,this.pause=i||100,this.q=new Kr(this),this.epubcfi=new Tt,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(t){return t&&(this.break=t),this.q.pause(),this.spine.each(function(e){e.linear&&this.q.enqueue(this.process.bind(this),e)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(t){return t.load(this.request).then(function(e){var i=new Nt,r=this.parse(e,t.cfiBase);return this._locations=this._locations.concat(r),t.unload(),this.processingTimeout=setTimeout(()=>i.resolve(r),this.pause),i.promise}.bind(this))}parse(t,e,i){var r=[],s,o=t.ownerDocument,a=Mt(o,"body"),h=0,d,l=i||this.break,g=function(w){var b=w.length,D,O=0;if(w.textContent.trim().length===0)return!1;for(h==0&&(s=this.createRange(),s.startContainer=w,s.startOffset=0),D=l-h,D>b&&(h+=b,O=b);O<b;)if(D=l-h,h===0&&(O+=1,s=this.createRange(),s.startContainer=w,s.startOffset=O),O+D>=b)h+=b-O,O=b;else{O+=D,s.endContainer=w,s.endOffset=O;let p=new Tt(s,e).toString();r.push(p),h=0}d=w};if(er(a,g.bind(this)),s&&s.startContainer&&d){s.endContainer=d,s.endOffset=d.length;let w=new Tt(s,e).toString();r.push(w),h=0}return r}generateFromWords(t,e,i){var r=t?new Tt(t):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(s){s.linear&&(r?s.index>=r.spinePos&&this.q.enqueue(this.processWords.bind(this),s,e,r,i):this.q.enqueue(this.processWords.bind(this),s,e,r,i))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(t,e,i,r){return r&&this._locationsWords.length>=r?Promise.resolve():t.load(this.request).then(function(s){var o=new Nt,a=this.parseWords(s,t,e,i),h=r-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(a.length>=r?a.slice(0,h):a),t.unload(),this.processingTimeout=setTimeout(()=>o.resolve(a),this.pause),o.promise}.bind(this))}countWords(t){return t=t.replace(/(^\s*)|(\s*$)/gi,""),t=t.replace(/[ ]{2,}/gi," "),t=t.replace(/\n /,`
`),t.split(" ").length}parseWords(t,e,i,r){var s=e.cfiBase,o=[],a=t.ownerDocument,h=Mt(a,"body"),d=i,l=r?r.spinePos!==e.index:!0,g;r&&e.index===r.spinePos&&(g=r.findNode(r.range?r.path.steps.concat(r.start.steps):r.path.steps,t.ownerDocument));var w=function(b){if(!l)if(b===g)l=!0;else return!1;if(b.textContent.length<10&&b.textContent.trim().length===0)return!1;var D=this.countWords(b.textContent),O,p=0;if(D===0)return!1;for(O=d-this._wordCounter,O>D&&(this._wordCounter+=D,p=D);p<D;)if(O=d-this._wordCounter,p+O>=D)this._wordCounter+=D-p,p=D;else{p+=O;let _=new Tt(b,s);o.push({cfi:_.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return er(h,w.bind(this)),o}locationFromCfi(t){let e;return Tt.prototype.isCfiString(t)&&(t=new Tt(t)),this._locations.length===0?-1:(e=gi(t,this._locations,this.epubcfi.compare),e>this.total?this.total:e)}percentageFromCfi(t){if(this._locations.length===0)return null;var e=this.locationFromCfi(t);return this.percentageFromLocation(e)}percentageFromLocation(t){return!t||!this.total?0:t/this.total}cfiFromLocation(t){var e=-1;return typeof t!="number"&&(t=parseInt(t)),t>=0&&t<this._locations.length&&(e=this._locations[t]),e}cfiFromPercentage(t){let e;if(t>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),t>=1){let i=new Tt(this._locations[this.total]);return i.collapse(),i.toString()}return e=Math.ceil(this.total*t),this.cfiFromLocation(e)}load(t){return typeof t=="string"?this._locations=JSON.parse(t):this._locations=t,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(t){var e;if(typeof t=="string")this._currentCfi=t;else if(typeof t=="number")this._current=t;else return;this._locations.length!==0&&(typeof t=="string"?(e=this.locationFromCfi(t),this._current=e):e=t,this.emit(at.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(e)}))}get currentLocation(){return this._current}set currentLocation(t){this.setCurrent(t)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}Pe(Fs.prototype);class Ia{constructor(t){this.packagePath="",this.directory="",this.encoding="",t&&this.parse(t)}parse(t){var e;if(!t)throw new Error("Container File Not Found");if(e=Mt(t,"rootfile"),!e)throw new Error("No RootFile Found");this.packagePath=e.getAttribute("full-path"),this.directory=Ye.dirname(this.packagePath),this.encoding=t.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class Fn{constructor(t){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},t&&this.parse(t)}parse(t){var e,i,r;if(!t)throw new Error("Package File Not Found");if(e=Mt(t,"metadata"),!e)throw new Error("No Metadata Found");if(i=Mt(t,"manifest"),!i)throw new Error("No Manifest Found");if(r=Mt(t,"spine"),!r)throw new Error("No Spine Found");return this.manifest=this.parseManifest(i),this.navPath=this.findNavPath(i),this.ncxPath=this.findNcxPath(i,r),this.coverPath=this.findCoverPath(t),this.spineNodeIndex=Ss(r),this.spine=this.parseSpine(r,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(t),this.metadata=this.parseMetadata(e),this.metadata.direction=r.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(t){var e={};return e.title=this.getElementText(t,"title"),e.creator=this.getElementText(t,"creator"),e.description=this.getElementText(t,"description"),e.pubdate=this.getElementText(t,"date"),e.publisher=this.getElementText(t,"publisher"),e.identifier=this.getElementText(t,"identifier"),e.language=this.getElementText(t,"language"),e.rights=this.getElementText(t,"rights"),e.modified_date=this.getPropertyText(t,"dcterms:modified"),e.layout=this.getPropertyText(t,"rendition:layout"),e.orientation=this.getPropertyText(t,"rendition:orientation"),e.flow=this.getPropertyText(t,"rendition:flow"),e.viewport=this.getPropertyText(t,"rendition:viewport"),e.media_active_class=this.getPropertyText(t,"media:active-class"),e.spread=this.getPropertyText(t,"rendition:spread"),e}parseManifest(t){var e={},i=We(t,"item"),r=Array.prototype.slice.call(i);return r.forEach(function(s){var o=s.getAttribute("id"),a=s.getAttribute("href")||"",h=s.getAttribute("media-type")||"",d=s.getAttribute("media-overlay")||"",l=s.getAttribute("properties")||"";e[o]={href:a,type:h,overlay:d,properties:l.length?l.split(" "):[]}}),e}parseSpine(t,e){var i=[],r=We(t,"itemref"),s=Array.prototype.slice.call(r);return s.forEach(function(o,a){var h=o.getAttribute("idref"),d=o.getAttribute("properties")||"",l=d.length?d.split(" "):[],g={id:o.getAttribute("id"),idref:h,linear:o.getAttribute("linear")||"yes",properties:l,index:a};i.push(g)}),i}findUniqueIdentifier(t){var e=t.documentElement.getAttribute("unique-identifier");if(!e)return"";var i=t.getElementById(e);return i&&i.localName==="identifier"&&i.namespaceURI==="http://purl.org/dc/elements/1.1/"&&i.childNodes.length>0?i.childNodes[0].nodeValue.trim():""}findNavPath(t){var e=ui(t,"item",{properties:"nav"});return e?e.getAttribute("href"):!1}findNcxPath(t,e){var i=ui(t,"item",{"media-type":"application/x-dtbncx+xml"}),r;return i||(r=e.getAttribute("toc"),r&&(i=t.querySelector(`#${r}`))),i?i.getAttribute("href"):!1}findCoverPath(t){var e=Mt(t,"package");e.getAttribute("version");var i=ui(t,"item",{properties:"cover-image"});if(i)return i.getAttribute("href");var r=ui(t,"meta",{name:"cover"});if(r){var s=r.getAttribute("content"),o=t.getElementById(s);return o?o.getAttribute("href"):""}else return!1}getElementText(t,e){var i=t.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",e),r;return!i||i.length===0?"":(r=i[0],r.childNodes.length?r.childNodes[0].nodeValue:"")}getPropertyText(t,e){var i=ui(t,"meta",{property:e});return i&&i.childNodes.length?i.childNodes[0].nodeValue:""}load(t){this.metadata=t.metadata;let e=t.readingOrder||t.spine;return this.spine=e.map((i,r)=>(i.index=r,i.linear=i.linear||"yes",i)),t.resources.forEach((i,r)=>{this.manifest[r]=i,i.rel&&i.rel[0]==="cover"&&(this.coverPath=i.href)}),this.spineNodeIndex=0,this.toc=t.toc.map((i,r)=>(i.label=i.title,i)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class Er{constructor(t){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,t&&this.parse(t)}parse(t){let e=t.nodeType,i,r;e&&(i=Mt(t,"html"),r=Mt(t,"ncx")),e?i?(this.toc=this.parseNav(t),this.landmarks=this.parseLandmarks(t)):r&&(this.toc=this.parseNcx(t)):this.toc=this.load(t),this.length=0,this.unpack(this.toc)}unpack(t){for(var e,i=0;i<t.length;i++)e=t[i],e.href&&(this.tocByHref[e.href]=i),e.id&&(this.tocById[e.id]=i),this.length++,e.subitems.length&&this.unpack(e.subitems)}get(t){var e;return t?(t.indexOf("#")===0?e=this.tocById[t.substring(1)]:t in this.tocByHref&&(e=this.tocByHref[t]),this.getByIndex(t,e,this.toc)):this.toc}getByIndex(t,e,i){if(i.length===0)return;const r=i[e];if(r&&(t===r.id||t===r.href))return r;{let s;for(let o=0;o<i.length&&(s=this.getByIndex(t,e,i[o].subitems),!s);++o);return s}}landmark(t){var e;return t?(e=this.landmarksByType[t],this.landmarks[e]):this.landmarks}parseNav(t){var e=ir(t,"nav","toc"),i=[];if(!e)return i;let r=hi(e,"ol",!0);return r&&(i=this.parseNavList(r)),i}parseNavList(t,e){const i=[];if(!t||!t.children)return i;for(let r=0;r<t.children.length;r++){const s=this.navItem(t.children[r],e);s&&i.push(s)}return i}navItem(t,e){let i=t.getAttribute("id")||void 0,r=hi(t,"a",!0)||hi(t,"span",!0);if(!r)return;let s=r.getAttribute("href")||"";i||(i=s);let o=r.textContent||"",a=[],h=hi(t,"ol",!0);return h&&(a=this.parseNavList(h,i)),{id:i,href:s,label:o,subitems:a,parent:e}}parseLandmarks(t){var e=ir(t,"nav","landmarks"),i=e?We(e,"li"):[],r=i.length,s,o=[],a;if(!i||r===0)return o;for(s=0;s<r;++s)a=this.landmarkItem(i[s]),a&&(o.push(a),this.landmarksByType[a.type]=s);return o}landmarkItem(t){let e=hi(t,"a",!0);if(!e)return;let i=e.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,r=e.getAttribute("href")||"",s=e.textContent||"";return{href:r,label:s,type:i}}parseNcx(t){var e=We(t,"navPoint"),i=e.length,r,s={},o=[],a,h;if(!e||i===0)return o;for(r=0;r<i;++r)a=this.ncxItem(e[r]),s[a.id]=a,a.parent?(h=s[a.parent],h.subitems.push(a)):o.push(a);return o}ncxItem(t){var e=t.getAttribute("id")||!1,i=Mt(t,"content"),r=i.getAttribute("src"),s=Mt(t,"navLabel"),o=s.textContent?s.textContent:"",a=[],h=t.parentNode,d;return h&&(h.nodeName==="navPoint"||h.nodeName.split(":").slice(-1)[0]==="navPoint")&&(d=h.getAttribute("id")),{id:e,href:r,label:o,subitems:a,parent:d}}load(t){return t.map(e=>(e.label=e.title,e.subitems=e.children?this.load(e.children):[],e))}forEach(t){return this.toc.forEach(t)}}var Ei={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},Ra=function(){var n,t,e,i,r={};for(n in Ei)if(Ei.hasOwnProperty(n)){for(t in Ei[n])if(Ei[n].hasOwnProperty(t))if(e=Ei[n][t],typeof e=="string")r[e]=n+"/"+t;else for(i=0;i<e.length;i++)r[e[i]]=n+"/"+t}return r}(),Ba="text/plain";function Oa(n){return n&&Ra[n.split(".").pop().toLowerCase()]||Ba}const di={lookup:Oa};class La{constructor(t,e){this.settings={replacements:e&&e.replacements||"base64",archive:e&&e.archive,resolver:e&&e.resolver,request:e&&e.request},this.process(t)}process(t){this.manifest=t,this.resources=Object.keys(t).map(function(e){return t[e]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(t){if(t.type==="application/xhtml+xml"||t.type==="text/html")return!0}),this.assets=this.resources.filter(function(t){if(t.type!=="application/xhtml+xml"&&t.type!=="text/html")return!0}),this.css=this.resources.filter(function(t){if(t.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(t){return t.href}.bind(this)),this.cssUrls=this.css.map(function(t){return t.href})}createUrl(t){var e=new De(t),i=di.lookup(e.filename);return this.settings.archive?this.settings.archive.createUrl(t,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(t,"blob").then(r=>Rs(r)).then(r=>Pr(r,i)):this.settings.request(t,"blob").then(r=>tr(r,i))}replacements(){if(this.settings.replacements==="none")return new Promise(function(e){e(this.urls)}.bind(this));var t=this.urls.map(e=>{var i=this.settings.resolver(e);return this.createUrl(i).catch(r=>(console.error(r),null))});return Promise.all(t).then(e=>(this.replacementUrls=e.filter(i=>typeof i=="string"),e))}replaceCss(t,e){var i=[];return t=t||this.settings.archive,e=e||this.settings.resolver,this.cssUrls.forEach(function(r){var s=this.createCssFile(r,t,e).then(function(o){var a=this.urls.indexOf(r);a>-1&&(this.replacementUrls[a]=o)}.bind(this));i.push(s)}.bind(this)),Promise.all(i)}createCssFile(t){var e;if(Ye.isAbsolute(t))return new Promise(function(o){o()});var i=this.settings.resolver(t),r;this.settings.archive?r=this.settings.archive.getText(i):r=this.settings.request(i,"text");var s=this.urls.map(o=>{var a=this.settings.resolver(o),h=new Ve(i).relative(a);return h});return r?r.then(o=>(o=Ln(o,s,this.replacementUrls),this.settings.replacements==="base64"?e=Pr(o,"text/css"):e=tr(o,"text/css"),e),o=>new Promise(function(a){a()})):new Promise(function(o){o()})}relativeTo(t,e){return e=e||this.settings.resolver,this.urls.map(function(i){var r=e(i),s=new Ve(t).relative(r);return s}.bind(this))}get(t){var e=this.urls.indexOf(t);if(e!==-1)return this.replacementUrls.length?new Promise(function(i,r){i(this.replacementUrls[e])}.bind(this)):this.createUrl(t)}substitute(t,e){var i;return e?i=this.relativeTo(e):i=this.urls,Ln(t,i,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class _r{constructor(t){this.pages=[],this.locations=[],this.epubcfi=new Tt,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,t&&(this.pageList=this.parse(t)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(t){var e=Mt(t,"html"),i=Mt(t,"ncx");if(e)return this.parseNav(t);if(i)return this.parseNcx(t)}parseNav(t){var e=ir(t,"nav","page-list"),i=e?We(e,"li"):[],r=i.length,s,o=[],a;if(!i||r===0)return o;for(s=0;s<r;++s)a=this.item(i[s]),o.push(a);return o}parseNcx(t){var e=[],i=0,r,s,o,a=0;if(s=Mt(t,"pageList"),!s||(o=We(s,"pageTarget"),a=o.length,!o||o.length===0))return e;for(i=0;i<a;++i)r=this.ncxItem(o[i]),e.push(r);return e}ncxItem(t){var e=Mt(t,"navLabel"),i=Mt(e,"text"),r=i.textContent,s=Mt(t,"content"),o=s.getAttribute("src"),a=parseInt(r,10);return{href:o,page:a}}item(t){var e=Mt(t,"a"),i=e.getAttribute("href")||"",r=e.textContent||"",s=parseInt(r),o=i.indexOf("epubcfi"),a,h,d;return o!=-1?(a=i.split("#"),h=a[0],d=a.length>1?a[1]:!1,{cfi:d,href:i,packageUrl:h,page:s}):{href:i,page:s}}process(t){t.forEach(function(e){this.pages.push(e.page),e.cfi&&this.locations.push(e.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(t){var e=-1;if(this.locations.length===0)return-1;var i=Ki(t,this.locations,this.epubcfi.compare);return i!=-1?e=this.pages[i]:(i=gi(t,this.locations,this.epubcfi.compare),e=i-1>=0?this.pages[i-1]:this.pages[0],e!==void 0||(e=-1)),e}cfiFromPage(t){var e=-1;typeof t!="number"&&(t=parseInt(t));var i=this.pages.indexOf(t);return i!=-1&&(e=this.locations[i]),e}pageFromPercentage(t){var e=Math.round(this.totalPages*t);return e}percentageFromPage(t){var e=(t-this.firstPage)/this.totalPages;return Math.round(e*1e3)/1e3}percentageFromCfi(t){var e=this.pageFromCfi(t),i=this.percentageFromPage(e);return i}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class zs{constructor(t){this.settings=t,this.name=t.layout||"reflowable",this._spread=t.spread!=="none",this._minSpreadWidth=t.minSpreadWidth||800,this._evenSpreads=t.evenSpreads||!1,t.flow==="scrolled"||t.flow==="scrolled-continuous"||t.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(t){return typeof t<"u"&&(t==="scrolled"||t==="scrolled-continuous"||t==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(t,e){return t&&(this._spread=t!=="none",this.update({spread:this._spread})),e>=0&&(this._minSpreadWidth=e),this._spread}calculate(t,e,i){var r=1,s=i||0,o=t,a=e,h=Math.floor(o/12),d,l,g,w;this._spread&&o>=this._minSpreadWidth?r=2:r=1,this.name==="reflowable"&&this._flow==="paginated"&&!(i>=0)&&(s=h%2===0?h:h-1),this.name==="pre-paginated"&&(s=0),r>1?(d=o/r-s,g=d+s):(d=o,g=o),this.name==="pre-paginated"&&r>1&&(o=d),l=d*r+s,w=o,this.width=o,this.height=a,this.spreadWidth=l,this.pageWidth=g,this.delta=w,this.columnWidth=d,this.gap=s,this.divisor=r,this.update({width:o,height:a,spreadWidth:l,pageWidth:g,delta:w,columnWidth:d,gap:s,divisor:r})}format(t,e,i){var r;return this.name==="pre-paginated"?r=t.fit(this.columnWidth,this.height,e):this._flow==="paginated"?r=t.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):i&&i==="horizontal"?r=t.size(null,this.height):r=t.size(this.width,null),r}count(t,e){let i,r;return this.name==="pre-paginated"?(i=1,r=1):this._flow==="paginated"?(e=e||this.delta,i=Math.ceil(t/e),r=i*this.divisor):(e=e||this.height,i=Math.ceil(t/e),r=i),{spreads:i,pages:r}}update(t){if(Object.keys(t).forEach(e=>{this.props[e]===t[e]&&delete t[e]}),Object.keys(t).length>0){let e=le(this.props,t);this.emit(at.LAYOUT.UPDATED,e,t)}}}Pe(zs.prototype);class Fa{constructor(t){this.rendition=t,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(t){if(t){if(typeof t=="string")return this.registerUrl("default",t);if(typeof t=="object")return this.registerRules("default",t)}}registerThemes(t){for(var e in t)t.hasOwnProperty(e)&&(typeof t[e]=="string"?this.registerUrl(e,t[e]):this.registerRules(e,t[e]))}registerCss(t,e){this._themes[t]={serialized:e},(this._injected[t]||t=="default")&&this.update(t)}registerUrl(t,e){var i=new De(e);this._themes[t]={url:i.toString()},(this._injected[t]||t=="default")&&this.update(t)}registerRules(t,e){this._themes[t]={rules:e},(this._injected[t]||t=="default")&&this.update(t)}select(t){var e=this._current,i;this._current=t,this.update(t),i=this.rendition.getContents(),i.forEach(r=>{r.removeClass(e),r.addClass(t)})}update(t){var e=this.rendition.getContents();e.forEach(i=>{this.add(t,i)})}inject(t){var e=[],i=this._themes,r;for(var s in i)i.hasOwnProperty(s)&&(s===this._current||s==="default")&&(r=i[s],(r.rules&&Object.keys(r.rules).length>0||r.url&&e.indexOf(r.url)===-1)&&this.add(s,t),this._injected.push(s));this._current!="default"&&t.addClass(this._current)}add(t,e){var i=this._themes[t];!i||!e||(i.url?e.addStylesheet(i.url):i.serialized?(e.addStylesheetCss(i.serialized,t),i.injected=!0):i.rules&&(e.addStylesheetRules(i.rules,t),i.injected=!0))}override(t,e,i){var r=this.rendition.getContents();this._overrides[t]={value:e,priority:i===!0},r.forEach(s=>{s.css(t,this._overrides[t].value,this._overrides[t].priority)})}removeOverride(t){var e=this.rendition.getContents();delete this._overrides[t],e.forEach(i=>{i.css(t)})}overrides(t){var e=this._overrides;for(var i in e)e.hasOwnProperty(i)&&t.css(i,e[i].value,e[i].priority)}fontSize(t){this.override("font-size",t)}font(t){this.override("font-family",t,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class nr{constructor(t,e,i,r=!1){this.layout=t,this.horizontal=i==="horizontal",this.direction=e||"ltr",this._dev=r}section(t){var e=this.findRanges(t),i=this.rangeListToCfiList(t.section.cfiBase,e);return i}page(t,e,i,r){var s=t&&t.document?t.document.body:!1,o;if(s){if(o=this.rangePairToCfiPair(e,{start:this.findStart(s,i,r),end:this.findEnd(s,i,r)}),this._dev===!0){let a=t.document,h=new Tt(o.start).toRange(a),d=new Tt(o.end).toRange(a),l=a.defaultView.getSelection(),g=a.createRange();l.removeAllRanges(),g.setStart(h.startContainer,h.startOffset),g.setEnd(d.endContainer,d.endOffset),l.addRange(g)}return o}}walk(t,e){if(!(t&&t.nodeType===Node.TEXT_NODE)){var i={acceptNode:function(h){return h.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},r=i.acceptNode;r.acceptNode=i.acceptNode;for(var s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,r,!1),o,a;(o=s.nextNode())&&(a=e(o),!a););return a}}findRanges(t){for(var e=[],i=t.contents.scrollWidth(),r=Math.ceil(i/this.layout.spreadWidth),s=r*this.layout.divisor,o=this.layout.columnWidth,a=this.layout.gap,h,d,l=0;l<s.pages;l++)h=(o+a)*l,d=o*(l+1)+a*l,e.push({start:this.findStart(t.document.body,h,d),end:this.findEnd(t.document.body,h,d)});return e}findStart(t,e,i){for(var r=[t],s,o,a=t;r.length;)if(s=r.shift(),o=this.walk(s,h=>{var d,l,g,w,b;if(b=zr(h),this.horizontal&&this.direction==="ltr"){if(d=this.horizontal?b.left:b.top,l=this.horizontal?b.right:b.bottom,d>=e&&d<=i||l>e)return h;a=h,r.push(h)}else if(this.horizontal&&this.direction==="rtl"){if(d=b.left,l=b.right,l<=i&&l>=e||d<i)return h;a=h,r.push(h)}else{if(g=b.top,w=b.bottom,g>=e&&g<=i||w>e)return h;a=h,r.push(h)}}),o)return this.findTextStartRange(o,e,i);return this.findTextStartRange(a,e,i)}findEnd(t,e,i){for(var r=[t],s,o=t,a;r.length;)if(s=r.shift(),a=this.walk(s,h=>{var d,l,g,w,b;if(b=zr(h),this.horizontal&&this.direction==="ltr"){if(d=Math.round(b.left),l=Math.round(b.right),d>i&&o)return o;if(l>i)return h;o=h,r.push(h)}else if(this.horizontal&&this.direction==="rtl"){if(d=Math.round(this.horizontal?b.left:b.top),l=Math.round(this.horizontal?b.right:b.bottom),l<e&&o)return o;if(d<e)return h;o=h,r.push(h)}else{if(g=Math.round(b.top),w=Math.round(b.bottom),g>i&&o)return o;if(w>i)return h;o=h,r.push(h)}}),a)return this.findTextEndRange(a,e,i);return this.findTextEndRange(o,e,i)}findTextStartRange(t,e,i){for(var r=this.splitTextNodeIntoRanges(t),s,o,a,h,d,l=0;l<r.length;l++)if(s=r[l],o=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(a=o.left,a>=e)return s}else if(this.horizontal&&this.direction==="rtl"){if(d=o.right,d<=i)return s}else if(h=o.top,h>=e)return s;return r[0]}findTextEndRange(t,e,i){for(var r=this.splitTextNodeIntoRanges(t),s,o,a,h,d,l,g,w=0;w<r.length;w++){if(o=r[w],a=o.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(h=a.left,d=a.right,h>i&&s)return s;if(d>i)return o}else if(this.horizontal&&this.direction==="rtl"){if(h=a.left,d=a.right,d<e&&s)return s;if(h<e)return o}else{if(l=a.top,g=a.bottom,l>i&&s)return s;if(g>i)return o}s=o}return r[r.length-1]}splitTextNodeIntoRanges(t,e){var i=[],r=t.textContent||"",s=r.trim(),o,a=t.ownerDocument,h=e||" ",d=s.indexOf(h);if(d===-1||t.nodeType!=Node.TEXT_NODE)return o=a.createRange(),o.selectNodeContents(t),[o];for(o=a.createRange(),o.setStart(t,0),o.setEnd(t,d),i.push(o),o=!1;d!=-1;)d=s.indexOf(h,d+1),d>0&&(o&&(o.setEnd(t,d),i.push(o)),o=a.createRange(),o.setStart(t,d+1));return o&&(o.setEnd(t,s.length),i.push(o)),i}rangePairToCfiPair(t,e){var i=e.start,r=e.end;i.collapse(!0),r.collapse(!1);let s=new Tt(i,t).toString(),o=new Tt(r,t).toString();return{start:s,end:o}}rangeListToCfiList(t,e){for(var i=[],r,s=0;s<e.length;s++)r=this.rangePairToCfiPair(t,e[s]),i.push(r);return i}axis(t){return t&&(this.horizontal=t==="horizontal"),this.horizontal}}const Ps=typeof navigator<"u",za=Ps&&/Chrome/.test(navigator.userAgent),zn=Ps&&!za&&/AppleWebKit/.test(navigator.userAgent),Pa=1;class Jr{constructor(t,e,i,r){this.epubcfi=new Tt,this.document=t,this.documentElement=this.document.documentElement,this.content=e||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=r||0,this.cfiBase=i||"",this.epubReadingSystem("epub.js",rr),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return Vi}width(t){var e=this.content;return t&&Zt(t)&&(t=t+"px"),t&&(e.style.width=t),parseInt(this.window.getComputedStyle(e).width)}height(t){var e=this.content;return t&&Zt(t)&&(t=t+"px"),t&&(e.style.height=t),parseInt(this.window.getComputedStyle(e).height)}contentWidth(t){var e=this.content||this.document.body;return t&&Zt(t)&&(t=t+"px"),t&&(e.style.width=t),parseInt(this.window.getComputedStyle(e).width)}contentHeight(t){var e=this.content||this.document.body;return t&&Zt(t)&&(t=t+"px"),t&&(e.style.height=t),parseInt(this.window.getComputedStyle(e).height)}textWidth(){let t,e,i=this.document.createRange(),r=this.content||this.document.body,s=Ji(r);return i.selectNodeContents(r),t=i.getBoundingClientRect(),e=t.width,s&&s.width&&(e+=s.width),Math.round(e)}textHeight(){let t,e,i=this.document.createRange(),r=this.content||this.document.body;return i.selectNodeContents(r),t=i.getBoundingClientRect(),e=t.bottom,Math.round(e)}scrollWidth(){var t=this.documentElement.scrollWidth;return t}scrollHeight(){var t=this.documentElement.scrollHeight;return t}overflow(t){return t&&(this.documentElement.style.overflow=t),this.window.getComputedStyle(this.documentElement).overflow}overflowX(t){return t&&(this.documentElement.style.overflowX=t),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(t){return t&&(this.documentElement.style.overflowY=t),this.window.getComputedStyle(this.documentElement).overflowY}css(t,e,i){var r=this.content||this.document.body;return e?r.style.setProperty(t,e,i?"important":""):r.style.removeProperty(t),this.window.getComputedStyle(r)[t]}viewport(t){var e=this.document.querySelector("meta[name='viewport']"),i={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},r=[],s={};if(e&&e.hasAttribute("content")){let o=e.getAttribute("content"),a=o.match(/width\s*=\s*([^,]*)/),h=o.match(/height\s*=\s*([^,]*)/),d=o.match(/initial-scale\s*=\s*([^,]*)/),l=o.match(/minimum-scale\s*=\s*([^,]*)/),g=o.match(/maximum-scale\s*=\s*([^,]*)/),w=o.match(/user-scalable\s*=\s*([^,]*)/);a&&a.length&&typeof a[1]<"u"&&(i.width=a[1]),h&&h.length&&typeof h[1]<"u"&&(i.height=h[1]),d&&d.length&&typeof d[1]<"u"&&(i.scale=d[1]),l&&l.length&&typeof l[1]<"u"&&(i.minimum=l[1]),g&&g.length&&typeof g[1]<"u"&&(i.maximum=g[1]),w&&w.length&&typeof w[1]<"u"&&(i.scalable=w[1])}return s=ks(t||{},i),t&&(s.width&&r.push("width="+s.width),s.height&&r.push("height="+s.height),s.scale&&r.push("initial-scale="+s.scale),s.scalable==="no"?(r.push("minimum-scale="+s.scale),r.push("maximum-scale="+s.scale),r.push("user-scalable="+s.scalable)):(s.scalable&&r.push("user-scalable="+s.scalable),s.minimum&&r.push("minimum-scale="+s.minimum),s.maximum&&r.push("minimum-scale="+s.maximum)),e||(e=this.document.createElement("meta"),e.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(e)),e.setAttribute("content",r.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(at.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let t=this.textWidth(),e=this.textHeight();(t!=this._size.width||e!=this._size.height)&&(this._size={width:t,height:e},this.onResize&&this.onResize(this._size),this.emit(at.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let t=this.content;t.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",t.style.transitionDuration="0.001ms",t.style.transitionTimingFunction="linear",t.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var t=this.document.styleSheets,e=function(a){a.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),i=0;i<t.length;i+=1){var r;try{r=t[i].cssRules}catch{return}if(!r)return;for(var s=0;s<r.length;s+=1)if(r[s].media){var o=this.window.matchMedia(r[s].media.mediaText);o.addListener(e)}}}resizeObservers(){this.observer=new ResizeObserver(t=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(e=>{this.resizeCheck()});let t={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,t)}imageLoadListeners(){for(var t=this.document.querySelectorAll("img"),e,i=0;i<t.length;i++)e=t[i],typeof e.naturalWidth<"u"&&e.naturalWidth===0&&(e.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(t,e){var i,r={left:0,top:0};if(!this.document)return r;if(this.epubcfi.isCfiString(t)){let s=new Tt(t).toRange(this.document,e);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let o=s.startContainer.textContent.indexOf(" ",s.startOffset);o==-1&&(o=s.startContainer.textContent.length),s.setEnd(s.startContainer,o)}}catch(o){console.error("setting end offset to start container length failed",o)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)i=s.startContainer.getBoundingClientRect(),r.left=i.left,r.top=i.top;else if(zn){let o=s.startContainer,a=new Range;try{o.nodeType===Pa?i=o.getBoundingClientRect():s.startOffset+2<o.length?(a.setStart(o,s.startOffset),a.setEnd(o,s.startOffset+2),i=a.getBoundingClientRect()):s.startOffset-2>0?(a.setStart(o,s.startOffset-2),a.setEnd(o,s.startOffset),i=a.getBoundingClientRect()):i=o.parentNode.getBoundingClientRect()}catch(h){console.error(h,h.stack)}}else i=s.getBoundingClientRect()}}else if(typeof t=="string"&&t.indexOf("#")>-1){let s=t.substring(t.indexOf("#")+1),o=this.document.getElementById(s);if(o)if(zn){let a=new Range;a.selectNode(o),i=a.getBoundingClientRect()}else i=o.getBoundingClientRect()}return i&&(r.left=i.left,r.top=i.top),r}addStylesheet(t){return new Promise(function(e,i){var r,s=!1;if(!this.document){e(!1);return}if(r=this.document.querySelector("link[href='"+t+"']"),r){e(!0);return}r=this.document.createElement("link"),r.type="text/css",r.rel="stylesheet",r.href=t,r.onload=r.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{e(!0)},1))},this.document.head.appendChild(r)}.bind(this))}_getStylesheetNode(t){var e;return t="epubjs-inserted-css-"+(t||""),this.document?(e=this.document.getElementById(t),e||(e=this.document.createElement("style"),e.id=t,this.document.head.appendChild(e)),e):!1}addStylesheetCss(t,e){if(!this.document||!t)return!1;var i;return i=this._getStylesheetNode(e),i.innerHTML=t,!0}addStylesheetRules(t,e){var i;if(!(!this.document||!t||t.length===0))if(i=this._getStylesheetNode(e).sheet,Object.prototype.toString.call(t)==="[object Array]")for(var r=0,s=t.length;r<s;r++){var o=1,a=t[r],h=t[r][0],d="";Object.prototype.toString.call(a[1][0])==="[object Array]"&&(a=a[1],o=0);for(var l=a.length;o<l;o++){var g=a[o];d+=g[0]+":"+g[1]+(g[2]?" !important":"")+`;
`}i.insertRule(h+"{"+d+"}",i.cssRules.length)}else Object.keys(t).forEach(w=>{const b=t[w];if(Array.isArray(b))b.forEach(D=>{const O=Object.keys(D).map(p=>`${p}:${D[p]}`).join(";");i.insertRule(`${w}{${O}}`,i.cssRules.length)});else{const D=Object.keys(b).map(O=>`${O}:${b[O]}`).join(";");i.insertRule(`${w}{${D}}`,i.cssRules.length)}})}addScript(t){return new Promise(function(e,i){var r,s=!1;if(!this.document){e(!1);return}r=this.document.createElement("script"),r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){e(!0)},1))},this.document.head.appendChild(r)}.bind(this))}addClass(t){var e;this.document&&(e=this.content||this.document.body,e&&e.classList.add(t))}removeClass(t){var e;this.document&&(e=this.content||this.document.body,e&&e.classList.remove(t))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),Vi.forEach(function(t){this.document.addEventListener(t,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(Vi.forEach(function(t){this.document.removeEventListener(t,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(t){this.emit(t.type,t)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(t){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var e=this.window.getSelection();this.triggerSelectedEvent(e)}.bind(this),250)}triggerSelectedEvent(t){var e,i;t&&t.rangeCount>0&&(e=t.getRangeAt(0),e.collapsed||(i=new Tt(e,this.cfiBase).toString(),this.emit(at.CONTENTS.SELECTED,i),this.emit(at.CONTENTS.SELECTED_RANGE,e)))}range(t,e){var i=new Tt(t);return i.toRange(this.document,e)}cfiFromRange(t,e){return new Tt(t,this.cfiBase,e).toString()}cfiFromNode(t,e){return new Tt(t,this.cfiBase,e).toString()}map(t){var e=new nr(t);return e.section()}size(t,e){var i={scale:1,scalable:"no"};this.layoutStyle("scrolling"),t>=0&&(this.width(t),i.width=t,this.css("padding","0 "+t/12+"px")),e>=0&&(this.height(e),i.height=e),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(i)}columns(t,e,i,r,s){let o=ai("column-axis"),a=ai("column-gap"),h=ai("column-width"),d=ai("column-fill"),l=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&l==="horizontal"&&this.direction(s),this.width(t),this.height(e),this.viewport({width:t,height:e,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),l==="vertical"?(this.css("padding-top",r/2+"px",!0),this.css("padding-bottom",r/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(o,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",r/2+"px",!0),this.css("padding-right",r/2+"px",!0),this.css(o,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(d,"auto"),this.css(a,r+"px"),this.css(h,i+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(t,e,i){var r="scale("+t+")",s="";this.css("transform-origin","top left"),(e>=0||i>=0)&&(s=" translate("+(e||0)+"px, "+(i||0)+"px )"),this.css("transform",r+s)}fit(t,e,i){var r=this.viewport(),s=parseInt(r.width),o=parseInt(r.height),a=t/s,h=e/o,d=a<h?a:h;if(this.layoutStyle("paginated"),this.width(s),this.height(o),this.overflow("hidden"),this.scaler(d,0,0),this.css("background-size",s*d+"px "+o*d+"px"),this.css("background-color","transparent"),i&&i.properties.includes("page-spread-left")){var l=t-s*d;this.css("margin-left",l+"px")}}direction(t){this.documentElement&&(this.documentElement.style.direction=t)}mapPage(t,e,i,r,s){var o=new nr(e,s);return o.page(this,t,i,r)}linksHandler(){Na(this.content,t=>{this.emit(at.CONTENTS.LINK_CLICKED,t)})}writingMode(t){let e=ai("writing-mode");return t&&this.documentElement&&(this.documentElement.style[e]=t),this.window.getComputedStyle(this.documentElement)[e]||""}layoutStyle(t){return t&&(this._layoutStyle=t,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(t,e){return navigator.epubReadingSystem={name:t,version:e,layoutStyle:this.layoutStyle(),hasFeature:function(i){switch(i){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}Pe(Jr.prototype);class qa{constructor(t){this.rendition=t,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(t,e,i,r,s,o){let a=encodeURI(e+t),h=new Tt(e).spinePos,d=new qs({type:t,cfiRange:e,data:i,sectionIndex:h,cb:r,className:s,styles:o});return this._annotations[a]=d,h in this._annotationsBySectionIndex?this._annotationsBySectionIndex[h].push(a):this._annotationsBySectionIndex[h]=[a],this.rendition.views().forEach(l=>{d.sectionIndex===l.index&&d.attach(l)}),d}remove(t,e){let i=encodeURI(t+e);if(i in this._annotations){let r=this._annotations[i];if(e&&r.type!==e)return;this.rendition.views().forEach(s=>{this._removeFromAnnotationBySectionIndex(r.sectionIndex,i),r.sectionIndex===s.index&&r.detach(s)}),delete this._annotations[i]}}_removeFromAnnotationBySectionIndex(t,e){this._annotationsBySectionIndex[t]=this._annotationsAt(t).filter(i=>i!==e)}_annotationsAt(t){return this._annotationsBySectionIndex[t]}highlight(t,e,i,r,s){return this.add("highlight",t,e,i,r,s)}underline(t,e,i,r,s){return this.add("underline",t,e,i,r,s)}mark(t,e,i){return this.add("mark",t,e,i)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(t){let e=t.index;e in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[e].forEach(i=>{this._annotations[i].attach(t)})}clear(t){let e=t.index;e in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[e].forEach(i=>{this._annotations[i].detach(t)})}show(){}hide(){}}class qs{constructor({type:t,cfiRange:e,data:i,sectionIndex:r,cb:s,className:o,styles:a}){this.type=t,this.cfiRange=e,this.data=i,this.sectionIndex=r,this.mark=void 0,this.cb=s,this.className=o,this.styles=a}update(t){this.data=t}attach(t){let{cfiRange:e,data:i,type:r,mark:s,cb:o,className:a,styles:h}=this,d;return r==="highlight"?d=t.highlight(e,i,o,a,h):r==="underline"?d=t.underline(e,i,o,a,h):r==="mark"&&(d=t.mark(e,i,o)),this.mark=d,this.emit(at.ANNOTATION.ATTACH,d),d}detach(t){let{cfiRange:e,type:i}=this,r;return t&&(i==="highlight"?r=t.unhighlight(e):i==="underline"?r=t.ununderline(e):i==="mark"&&(r=t.unmark(e))),this.mark=void 0,this.emit(at.ANNOTATION.DETACH,r),r}text(){}}Pe(qs.prototype);var qe={},sr={};Object.defineProperty(sr,"__esModule",{value:!0}),sr.createElement=Ms;function Ms(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}sr.default={createElement:Ms};var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.proxyMouse=Pn,Ai.clone=Us,Ai.default={proxyMouse:Pn};function Pn(n,t){function e(o){for(var a=t.length-1;a>=0;a--){var h=t[a],d=o.clientX,l=o.clientY;if(o.touches&&o.touches.length&&(d=o.touches[0].clientX,l=o.touches[0].clientY),!!Ma(h,n,d,l)){h.dispatchEvent(Us(o));break}}}if(n.nodeName==="iframe"||n.nodeName==="IFRAME")try{this.target=n.contentDocument}catch{this.target=n}else this.target=n;for(var i=["mouseup","mousedown","click","touchstart"],r=0;r<i.length;r++){var s=i[r];this.target.addEventListener(s,function(o){return e(o)},!1)}}function Us(n){var t=Object.assign({},n,{bubbles:!1});try{return new MouseEvent(n.type,t)}catch{var e=document.createEvent("MouseEvents");return e.initMouseEvent(n.type,!1,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),e}}function Ma(n,t,e,i){var r=t.getBoundingClientRect();function s(l,g,w){var b=l.top-r.top,D=l.left-r.left,O=b+l.height,p=D+l.width;return b<=w&&D<=g&&O>w&&p>g}var o=n.getBoundingClientRect();if(!s(o,e,i))return!1;for(var a=n.getClientRects(),h=0,d=a.length;h<d;h++)if(s(a[h],e,i))return!0;return!1}var or,Qr;Object.defineProperty(qe,"__esModule",{value:!0});var js=qe.Underline=Qr=qe.Highlight=qe.Mark=or=qe.Pane=void 0,Ua=function n(t,e,i){t===null&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(r===void 0){var s=Object.getPrototypeOf(t);return s===null?void 0:n(s,e,i)}else{if("value"in r)return r.value;var o=r.get;return o===void 0?void 0:o.call(i)}},hr=function(){function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),ja=sr,Oi=Ws(ja),Wa=Ai,Va=Ws(Wa);function Ws(n){return n&&n.__esModule?n:{default:n}}function Vs(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function Hs(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function lr(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}or=qe.Pane=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;lr(this,n),this.target=t,this.element=Oi.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),Va.default.proxyMouse(this.target,this.marks),this.container=e,this.container.appendChild(this.element),this.render()}return hr(n,[{key:"addMark",value:function(t){var e=Oi.default.createElement("g");return this.element.appendChild(e),t.bind(e,this.container),this.marks.push(t),t.render(),t}},{key:"removeMark",value:function(t){var e=this.marks.indexOf(t);if(e!==-1){var i=t.unbind();this.element.removeChild(i),this.marks.splice(e,1)}}},{key:"render",value:function(){Ya(this.element,Xa(this.target,this.container));var t=!0,e=!1,i=void 0;try{for(var r=this.marks[Symbol.iterator](),s;!(t=(s=r.next()).done);t=!0){var o=s.value;o.render()}}catch(a){e=!0,i=a}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}}}]),n}();var Ha=qe.Mark=function(){function n(){lr(this,n),this.element=null}return hr(n,[{key:"bind",value:function(t,e){this.element=t,this.container=e}},{key:"unbind",value:function(){var t=this.element;return this.element=null,t}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(t){this.element&&this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var t=[],e=this.element.firstChild;e;)t.push(e.getBoundingClientRect()),e=e.nextSibling;return t}},{key:"filteredRanges",value:function(){var t=Array.from(this.range.getClientRects());return t.filter(function(e){for(var i=0;i<t.length;i++){if(t[i]===e)return!0;var r=Za(t[i],e);if(r)return!1}return!0})}}]),n}(),Ga=Qr=qe.Highlight=function(n){Hs(t,n);function t(e,i,r,s){lr(this,t);var o=Vs(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.range=e,o.className=i,o.data=r||{},o.attributes=s||{},o}return hr(t,[{key:"bind",value:function(e,i){Ua(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bind",this).call(this,e,i);for(var r in this.data)this.data.hasOwnProperty(r)&&(this.element.dataset[r]=this.data[r]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&this.element.setAttribute(r,this.attributes[r]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var e=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),r=this.element.getBoundingClientRect(),s=this.container.getBoundingClientRect(),o=0,a=i.length;o<a;o++){var h=i[o],d=Oi.default.createElement("rect");d.setAttribute("x",h.left-r.left+s.left),d.setAttribute("y",h.top-r.top+s.top),d.setAttribute("height",h.height),d.setAttribute("width",h.width),e.appendChild(d)}this.element.appendChild(e)}}]),t}(Ha);js=qe.Underline=function(n){Hs(t,n);function t(e,i,r,s){return lr(this,t),Vs(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,s))}return hr(t,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var e=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),r=this.element.getBoundingClientRect(),s=this.container.getBoundingClientRect(),o=0,a=i.length;o<a;o++){var h=i[o],d=Oi.default.createElement("rect");d.setAttribute("x",h.left-r.left+s.left),d.setAttribute("y",h.top-r.top+s.top),d.setAttribute("height",h.height),d.setAttribute("width",h.width),d.setAttribute("fill","none");var l=Oi.default.createElement("line");l.setAttribute("x1",h.left-r.left+s.left),l.setAttribute("x2",h.left-r.left+s.left+h.width),l.setAttribute("y1",h.top-r.top+s.top+h.height-1),l.setAttribute("y2",h.top-r.top+s.top+h.height-1),l.setAttribute("stroke-width",1),l.setAttribute("stroke","black"),l.setAttribute("stroke-linecap","square"),e.appendChild(d),e.appendChild(l)}this.element.appendChild(e)}}]),t}(Ga);function Xa(n,t){var e=t.getBoundingClientRect(),i=n.getBoundingClientRect();return{top:i.top-e.top,left:i.left-e.left,height:n.scrollHeight,width:n.scrollWidth}}function Ya(n,t){n.style.setProperty("top",t.top+"px","important"),n.style.setProperty("left",t.left+"px","important"),n.style.setProperty("height",t.height+"px","important"),n.style.setProperty("width",t.width+"px","important")}function Za(n,t){return t.right<=n.right&&t.left>=n.left&&t.top>=n.top&&t.bottom<=n.bottom}class Gs{constructor(t,e){this.settings=le({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},e||{}),this.id="epubjs-view-"+ur(),this.section=t,this.index=t.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Tt,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(t){var e=document.createElement("div");return e.classList.add("epub-view"),e.style.height="0px",e.style.width="0px",e.style.overflow="hidden",e.style.position="relative",e.style.display="block",t&&t=="horizontal"?e.style.flex="none":e.style.flex="initial",e}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=ji(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(t,e){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(t)),this.sectionRender.then(function(i){return this.load(i)}.bind(this)).then(function(){let i=this.contents.writingMode(),r;return this.settings.flow==="scrolled"?r=i.indexOf("vertical")===0?"horizontal":"vertical":r=i.indexOf("vertical")===0?"vertical":"horizontal",i.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(r),this.emit(at.VIEWS.AXIS,r),this.setWritingMode(i),this.emit(at.VIEWS.WRITING_MODE,i),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,o)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}.bind(this),function(i){return this.emit(at.VIEWS.LOAD_ERROR,i),new Promise((r,s)=>{s(i)})}.bind(this)).then(function(){this.emit(at.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(t,e){var i=t||this.settings.width,r=e||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",i,r):this.settings.axis==="horizontal"?this.lock("height",i,r):this.lock("width",i,r),this.settings.width=i,this.settings.height=r}lock(t,e,i){var r=Ji(this.element),s;this.iframe?s=Ji(this.iframe):s={width:0,height:0},t=="width"&&Zt(e)&&(this.lockedWidth=e-r.width-s.width),t=="height"&&Zt(i)&&(this.lockedHeight=i-r.height-s.height),t==="both"&&Zt(e)&&Zt(i)&&(this.lockedWidth=e-r.width-s.width,this.lockedHeight=i-r.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(t){var e=this.lockedWidth,i=this.lockedHeight,r;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(e=this.layout.columnWidth,i=this.layout.height):this.settings.axis==="horizontal"?(e=this.contents.textWidth(),e%this.layout.pageWidth>0&&(e=Math.ceil(e/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(r=e/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&r%2>0&&(e+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(i=this.contents.textHeight(),this.settings.flow==="paginated"&&i%this.layout.height>0&&(i=Math.ceil(i/this.layout.height)*this.layout.height)),(this._needsReframe||e!=this._width||i!=this._height)&&this.reframe(e,i),this._expanding=!1)}reframe(t,e){var i;Zt(t)&&(this.element.style.width=t+"px",this.iframe.style.width=t+"px",this._width=t),Zt(e)&&(this.element.style.height=e+"px",this.iframe.style.height=e+"px",this._height=e);let r=this.prevBounds?t-this.prevBounds.width:t,s=this.prevBounds?e-this.prevBounds.height:e;i={width:t,height:e,widthDelta:r,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let o;for(let a in this.marks)this.marks.hasOwnProperty(a)&&(o=this.marks[a],this.placeMark(o.element,o.range))}),this.onResize(this,i),this.emit(at.VIEWS.RESIZED,i),this.prevBounds=i,this.elementBounds=ji(this.element)}load(t){var e=new Nt,i=e.promise;if(!this.iframe)return e.reject(new Error("No Iframe Available")),i;if(this.iframe.onload=function(s){this.onLoad(s,e)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=tr(t,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=t,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return e.reject(new Error("No Document Available")),i;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var r=this;MSApp.execUnsafeLocalFunction(function(){r.iframe.contentDocument.write(t)})}else this.iframe.contentDocument.write(t);this.iframe.contentDocument.close()}return i}onLoad(t,e){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Jr(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var i=this.document.querySelector("link[rel='canonical']");i?i.setAttribute("href",this.section.canonical):(i=this.document.createElement("link"),i.setAttribute("rel","canonical"),i.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(i)),this.contents.on(at.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(at.CONTENTS.RESIZE,r=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),e.resolve(this.contents)}setLayout(t){this.layout=t,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(t){this.settings.axis=t,t=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(t){this.writingMode=t}addListeners(){}removeListeners(t){}display(t){var e=new Nt;return this.displayed?e.resolve(this):this.render(t).then(function(){this.emit(at.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,e.resolve(this)}.bind(this),function(i){e.reject(i,this)}),e.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(at.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(at.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(t){this.iframe.getBoundingClientRect();var e=this.contents.locationOf(t,this.settings.ignoreClass);return{left:e.left,top:e.top}}onDisplayed(t){}onResize(t,e){}bounds(t){return(t||!this.elementBounds)&&(this.elementBounds=ji(this.element)),this.elementBounds}highlight(t,e={},i,r="epubjs-hl",s={}){if(!this.contents)return;const o=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let a=this.contents.range(t),h=()=>{this.emit(at.VIEWS.MARK_CLICKED,t,e)};e.epubcfi=t,this.pane||(this.pane=new or(this.iframe,this.element));let d=new Qr(a,r,e,o),l=this.pane.addMark(d);return this.highlights[t]={mark:l,element:l.element,listeners:[h,i]},l.element.setAttribute("ref",r),l.element.addEventListener("click",h),l.element.addEventListener("touchstart",h),i&&(l.element.addEventListener("click",i),l.element.addEventListener("touchstart",i)),l}underline(t,e={},i,r="epubjs-ul",s={}){if(!this.contents)return;const o=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let a=this.contents.range(t),h=()=>{this.emit(at.VIEWS.MARK_CLICKED,t,e)};e.epubcfi=t,this.pane||(this.pane=new or(this.iframe,this.element));let d=new js(a,r,e,o),l=this.pane.addMark(d);return this.underlines[t]={mark:l,element:l.element,listeners:[h,i]},l.element.setAttribute("ref",r),l.element.addEventListener("click",h),l.element.addEventListener("touchstart",h),i&&(l.element.addEventListener("click",i),l.element.addEventListener("touchstart",i)),l}mark(t,e={},i){if(!this.contents)return;if(t in this.marks)return this.marks[t];let r=this.contents.range(t);if(!r)return;let s=r.commonAncestorContainer,o=s.nodeType===1?s:s.parentNode,a=d=>{this.emit(at.VIEWS.MARK_CLICKED,t,e)};r.collapsed&&s.nodeType===1?(r=new Range,r.selectNodeContents(s)):r.collapsed&&(r=new Range,r.selectNodeContents(o));let h=this.document.createElement("a");return h.setAttribute("ref","epubjs-mk"),h.style.position="absolute",h.dataset.epubcfi=t,e&&Object.keys(e).forEach(d=>{h.dataset[d]=e[d]}),i&&(h.addEventListener("click",i),h.addEventListener("touchstart",i)),h.addEventListener("click",a),h.addEventListener("touchstart",a),this.placeMark(h,r),this.element.appendChild(h),this.marks[t]={element:h,range:r,listeners:[a,i]},o}placeMark(t,e){let i,r,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let a=e.getBoundingClientRect();i=a.top,r=a.right}else{let a=e.getClientRects(),h;for(var o=0;o!=a.length;o++)h=a[o],(!s||h.left<s)&&(s=h.left,r=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,i=h.top)}t.style.top=`${i}px`,t.style.left=`${r}px`}unhighlight(t){let e;t in this.highlights&&(e=this.highlights[t],this.pane.removeMark(e.mark),e.listeners.forEach(i=>{i&&(e.element.removeEventListener("click",i),e.element.removeEventListener("touchstart",i))}),delete this.highlights[t])}ununderline(t){let e;t in this.underlines&&(e=this.underlines[t],this.pane.removeMark(e.mark),e.listeners.forEach(i=>{i&&(e.element.removeEventListener("click",i),e.element.removeEventListener("touchstart",i))}),delete this.underlines[t])}unmark(t){let e;t in this.marks&&(e=this.marks[t],this.element.removeChild(e.element),e.listeners.forEach(i=>{i&&(e.element.removeEventListener("click",i),e.element.removeEventListener("touchstart",i))}),delete this.marks[t])}destroy(){for(let t in this.highlights)this.unhighlight(t);for(let t in this.underlines)this.ununderline(t);for(let t in this.marks)this.unmark(t);this.blobUrl&&Ts(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}Pe(Gs.prototype);function $a(){var n="reverse",t=Ka();return document.body.appendChild(t),t.scrollLeft>0?n="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(t.children[0].children[1].scrollIntoView(),t.scrollLeft<0&&(n="negative")):(t.scrollLeft=1,t.scrollLeft===0&&(n="negative")),document.body.removeChild(t),n}function Ka(){var n=document.createElement("div");n.dir="rtl",n.style.position="fixed",n.style.width="1px",n.style.height="1px",n.style.top="0px",n.style.left="0px",n.style.overflow="hidden";var t=document.createElement("div");t.style.width="2px";var e=document.createElement("span");e.style.width="1px",e.style.display="inline-block";var i=document.createElement("span");return i.style.width="1px",i.style.display="inline-block",t.appendChild(e),t.appendChild(i),n.appendChild(t),n}function Ja(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var tn=Ja,Qa=typeof Ce=="object"&&Ce&&Ce.Object===Object&&Ce,tu=Qa,eu=tu,iu=typeof self=="object"&&self&&self.Object===Object&&self,ru=eu||iu||Function("return this")(),Xs=ru,nu=Xs,su=function(){return nu.Date.now()},ou=su,au=/\s/;function uu(n){for(var t=n.length;t--&&au.test(n.charAt(t)););return t}var hu=uu,lu=hu,cu=/^\s+/;function du(n){return n&&n.slice(0,lu(n)+1).replace(cu,"")}var fu=du,pu=Xs,gu=pu.Symbol,Ys=gu,qn=Ys,Zs=Object.prototype,mu=Zs.hasOwnProperty,vu=Zs.toString,_i=qn?qn.toStringTag:void 0;function yu(n){var t=mu.call(n,_i),e=n[_i];try{n[_i]=void 0;var i=!0}catch{}var r=vu.call(n);return i&&(t?n[_i]=e:delete n[_i]),r}var wu=yu,bu=Object.prototype,Eu=bu.toString;function _u(n){return Eu.call(n)}var xu=_u,Mn=Ys,Au=wu,Cu=xu,ku="[object Null]",Su="[object Undefined]",Un=Mn?Mn.toStringTag:void 0;function Nu(n){return n==null?n===void 0?Su:ku:Un&&Un in Object(n)?Au(n):Cu(n)}var Tu=Nu;function Du(n){return n!=null&&typeof n=="object"}var Iu=Du,Ru=Tu,Bu=Iu,Ou="[object Symbol]";function Lu(n){return typeof n=="symbol"||Bu(n)&&Ru(n)==Ou}var Fu=Lu,zu=fu,jn=tn,Pu=Fu,Wn=NaN,qu=/^[-+]0x[0-9a-f]+$/i,Mu=/^0b[01]+$/i,Uu=/^0o[0-7]+$/i,ju=parseInt;function Wu(n){if(typeof n=="number")return n;if(Pu(n))return Wn;if(jn(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=jn(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=zu(n);var e=Mu.test(n);return e||Uu.test(n)?ju(n.slice(2),e?2:8):qu.test(n)?Wn:+n}var Vu=Wu,Hu=tn,xr=ou,Vn=Vu,Gu="Expected a function",Xu=Math.max,Yu=Math.min;function Zu(n,t,e){var i,r,s,o,a,h,d=0,l=!1,g=!1,w=!0;if(typeof n!="function")throw new TypeError(Gu);t=Vn(t)||0,Hu(e)&&(l=!!e.leading,g="maxWait"in e,s=g?Xu(Vn(e.maxWait)||0,t):s,w="trailing"in e?!!e.trailing:w);function b(T){var B=i,z=r;return i=r=void 0,d=T,o=n.apply(z,B),o}function D(T){return d=T,a=setTimeout(_,t),l?b(T):o}function O(T){var B=T-h,z=T-d,M=t-B;return g?Yu(M,s-z):M}function p(T){var B=T-h,z=T-d;return h===void 0||B>=t||B<0||g&&z>=s}function _(){var T=xr();if(p(T))return x(T);a=setTimeout(_,O(T))}function x(T){return a=void 0,w&&i?b(T):(i=r=void 0,o)}function k(){a!==void 0&&clearTimeout(a),d=0,i=h=r=a=void 0}function F(){return a===void 0?o:x(xr())}function A(){var T=xr(),B=p(T);if(i=arguments,r=this,h=T,B){if(a===void 0)return D(h);if(g)return clearTimeout(a),a=setTimeout(_,t),b(h)}return a===void 0&&(a=setTimeout(_,t)),o}return A.cancel=k,A.flush=F,A}var $s=Zu;const $u=mi($s);var Ku=$s,Ju=tn,Qu="Expected a function";function th(n,t,e){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(Qu);return Ju(e)&&(i="leading"in e?!!e.leading:i,r="trailing"in e?!!e.trailing:r),Ku(n,t,{leading:i,maxWait:t,trailing:r})}var eh=th;const ih=mi(eh);class rh{constructor(t){this.settings=t||{},this.id="epubjs-container-"+ur(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(t){let e=t.height,i=t.width,r=t.overflow||!1,s=t.axis||"vertical",o=t.direction;le(this.settings,t),t.height&&Zt(t.height)&&(e=t.height+"px"),t.width&&Zt(t.width)&&(i=t.width+"px");let a=document.createElement("div");return a.id=this.id,a.classList.add("epub-container"),a.style.wordSpacing="0",a.style.lineHeight="0",a.style.verticalAlign="top",a.style.position="relative",s==="horizontal"&&(a.style.display="flex",a.style.flexDirection="row",a.style.flexWrap="nowrap"),i&&(a.style.width=i),e&&(a.style.height=e),r&&(r==="scroll"&&s==="vertical"?(a.style["overflow-y"]=r,a.style["overflow-x"]="hidden"):r==="scroll"&&s==="horizontal"?(a.style["overflow-y"]="hidden",a.style["overflow-x"]=r):a.style.overflow=r),o&&(a.dir=o,a.style.direction=o),o&&this.settings.fullsize&&(document.body.style.direction=o),a}wrap(t){var e=document.createElement("div");return e.style.visibility="hidden",e.style.overflow="hidden",e.style.width="0",e.style.height="0",e.appendChild(t),e}getElement(t){var e;if(As(t)?e=t:typeof t=="string"&&(e=document.getElementById(t)),!e)throw new Error("Not an Element");return e}attachTo(t){var e=this.getElement(t),i;if(e)return this.settings.hidden?i=this.wrapper:i=this.container,e.appendChild(i),this.element=e,e}getContainer(){return this.container}onResize(t){(!Zt(this.settings.width)||!Zt(this.settings.height))&&(this.resizeFunc=ih(t,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(t){this.orientationChangeFunc=t,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(t,e){var i;let r=t||this.settings.width,s=e||this.settings.height;t===null?(i=this.element.getBoundingClientRect(),i.width&&(t=Math.floor(i.width),this.container.style.width=t+"px")):Zt(t)?this.container.style.width=t+"px":this.container.style.width=t,e===null?(i=i||this.element.getBoundingClientRect(),i.height&&(e=i.height,this.container.style.height=e+"px")):Zt(e)?this.container.style.height=e+"px":this.container.style.height=e,Zt(t)||(t=this.container.clientWidth),Zt(e)||(e=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let o=Qi(),a=window.getComputedStyle(document.body),h={left:parseFloat(a["padding-left"])||0,right:parseFloat(a["padding-right"])||0,top:parseFloat(a["padding-top"])||0,bottom:parseFloat(a["padding-bottom"])||0};return r||(t=o.width-h.left-h.right),(this.settings.fullsize&&!s||!s)&&(e=o.height-h.top-h.bottom),{width:t-this.containerPadding.left-this.containerPadding.right,height:e-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let t;return this.container.style.overflow!=="visible"&&(t=this.container&&this.container.getBoundingClientRect()),!t||!t.width||!t.height?Qi():t}getSheet(){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet}addStyleRules(t,e){var i="#"+this.id+" ",r="";this.sheet||(this.sheet=this.getSheet()),e.forEach(function(s){for(var o in s)s.hasOwnProperty(o)&&(r+=o+":"+s[o]+";")}),this.sheet.insertRule(i+t+" {"+r+"}",0)}axis(t){t==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=t}direction(t){this.container&&(this.container.dir=t,this.container.style.direction=t),this.settings.fullsize&&(document.body.style.direction=t),this.settings.dir=t}overflow(t){this.container&&(t==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=t,this.container.style["overflow-x"]="hidden"):t==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=t):this.container.style.overflow=t),this.settings.overflow=t}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class nh{constructor(t){this.container=t,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(t){return this._views.indexOf(t)}slice(){return this._views.slice.apply(this._views,arguments)}get(t){return this._views[t]}append(t){return this._views.push(t),this.container&&this.container.appendChild(t.element),this.length++,t}prepend(t){return this._views.unshift(t),this.container&&this.container.insertBefore(t.element,this.container.firstChild),this.length++,t}insert(t,e){return this._views.splice(e,0,t),this.container&&(e<this.container.children.length?this.container.insertBefore(t.element,this.container.children[e]):this.container.appendChild(t.element)),this.length++,t}remove(t){var e=this._views.indexOf(t);e>-1&&this._views.splice(e,1),this.destroy(t),this.length--}destroy(t){t.displayed&&t.destroy(),this.container&&this.container.removeChild(t.element),t=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var t,e=this.length;if(this.length){for(var i=0;i<e;i++)t=this._views[i],this.destroy(t);this._views=[],this.length=0}}find(t){for(var e,i=this.length,r=0;r<i;r++)if(e=this._views[r],e.displayed&&e.section.index==t.index)return e}displayed(){for(var t=[],e,i=this.length,r=0;r<i;r++)e=this._views[r],e.displayed&&t.push(e);return t}show(){for(var t,e=this.length,i=0;i<e;i++)t=this._views[i],t.displayed&&t.show();this.hidden=!1}hide(){for(var t,e=this.length,i=0;i<e;i++)t=this._views[i],t.displayed&&t.hide();this.hidden=!0}}class ar{constructor(t){this.name="default",this.optsSettings=t.settings,this.View=t.view,this.request=t.request,this.renditionQueue=t.queue,this.q=new Kr(this),this.settings=le(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),le(this.settings,t.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(t,e){let i=t.tagName;typeof this.settings.fullsize>"u"&&i&&(i.toLowerCase()=="body"||i.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=e,this.settings.rtlScrollType=$a(),this.stage=new rh({width:e.width,height:e.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(t),this.container=this.stage.getContainer(),this.views=new nh(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var t;window.addEventListener("unload",function(e){this.destroy()}.bind(this)),this.settings.fullsize?t=window:t=this.container,this._onScroll=this.onScroll.bind(this),t.addEventListener("scroll",this._onScroll)}removeEventListeners(){var t;this.settings.fullsize?t=window:t=this.container,t.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(t){let{orientation:e}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(at.MANAGERS.ORIENTATION_CHANGE,e)}.bind(this),500)}onResized(t){this.resize()}resize(t,e,i){let r=this.stage.size(t,e);if(this.winBounds=Qi(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===r.width&&this._stageSize.height===r.height||(this._stageSize=r,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(at.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},i))}createView(t,e){return new this.View(t,le(this.viewSettings,{forceRight:e}))}handleNextPrePaginated(t,e,i){let r;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(t||e.index===0)return;if(r=e.next(),r&&!r.properties.includes("page-spread-left"))return i.call(this,r)}}display(t,e){var i=new Nt,r=i.promise;(e===t.href||Zt(e))&&(e=void 0);var s=this.views.find(t);if(s&&t&&this.layout.name!=="pre-paginated"){let a=s.offset();if(this.settings.direction==="ltr")this.scrollTo(a.left,a.top,!0);else{let h=s.width();this.scrollTo(a.left+h,a.top,!0)}if(e){let h=s.locationOf(e),d=s.width();this.moveTo(h,d)}return i.resolve(),r}this.clear();let o=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&t.properties.includes("page-spread-right")&&(o=!0),this.add(t,o).then(function(a){if(e){let h=a.locationOf(e),d=a.width();this.moveTo(h,d)}}.bind(this),a=>{i.reject(a)}).then(function(){return this.handleNextPrePaginated(o,t,this.add)}.bind(this)).then(function(){this.views.show(),i.resolve()}.bind(this)),r}afterDisplayed(t){this.emit(at.MANAGERS.ADDED,t)}afterResized(t){this.emit(at.MANAGERS.RESIZE,t.section)}moveTo(t,e){var i=0,r=0;this.isPaginated?(i=Math.floor(t.left/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollWidth&&(i=this.container.scrollWidth-this.layout.delta),r=Math.floor(t.top/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollHeight&&(r=this.container.scrollHeight-this.layout.delta)):r=t.top,this.settings.direction==="rtl"&&(i=i+this.layout.delta,i=i-e),this.scrollTo(i,r,!0)}add(t,e){var i=this.createView(t,e);return this.views.append(i),i.onDisplayed=this.afterDisplayed.bind(this),i.onResize=this.afterResized.bind(this),i.on(at.VIEWS.AXIS,r=>{this.updateAxis(r)}),i.on(at.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),i.display(this.request)}append(t,e){var i=this.createView(t,e);return this.views.append(i),i.onDisplayed=this.afterDisplayed.bind(this),i.onResize=this.afterResized.bind(this),i.on(at.VIEWS.AXIS,r=>{this.updateAxis(r)}),i.on(at.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),i.display(this.request)}prepend(t,e){var i=this.createView(t,e);return i.on(at.VIEWS.RESIZED,r=>{this.counter(r)}),this.views.prepend(i),i.onDisplayed=this.afterDisplayed.bind(this),i.onResize=this.afterResized.bind(this),i.on(at.VIEWS.AXIS,r=>{this.updateAxis(r)}),i.on(at.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),i.display(this.request)}counter(t){this.settings.axis==="vertical"?this.scrollBy(0,t.heightDelta,!0):this.scrollBy(t.widthDelta,0,!0)}next(){var t,e;let i=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!i||i==="ltr")?(this.scrollLeft=this.container.scrollLeft,e=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,e<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):t=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&i==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(e=this.container.scrollLeft,e>0?this.scrollBy(this.layout.delta,0,!0):t=this.views.last().section.next()):(e=this.container.scrollLeft+this.layout.delta*-1,e>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):t=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):t=this.views.last().section.next()):t=this.views.last().section.next(),t)){this.clear(),this.updateLayout();let r=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&t.properties.includes("page-spread-right")&&(r=!0),this.append(t,r).then(function(){return this.handleNextPrePaginated(r,t,this.append)}.bind(this),s=>s).then(function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var t,e;let i=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!i||i==="ltr")?(this.scrollLeft=this.container.scrollLeft,e=this.container.scrollLeft,e>0?this.scrollBy(-this.layout.delta,0,!0):t=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&i==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(e=this.container.scrollLeft+this.container.offsetWidth,e<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):t=this.views.first().section.prev()):(e=this.container.scrollLeft,e<0?this.scrollBy(-this.layout.delta,0,!0):t=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):t=this.views.first().section.prev()):t=this.views.first().section.prev(),t)){this.clear(),this.updateLayout();let r=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof t.prev()!="object"&&(r=!0),this.prepend(t,r).then(function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=t.prev(),s))return this.prepend(s)}.bind(this),s=>s).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var t=this.visible();return t.length?t[t.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let t=this.visible(),e=this.container.getBoundingClientRect(),i=e.height<window.innerHeight?e.height:window.innerHeight,r=e.width<window.innerWidth?e.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let o=0,a=0;return this.settings.fullsize&&(o=s?window.scrollY:window.scrollX),t.map(h=>{let{index:d,href:l}=h.section,g=h.position(),w=h.width(),b=h.height(),D,O,p,_;s?(D=o+e.top-g.top+a,O=D+i-a,_=this.layout.count(b,i).pages,p=i):(D=o+e.left-g.left+a,O=D+r-a,_=this.layout.count(w,r).pages,p=r);let x=Math.ceil(D/p),k=[],F=Math.ceil(O/p);if(this.settings.direction==="rtl"&&!s){let B=x;x=_-F,F=_-B}k=[];for(var A=x;A<=F;A++){let B=A+1;k.push(B)}let T=this.mapping.page(h.contents,h.section.cfiBase,D,O);return{index:d,href:l,pages:k,totalPages:_,mapping:T}})}paginatedLocation(){let t=this.visible(),e=this.container.getBoundingClientRect(),i=0,r=0;return this.settings.fullsize&&(i=window.scrollX),t.map(s=>{let{index:o,href:a}=s.section,h,d=s.position(),l=s.width(),g,w,b;this.settings.direction==="rtl"?(h=e.right-i,b=Math.min(Math.abs(h-d.left),this.layout.width)-r,w=d.width-(d.right-h)-r,g=w-b):(h=e.left+i,b=Math.min(d.right-h,this.layout.width)-r,g=h-d.left+r,w=g+b),r+=b;let D=this.mapping.page(s.contents,s.section.cfiBase,g,w),O=this.layout.count(l).pages,p=Math.floor(g/this.layout.pageWidth),_=[],x=Math.floor(w/this.layout.pageWidth);if(p<0&&(p=0,x=x+1),this.settings.direction==="rtl"){let F=p;p=O-x,x=O-F}for(var k=p+1;k<=x;k++){let F=k;_.push(F)}return{index:o,href:a,pages:_,totalPages:O,mapping:D}})}isVisible(t,e,i,r){var s=t.position(),o=r||this.bounds();return this.settings.axis==="horizontal"&&s.right>o.left-e&&s.left<o.right+i?!0:this.settings.axis==="vertical"&&s.bottom>o.top-e&&s.top<o.bottom+i}visible(){for(var t=this.bounds(),e=this.views.displayed(),i=e.length,r=[],s,o,a=0;a<i;a++)o=e[a],s=this.isVisible(o,0,0,t),s===!0&&r.push(o);return r}scrollBy(t,e,i){let r=this.settings.direction==="rtl"?-1:1;i&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(t*r,e*r):(t&&(this.container.scrollLeft+=t*r),e&&(this.container.scrollTop+=e)),this.scrolled=!0}scrollTo(t,e,i){i&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(t,e):(this.container.scrollLeft=t,this.container.scrollTop=e),this.scrolled=!0}onScroll(){let t,e;this.settings.fullsize?(t=window.scrollY,e=window.scrollX):(t=this.container.scrollTop,e=this.container.scrollLeft),this.scrollTop=t,this.scrollLeft=e,this.ignore?this.ignore=!1:(this.emit(at.MANAGERS.SCROLL,{top:t,left:e}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(at.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){var t;return t=this.stage.bounds(),t}applyLayout(t){this.layout=t,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(t){this.viewSettings.layout=t,this.mapping=new nr(t.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(e){e&&e.setLayout(t)})}updateWritingMode(t){this.writingMode=t}updateAxis(t,e){!e&&t===this.settings.axis||(this.settings.axis=t,this.stage&&this.stage.axis(t),this.viewSettings.axis=t,this.mapping&&(this.mapping=new nr(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(t==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(t,e="auto"){let i=t==="paginated"||t==="auto";this.isPaginated=i,t==="scrolled-doc"||t==="scrolled-continuous"||t==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=t,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=i?"hidden":e,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var t=[];return this.views&&this.views.forEach(function(e){const i=e&&e.contents;i&&t.push(i)}),t}direction(t="ltr"){this.settings.direction=t,this.stage&&this.stage.direction(t),this.viewSettings.direction=t,this.updateLayout()}isRendered(){return this.rendered}}Pe(ar.prototype);const sh=Math.PI/2,oh={easeOutSine:function(n){return Math.sin(n*sh)},easeInOutSine:function(n){return-.5*(Math.cos(Math.PI*n)-1)},easeInOutQuint:function(n){return(n/=.5)<1?.5*Math.pow(n,5):.5*(Math.pow(n-2,5)+2)},easeInCubic:function(n){return Math.pow(n,3)}};class Ur{constructor(t,e){this.settings=le({duration:80,minVelocity:.2,minDistance:10,easing:oh.easeInCubic},e||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(t)}setup(t){this.manager=t,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(at.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(at.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(t){let e=t.contents;["touchstart","touchmove","touchend"].forEach(i=>{e.on(i,r=>this.triggerViewEvent(r,e))})}triggerViewEvent(t,e){this.emit(t.type,t,e)}onScroll(t){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(t){this.resizeCanceler=!0}onTouchStart(t){let{screenX:e,screenY:i}=t.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=e,this.startTouchY=i,this.startTime=this.now()),this.endTouchX=e,this.endTouchY=i,this.endTime=this.now()}onTouchMove(t){let{screenX:e,screenY:i}=t.touches[0],r=Math.abs(i-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&r<10&&(this.element.scrollLeft-=e-this.endTouchX),this.endTouchX=e,this.endTouchY=i,this.endTime=this.now()}onTouchEnd(t){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let e=this.wasSwiped();e!==0?this.snap(e):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let t=this.layout.pageWidth*this.layout.divisor,e=this.endTouchX-this.startTouchX,i=Math.abs(e),r=this.endTime-this.startTime,s=e/r,o=this.settings.minVelocity;if(i<=this.settings.minDistance||i>=t)return 0;if(s>o)return-1;if(s<-o)return 1}needsSnap(){let t=this.scrollLeft,e=this.layout.pageWidth*this.layout.divisor;return t%e!==0}snap(t=0){let e=this.scrollLeft,i=this.layout.pageWidth*this.layout.divisor,r=Math.round(e/i)*i;return t&&(r+=t*i),this.smoothScrollTo(r)}smoothScrollTo(t){const e=new Nt,i=this.scrollLeft,r=this.now(),s=this.settings.duration,o=this.settings.easing;this.snapping=!0;function a(){const h=this.now(),d=Math.min(1,(h-r)/s);if(o(d),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,e.resolve();return}d<1?(window.requestAnimationFrame(a.bind(this)),this.scrollTo(i+(t-i)*d,0)):(this.scrollTo(t,0),this.snapping=!1,e.resolve())}return a.call(this),e.promise}scrollTo(t=0,e=0){this.fullsize?window.scroll(t,e):(this.scroller.scrollLeft=t,this.scroller.scrollTop=e)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}Pe(Ur.prototype);class ah extends ar{constructor(t){super(t),this.name="continuous",this.settings=le(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),le(this.settings,t.settings||{}),t.settings.gap!="undefined"&&t.settings.gap===0&&(this.settings.gap=t.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(t,e){return ar.prototype.display.call(this,t,e).then(function(){return this.fill()}.bind(this))}fill(t){var e=t||new Nt;return this.q.enqueue(()=>this.check()).then(i=>{i?this.fill(e):e.resolve()}),e.promise}moveTo(t){var e=0,i=0;this.isPaginated?(e=Math.floor(t.left/this.layout.delta)*this.layout.delta,e+this.settings.offsetDelta):(i=t.top,t.top+this.settings.offsetDelta),(e>0||i>0)&&this.scrollBy(e,i,!0)}afterResized(t){this.emit(at.MANAGERS.RESIZE,t.section)}removeShownListeners(t){t.onDisplayed=function(){}}add(t){var e=this.createView(t);return this.views.append(e),e.on(at.VIEWS.RESIZED,i=>{e.expanded=!0}),e.on(at.VIEWS.AXIS,i=>{this.updateAxis(i)}),e.on(at.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),e.onDisplayed=this.afterDisplayed.bind(this),e.onResize=this.afterResized.bind(this),e.display(this.request)}append(t){var e=this.createView(t);return e.on(at.VIEWS.RESIZED,i=>{e.expanded=!0}),e.on(at.VIEWS.AXIS,i=>{this.updateAxis(i)}),e.on(at.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),this.views.append(e),e.onDisplayed=this.afterDisplayed.bind(this),e}prepend(t){var e=this.createView(t);return e.on(at.VIEWS.RESIZED,i=>{this.counter(i),e.expanded=!0}),e.on(at.VIEWS.AXIS,i=>{this.updateAxis(i)}),e.on(at.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),this.views.prepend(e),e.onDisplayed=this.afterDisplayed.bind(this),e}counter(t){this.settings.axis==="vertical"?this.scrollBy(0,t.heightDelta,!0):this.scrollBy(t.widthDelta,0,!0)}update(t){for(var e=this.bounds(),i=this.views.all(),r=i.length,s=typeof t<"u"?t:this.settings.offset||0,o,a,h=new Nt,d=[],l=0;l<r;l++)if(a=i[l],o=this.isVisible(a,s,s,e),o===!0)if(a.displayed)a.show();else{let g=a.display(this.request).then(function(w){w.show()},w=>{a.hide()});d.push(g)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return d.length?Promise.all(d).catch(g=>{h.reject(g)}):(h.resolve(),h.promise)}check(t,e){var i=new Nt,r=[],s=this.settings.axis==="horizontal",o=this.settings.offset||0;t&&s&&(o=t),e&&!s&&(o=e);var a=this._bounds;let h=s?this.scrollLeft:this.scrollTop,d=s?Math.floor(a.width):a.height,l=s?this.container.scrollWidth:this.container.scrollHeight,g=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",w=this.settings.rtlScrollType,b=this.settings.direction==="rtl";this.settings.fullsize?(s&&b&&w==="negative"||!s&&b&&w==="default")&&(h=h*-1):(b&&w==="default"&&g==="horizontal"&&(h=l-d-h),b&&w==="negative"&&g==="horizontal"&&(h=h*-1));let D=()=>{let k=this.views.first(),F=k&&k.section.prev();F&&r.push(this.prepend(F))},O=()=>{let k=this.views.last(),F=k&&k.section.next();F&&r.push(this.append(F))},p=h+d+o,_=h-o;p>=l&&O(),_<0&&D();let x=r.map(k=>k.display(this.request));return r.length?Promise.all(x).then(()=>this.check()).then(()=>this.update(o),k=>k):(this.q.enqueue(function(){this.update()}.bind(this)),i.resolve(!1),i.promise)}trim(){for(var t=new Nt,e=this.views.displayed(),i=e[0],r=e[e.length-1],s=this.views.indexOf(i),o=this.views.indexOf(r),a=this.views.slice(0,s),h=this.views.slice(o+1),d=0;d<a.length-1;d++)this.erase(a[d],a);for(var l=1;l<h.length;l++)this.erase(h[l]);return t.resolve(),t.promise}erase(t,e){var i,r;this.settings.fullsize?(i=window.scrollY,r=window.scrollX):(i=this.container.scrollTop,r=this.container.scrollLeft);var s=t.bounds();this.views.remove(t),e&&(this.settings.axis==="vertical"?this.scrollTo(0,i-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(r+Math.floor(s.width),0,!0):this.scrollTo(r,0,!0):this.scrollTo(r-Math.floor(s.width),0,!0))}addEventListeners(t){window.addEventListener("unload",function(e){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Ur(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var t;this.tick=Yr;let e=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(t=window,this.scrollTop=window.scrollY*e,this.scrollLeft=window.scrollX*e):(t=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),t.addEventListener("scroll",this._onScroll),this._scrolled=$u(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var t;this.settings.fullsize?t=window:t=this.container,t.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let t,e,i=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(t=window.scrollY*i,e=window.scrollX*i):(t=this.container.scrollTop,e=this.container.scrollLeft),this.scrollTop=t,this.scrollLeft=e,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(t-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(e-this.prevScrollLeft),this.prevScrollTop=t,this.prevScrollLeft=e,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(at.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(at.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let t=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(t,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let t=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-t,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(t){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(t,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Ur(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class en{constructor(t,e){this.settings=le(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),le(this.settings,e),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=t,this.hooks={},this.hooks.display=new Ie(this),this.hooks.serialize=new Ie(this),this.hooks.content=new Ie(this),this.hooks.unloaded=new Ie(this),this.hooks.layout=new Ie(this),this.hooks.render=new Ie(this),this.hooks.show=new Ie(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new Fa(this),this.annotations=new qa(this),this.epubcfi=new Tt,this.q=new Kr(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new Nt,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(t){this.manager=t}requireManager(t){var e;return typeof t=="string"&&t==="default"?e=ar:typeof t=="string"&&t==="continuous"?e=ah:e=t,e}requireView(t){var e;return typeof t=="string"&&t==="iframe"?e=Gs:e=t,e}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(at.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(at.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(at.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(at.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(at.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(at.RENDITION.STARTED),this.starting.resolve()}attachTo(t){return this.q.enqueue(function(){this.manager.render(t,{width:this.settings.width,height:this.settings.height}),this.emit(at.RENDITION.ATTACHED)}.bind(this))}display(t){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,t)}_display(t){if(this.book){this.epubcfi.isCfiString(t);var e=new Nt,i=e.promise,r;return this.displaying=e,this.book.locations.length()&&Cs(t)&&(t=this.book.locations.cfiFromPercentage(parseFloat(t))),r=this.book.spine.get(t),r?(this.manager.display(r,t).then(()=>{e.resolve(r),this.displaying=void 0,this.emit(at.RENDITION.DISPLAYED,r),this.reportLocation()},s=>{this.emit(at.RENDITION.DISPLAY_ERROR,s)}),i):(e.reject(new Error("No Section Found")),i)}}afterDisplayed(t){t.on(at.VIEWS.MARK_CLICKED,(e,i)=>this.triggerMarkEvent(e,i,t.contents)),this.hooks.render.trigger(t,this).then(()=>{t.contents?this.hooks.content.trigger(t.contents,this).then(()=>{this.emit(at.RENDITION.RENDERED,t.section,t)}):this.emit(at.RENDITION.RENDERED,t.section,t)})}afterRemoved(t){this.hooks.unloaded.trigger(t,this).then(()=>{this.emit(at.RENDITION.REMOVED,t.section,t)})}onResized(t,e){this.emit(at.RENDITION.RESIZED,{width:t.width,height:t.height},e),this.location&&this.location.start&&this.display(e||this.location.start.cfi)}onOrientationChange(t){this.emit(at.RENDITION.ORIENTATION_CHANGE,t)}moveTo(t){this.manager.moveTo(t)}resize(t,e,i){t&&(this.settings.width=t),e&&(this.settings.height=e),this.manager.resize(t,e,i)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(t){var e,i=this.settings.layout||t.layout||"reflowable",r=this.settings.spread||t.spread||"auto",s=this.settings.orientation||t.orientation||"auto",o=this.settings.flow||t.flow||"auto",a=t.viewport||"",h=this.settings.minSpreadWidth||t.minSpreadWidth||800,d=this.settings.direction||t.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),e={layout:i,spread:r,orientation:s,flow:o,viewport:a,minSpreadWidth:h,direction:d},e}flow(t){var e=t;(t==="scrolled"||t==="scrolled-doc"||t==="scrolled-continuous")&&(e="scrolled"),(t==="auto"||t==="paginated")&&(e="paginated"),this.settings.flow=t,this._layout&&this._layout.flow(e),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(e),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(t){return t&&(this._layout=new zs(t),this._layout.spread(t.spread,this.settings.minSpreadWidth),this._layout.on(at.LAYOUT.UPDATED,(e,i)=>{this.emit(at.RENDITION.LAYOUT,e,i)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(t,e){this.settings.spread=t,e&&(this.settings.minSpreadWidth=e),this._layout&&this._layout.spread(t,e),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(t){this.settings.direction=t||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var t=this.manager.currentLocation();if(t&&t.then&&typeof t.then=="function")t.then(function(e){let i=this.located(e);!i||!i.start||!i.end||(this.location=i,this.emit(at.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(at.RENDITION.RELOCATED,this.location))}.bind(this));else if(t){let e=this.located(t);if(!e||!e.start||!e.end)return;this.location=e,this.emit(at.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(at.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var t=this.manager.currentLocation();if(t&&t.then&&typeof t.then=="function")t.then(function(e){return this.located(e)}.bind(this));else if(t)return this.located(t)}located(t){if(!t.length)return{};let e=t[0],i=t[t.length-1],r={start:{index:e.index,href:e.href,cfi:e.mapping.start,displayed:{page:e.pages[0]||1,total:e.totalPages}},end:{index:i.index,href:i.href,cfi:i.mapping.end,displayed:{page:i.pages[i.pages.length-1]||1,total:i.totalPages}}},s=this.book.locations.locationFromCfi(e.mapping.start),o=this.book.locations.locationFromCfi(i.mapping.end);s!=null&&(r.start.location=s,r.start.percentage=this.book.locations.percentageFromLocation(s)),o!=null&&(r.end.location=o,r.end.percentage=this.book.locations.percentageFromLocation(o));let a=this.book.pageList.pageFromCfi(e.mapping.start),h=this.book.pageList.pageFromCfi(i.mapping.end);return a!=-1&&(r.start.page=a),h!=-1&&(r.end.page=h),i.index===this.book.spine.last().index&&r.end.displayed.page>=r.end.displayed.total&&(r.atEnd=!0),e.index===this.book.spine.first().index&&r.start.displayed.page===1&&(r.atStart=!0),r}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(t){Vi.forEach(e=>{t.on(e,i=>this.triggerViewEvent(i,t))}),t.on(at.CONTENTS.SELECTED,e=>this.triggerSelectedEvent(e,t))}triggerViewEvent(t,e){this.emit(t.type,t,e)}triggerSelectedEvent(t,e){this.emit(at.RENDITION.SELECTED,t,e)}triggerMarkEvent(t,e,i){this.emit(at.RENDITION.MARK_CLICKED,t,e,i)}getRange(t,e){var i=new Tt(t),r=this.manager.visible().filter(function(s){if(i.spinePos===s.index)return!0});if(r.length)return r[0].contents.range(i,e)}adjustImages(t){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let e=t.window.getComputedStyle(t.content,null),i=(t.content.offsetHeight-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)))*.95,r=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight);return t.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":i+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":i+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,o){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(t){t&&t.on(at.CONTENTS.LINK_CLICKED,e=>{let i=this.book.path.relative(e);this.display(i)})}injectStylesheet(t,e){let i=t.createElement("link");i.setAttribute("type","text/css"),i.setAttribute("rel","stylesheet"),i.setAttribute("href",this.settings.stylesheet),t.getElementsByTagName("head")[0].appendChild(i)}injectScript(t,e){let i=t.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",this.settings.script),i.textContent=" ",t.getElementsByTagName("head")[0].appendChild(i)}injectIdentifier(t,e){let i=this.book.packaging.metadata.identifier,r=t.createElement("meta");r.setAttribute("name","dc.relation.ispartof"),i&&r.setAttribute("content",i),t.getElementsByTagName("head")[0].appendChild(r)}}Pe(en.prototype);var Ks={},Hi={};Hi.byteLength=lh,Hi.toByteArray=dh,Hi.fromByteArray=gh;for(var Oe=[],Ae=[],uh=typeof Uint8Array<"u"?Uint8Array:Array,Ar="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",si=0,hh=Ar.length;si<hh;++si)Oe[si]=Ar[si],Ae[Ar.charCodeAt(si)]=si;Ae[45]=62,Ae[95]=63;function Js(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var i=e===t?0:4-e%4;return[e,i]}function lh(n){var t=Js(n),e=t[0],i=t[1];return(e+i)*3/4-i}function ch(n,t,e){return(t+e)*3/4-e}function dh(n){var t,e=Js(n),i=e[0],r=e[1],s=new uh(ch(n,i,r)),o=0,a=r>0?i-4:i,h;for(h=0;h<a;h+=4)t=Ae[n.charCodeAt(h)]<<18|Ae[n.charCodeAt(h+1)]<<12|Ae[n.charCodeAt(h+2)]<<6|Ae[n.charCodeAt(h+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return r===2&&(t=Ae[n.charCodeAt(h)]<<2|Ae[n.charCodeAt(h+1)]>>4,s[o++]=t&255),r===1&&(t=Ae[n.charCodeAt(h)]<<10|Ae[n.charCodeAt(h+1)]<<4|Ae[n.charCodeAt(h+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function fh(n){return Oe[n>>18&63]+Oe[n>>12&63]+Oe[n>>6&63]+Oe[n&63]}function ph(n,t,e){for(var i,r=[],s=t;s<e;s+=3)i=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),r.push(fh(i));return r.join("")}function gh(n){for(var t,e=n.length,i=e%3,r=[],s=16383,o=0,a=e-i;o<a;o+=s)r.push(ph(n,o,o+s>a?a:o+s));return i===1?(t=n[e-1],r.push(Oe[t>>2]+Oe[t<<4&63]+"==")):i===2&&(t=(n[e-2]<<8)+n[e-1],r.push(Oe[t>>10]+Oe[t>>4&63]+Oe[t<<2&63]+"=")),r.join("")}var jr={};jr.read=function(n,t,e,i,r){var s,o,a=r*8-i-1,h=(1<<a)-1,d=h>>1,l=-7,g=e?r-1:0,w=e?-1:1,b=n[t+g];for(g+=w,s=b&(1<<-l)-1,b>>=-l,l+=a;l>0;s=s*256+n[t+g],g+=w,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=i;l>0;o=o*256+n[t+g],g+=w,l-=8);if(s===0)s=1-d;else{if(s===h)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-d}return(b?-1:1)*o*Math.pow(2,s-i)},jr.write=function(n,t,e,i,r,s){var o,a,h,d=s*8-r-1,l=(1<<d)-1,g=l>>1,w=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:s-1,D=i?1:-1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+g>=1?t+=w/h:t+=w*Math.pow(2,1-g),t*h>=2&&(o++,h/=2),o+g>=l?(a=0,o=l):o+g>=1?(a=(t*h-1)*Math.pow(2,r),o=o+g):(a=t*Math.pow(2,g-1)*Math.pow(2,r),o=0));r>=8;n[e+b]=a&255,b+=D,a/=256,r-=8);for(o=o<<r|a,d+=r;d>0;n[e+b]=o&255,b+=D,o/=256,d-=8);n[e+b-D]|=O*128};(function(n){const t=Hi,e=jr,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=l,n.SlowBuffer=A,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;l.TYPED_ARRAY_SUPPORT=h(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const u=new s(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,s.prototype),Object.setPrototypeOf(u,f),u.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function d(u){if(u>r)throw new RangeError('The value "'+u+'" is invalid for option "size"');const f=new s(u);return Object.setPrototypeOf(f,l.prototype),f}function l(u,f,m){if(typeof u=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(u)}return g(u,f,m)}l.poolSize=8192;function g(u,f,m){if(typeof u=="string")return O(u,f);if(o.isView(u))return _(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(ie(u,o)||u&&ie(u.buffer,o)||typeof a<"u"&&(ie(u,a)||u&&ie(u.buffer,a)))return x(u,f,m);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=u.valueOf&&u.valueOf();if(I!=null&&I!==u)return l.from(I,f,m);const q=k(u);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return l.from(u[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}l.from=function(u,f,m){return g(u,f,m)},Object.setPrototypeOf(l.prototype,s.prototype),Object.setPrototypeOf(l,s);function w(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function b(u,f,m){return w(u),u<=0?d(u):f!==void 0?typeof m=="string"?d(u).fill(f,m):d(u).fill(f):d(u)}l.alloc=function(u,f,m){return b(u,f,m)};function D(u){return w(u),d(u<0?0:F(u)|0)}l.allocUnsafe=function(u){return D(u)},l.allocUnsafeSlow=function(u){return D(u)};function O(u,f){if((typeof f!="string"||f==="")&&(f="utf8"),!l.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const m=T(u,f)|0;let I=d(m);const q=I.write(u,f);return q!==m&&(I=I.slice(0,q)),I}function p(u){const f=u.length<0?0:F(u.length)|0,m=d(f);for(let I=0;I<f;I+=1)m[I]=u[I]&255;return m}function _(u){if(ie(u,s)){const f=new s(u);return x(f.buffer,f.byteOffset,f.byteLength)}return p(u)}function x(u,f,m){if(f<0||u.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let I;return f===void 0&&m===void 0?I=new s(u):m===void 0?I=new s(u,f):I=new s(u,f,m),Object.setPrototypeOf(I,l.prototype),I}function k(u){if(l.isBuffer(u)){const f=F(u.length)|0,m=d(f);return m.length===0||u.copy(m,0,0,f),m}if(u.length!==void 0)return typeof u.length!="number"||pe(u.length)?d(0):p(u);if(u.type==="Buffer"&&Array.isArray(u.data))return p(u.data)}function F(u){if(u>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return u|0}function A(u){return+u!=u&&(u=0),l.alloc(+u)}l.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==l.prototype},l.compare=function(u,f){if(ie(u,s)&&(u=l.from(u,u.offset,u.byteLength)),ie(f,s)&&(f=l.from(f,f.offset,f.byteLength)),!l.isBuffer(u)||!l.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===f)return 0;let m=u.length,I=f.length;for(let q=0,$=Math.min(m,I);q<$;++q)if(u[q]!==f[q]){m=u[q],I=f[q];break}return m<I?-1:I<m?1:0},l.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(u,f){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return l.alloc(0);let m;if(f===void 0)for(f=0,m=0;m<u.length;++m)f+=u[m].length;const I=l.allocUnsafe(f);let q=0;for(m=0;m<u.length;++m){let $=u[m];if(ie($,s))q+$.length>I.length?(l.isBuffer($)||($=l.from($)),$.copy(I,q)):s.prototype.set.call(I,$,q);else if(l.isBuffer($))$.copy(I,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=$.length}return I};function T(u,f){if(l.isBuffer(u))return u.length;if(o.isView(u)||ie(u,o))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);const m=u.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&m===0)return 0;let q=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return te(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return wt(u).length;default:if(q)return I?-1:te(u).length;f=(""+f).toLowerCase(),q=!0}}l.byteLength=T;function B(u,f,m){let I=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,f>>>=0,m<=f))return"";for(u||(u="utf8");;)switch(u){case"hex":return pt(this,f,m);case"utf8":case"utf-8":return ot(this,f,m);case"ascii":return jt(this,f,m);case"latin1":case"binary":return Rt(this,f,m);case"base64":return ft(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dt(this,f,m);default:if(I)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),I=!0}}l.prototype._isBuffer=!0;function z(u,f,m){const I=u[f];u[f]=u[m],u[m]=I}l.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<u;f+=2)z(this,f,f+1);return this},l.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<u;f+=4)z(this,f,f+3),z(this,f+1,f+2);return this},l.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<u;f+=8)z(this,f,f+7),z(this,f+1,f+6),z(this,f+2,f+5),z(this,f+3,f+4);return this},l.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?ot(this,0,u):B.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(u){if(!l.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:l.compare(this,u)===0},l.prototype.inspect=function(){let u="";const f=n.INSPECT_MAX_BYTES;return u=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(u+=" ... "),"<Buffer "+u+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(u,f,m,I,q){if(ie(u,s)&&(u=l.from(u,u.offset,u.byteLength)),!l.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(f===void 0&&(f=0),m===void 0&&(m=u?u.length:0),I===void 0&&(I=0),q===void 0&&(q=this.length),f<0||m>u.length||I<0||q>this.length)throw new RangeError("out of range index");if(I>=q&&f>=m)return 0;if(I>=q)return-1;if(f>=m)return 1;if(f>>>=0,m>>>=0,I>>>=0,q>>>=0,this===u)return 0;let $=q-I,v=m-f;const Z=Math.min($,v),J=this.slice(I,q),et=u.slice(f,m);for(let R=0;R<Z;++R)if(J[R]!==et[R]){$=J[R],v=et[R];break}return $<v?-1:v<$?1:0};function M(u,f,m,I,q){if(u.length===0)return-1;if(typeof m=="string"?(I=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,pe(m)&&(m=q?0:u.length-1),m<0&&(m=u.length+m),m>=u.length){if(q)return-1;m=u.length-1}else if(m<0)if(q)m=0;else return-1;if(typeof f=="string"&&(f=l.from(f,I)),l.isBuffer(f))return f.length===0?-1:W(u,f,m,I,q);if(typeof f=="number")return f=f&255,typeof s.prototype.indexOf=="function"?q?s.prototype.indexOf.call(u,f,m):s.prototype.lastIndexOf.call(u,f,m):W(u,[f],m,I,q);throw new TypeError("val must be string, number or Buffer")}function W(u,f,m,I,q){let $=1,v=u.length,Z=f.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(u.length<2||f.length<2)return-1;$=2,v/=2,Z/=2,m/=2}function J(R,H){return $===1?R[H]:R.readUInt16BE(H*$)}let et;if(q){let R=-1;for(et=m;et<v;et++)if(J(u,et)===J(f,R===-1?0:et-R)){if(R===-1&&(R=et),et-R+1===Z)return R*$}else R!==-1&&(et-=et-R),R=-1}else for(m+Z>v&&(m=v-Z),et=m;et>=0;et--){let R=!0;for(let H=0;H<Z;H++)if(J(u,et+H)!==J(f,H)){R=!1;break}if(R)return et}return-1}l.prototype.includes=function(u,f,m){return this.indexOf(u,f,m)!==-1},l.prototype.indexOf=function(u,f,m){return M(this,u,f,m,!0)},l.prototype.lastIndexOf=function(u,f,m){return M(this,u,f,m,!1)};function X(u,f,m,I){m=Number(m)||0;const q=u.length-m;I?(I=Number(I),I>q&&(I=q)):I=q;const $=f.length;I>$/2&&(I=$/2);let v;for(v=0;v<I;++v){const Z=parseInt(f.substr(v*2,2),16);if(pe(Z))return v;u[m+v]=Z}return v}function st(u,f,m,I){return ee(te(f,u.length-m),u,m,I)}function dt(u,f,m,I){return ee(ne(f),u,m,I)}function lt(u,f,m,I){return ee(wt(f),u,m,I)}function bt(u,f,m,I){return ee(Pt(f,u.length-m),u,m,I)}l.prototype.write=function(u,f,m,I){if(f===void 0)I="utf8",m=this.length,f=0;else if(m===void 0&&typeof f=="string")I=f,m=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(m)?(m=m>>>0,I===void 0&&(I="utf8")):(I=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-f;if((m===void 0||m>q)&&(m=q),u.length>0&&(m<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let $=!1;for(;;)switch(I){case"hex":return X(this,u,f,m);case"utf8":case"utf-8":return st(this,u,f,m);case"ascii":case"latin1":case"binary":return dt(this,u,f,m);case"base64":return lt(this,u,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bt(this,u,f,m);default:if($)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),$=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ft(u,f,m){return f===0&&m===u.length?t.fromByteArray(u):t.fromByteArray(u.slice(f,m))}function ot(u,f,m){m=Math.min(u.length,m);const I=[];let q=f;for(;q<m;){const $=u[q];let v=null,Z=$>239?4:$>223?3:$>191?2:1;if(q+Z<=m){let J,et,R,H;switch(Z){case 1:$<128&&(v=$);break;case 2:J=u[q+1],(J&192)===128&&(H=($&31)<<6|J&63,H>127&&(v=H));break;case 3:J=u[q+1],et=u[q+2],(J&192)===128&&(et&192)===128&&(H=($&15)<<12|(J&63)<<6|et&63,H>2047&&(H<55296||H>57343)&&(v=H));break;case 4:J=u[q+1],et=u[q+2],R=u[q+3],(J&192)===128&&(et&192)===128&&(R&192)===128&&(H=($&15)<<18|(J&63)<<12|(et&63)<<6|R&63,H>65535&&H<1114112&&(v=H))}}v===null?(v=65533,Z=1):v>65535&&(v-=65536,I.push(v>>>10&1023|55296),v=56320|v&1023),I.push(v),q+=Z}return Ct(I)}const yt=4096;function Ct(u){const f=u.length;if(f<=yt)return String.fromCharCode.apply(String,u);let m="",I=0;for(;I<f;)m+=String.fromCharCode.apply(String,u.slice(I,I+=yt));return m}function jt(u,f,m){let I="";m=Math.min(u.length,m);for(let q=f;q<m;++q)I+=String.fromCharCode(u[q]&127);return I}function Rt(u,f,m){let I="";m=Math.min(u.length,m);for(let q=f;q<m;++q)I+=String.fromCharCode(u[q]);return I}function pt(u,f,m){const I=u.length;(!f||f<0)&&(f=0),(!m||m<0||m>I)&&(m=I);let q="";for(let $=f;$<m;++$)q+=he[u[$]];return q}function Dt(u,f,m){const I=u.slice(f,m);let q="";for(let $=0;$<I.length-1;$+=2)q+=String.fromCharCode(I[$]+I[$+1]*256);return q}l.prototype.slice=function(u,f){const m=this.length;u=~~u,f=f===void 0?m:~~f,u<0?(u+=m,u<0&&(u=0)):u>m&&(u=m),f<0?(f+=m,f<0&&(f=0)):f>m&&(f=m),f<u&&(f=u);const I=this.subarray(u,f);return Object.setPrototypeOf(I,l.prototype),I};function mt(u,f,m){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+f>m)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(u,f,m){u=u>>>0,f=f>>>0,m||mt(u,f,this.length);let I=this[u],q=1,$=0;for(;++$<f&&(q*=256);)I+=this[u+$]*q;return I},l.prototype.readUintBE=l.prototype.readUIntBE=function(u,f,m){u=u>>>0,f=f>>>0,m||mt(u,f,this.length);let I=this[u+--f],q=1;for(;f>0&&(q*=256);)I+=this[u+--f]*q;return I},l.prototype.readUint8=l.prototype.readUInt8=function(u,f){return u=u>>>0,f||mt(u,1,this.length),this[u]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(u,f){return u=u>>>0,f||mt(u,2,this.length),this[u]|this[u+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(u,f){return u=u>>>0,f||mt(u,2,this.length),this[u]<<8|this[u+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(u,f){return u=u>>>0,f||mt(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(u,f){return u=u>>>0,f||mt(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},l.prototype.readBigUInt64LE=oe(function(u){u=u>>>0,$t(u,"offset");const f=this[u],m=this[u+7];(f===void 0||m===void 0)&&_t(u,this.length-8);const I=f+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,q=this[++u]+this[++u]*2**8+this[++u]*2**16+m*2**24;return BigInt(I)+(BigInt(q)<<BigInt(32))}),l.prototype.readBigUInt64BE=oe(function(u){u=u>>>0,$t(u,"offset");const f=this[u],m=this[u+7];(f===void 0||m===void 0)&&_t(u,this.length-8);const I=f*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],q=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+m;return(BigInt(I)<<BigInt(32))+BigInt(q)}),l.prototype.readIntLE=function(u,f,m){u=u>>>0,f=f>>>0,m||mt(u,f,this.length);let I=this[u],q=1,$=0;for(;++$<f&&(q*=256);)I+=this[u+$]*q;return q*=128,I>=q&&(I-=Math.pow(2,8*f)),I},l.prototype.readIntBE=function(u,f,m){u=u>>>0,f=f>>>0,m||mt(u,f,this.length);let I=f,q=1,$=this[u+--I];for(;I>0&&(q*=256);)$+=this[u+--I]*q;return q*=128,$>=q&&($-=Math.pow(2,8*f)),$},l.prototype.readInt8=function(u,f){return u=u>>>0,f||mt(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},l.prototype.readInt16LE=function(u,f){u=u>>>0,f||mt(u,2,this.length);const m=this[u]|this[u+1]<<8;return m&32768?m|4294901760:m},l.prototype.readInt16BE=function(u,f){u=u>>>0,f||mt(u,2,this.length);const m=this[u+1]|this[u]<<8;return m&32768?m|4294901760:m},l.prototype.readInt32LE=function(u,f){return u=u>>>0,f||mt(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},l.prototype.readInt32BE=function(u,f){return u=u>>>0,f||mt(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},l.prototype.readBigInt64LE=oe(function(u){u=u>>>0,$t(u,"offset");const f=this[u],m=this[u+7];(f===void 0||m===void 0)&&_t(u,this.length-8);const I=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(m<<24);return(BigInt(I)<<BigInt(32))+BigInt(f+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),l.prototype.readBigInt64BE=oe(function(u){u=u>>>0,$t(u,"offset");const f=this[u],m=this[u+7];(f===void 0||m===void 0)&&_t(u,this.length-8);const I=(f<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(I)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+m)}),l.prototype.readFloatLE=function(u,f){return u=u>>>0,f||mt(u,4,this.length),e.read(this,u,!0,23,4)},l.prototype.readFloatBE=function(u,f){return u=u>>>0,f||mt(u,4,this.length),e.read(this,u,!1,23,4)},l.prototype.readDoubleLE=function(u,f){return u=u>>>0,f||mt(u,8,this.length),e.read(this,u,!0,52,8)},l.prototype.readDoubleBE=function(u,f){return u=u>>>0,f||mt(u,8,this.length),e.read(this,u,!1,52,8)};function Bt(u,f,m,I,q,$){if(!l.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>q||f<$)throw new RangeError('"value" argument is out of bounds');if(m+I>u.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(u,f,m,I){if(u=+u,f=f>>>0,m=m>>>0,!I){const v=Math.pow(2,8*m)-1;Bt(this,u,f,m,v,0)}let q=1,$=0;for(this[f]=u&255;++$<m&&(q*=256);)this[f+$]=u/q&255;return f+m},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(u,f,m,I){if(u=+u,f=f>>>0,m=m>>>0,!I){const v=Math.pow(2,8*m)-1;Bt(this,u,f,m,v,0)}let q=m-1,$=1;for(this[f+q]=u&255;--q>=0&&($*=256);)this[f+q]=u/$&255;return f+m},l.prototype.writeUint8=l.prototype.writeUInt8=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,1,255,0),this[f]=u&255,f+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,2,65535,0),this[f]=u&255,this[f+1]=u>>>8,f+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,2,65535,0),this[f]=u>>>8,this[f+1]=u&255,f+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,4,4294967295,0),this[f+3]=u>>>24,this[f+2]=u>>>16,this[f+1]=u>>>8,this[f]=u&255,f+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,4,4294967295,0),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=u&255,f+4};function Ut(u,f,m,I,q){Wt(f,I,q,u,m,7);let $=Number(f&BigInt(4294967295));u[m++]=$,$=$>>8,u[m++]=$,$=$>>8,u[m++]=$,$=$>>8,u[m++]=$;let v=Number(f>>BigInt(32)&BigInt(4294967295));return u[m++]=v,v=v>>8,u[m++]=v,v=v>>8,u[m++]=v,v=v>>8,u[m++]=v,m}function Lt(u,f,m,I,q){Wt(f,I,q,u,m,7);let $=Number(f&BigInt(4294967295));u[m+7]=$,$=$>>8,u[m+6]=$,$=$>>8,u[m+5]=$,$=$>>8,u[m+4]=$;let v=Number(f>>BigInt(32)&BigInt(4294967295));return u[m+3]=v,v=v>>8,u[m+2]=v,v=v>>8,u[m+1]=v,v=v>>8,u[m]=v,m+8}l.prototype.writeBigUInt64LE=oe(function(u,f=0){return Ut(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=oe(function(u,f=0){return Lt(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(u,f,m,I){if(u=+u,f=f>>>0,!I){const Z=Math.pow(2,8*m-1);Bt(this,u,f,m,Z-1,-Z)}let q=0,$=1,v=0;for(this[f]=u&255;++q<m&&($*=256);)u<0&&v===0&&this[f+q-1]!==0&&(v=1),this[f+q]=(u/$>>0)-v&255;return f+m},l.prototype.writeIntBE=function(u,f,m,I){if(u=+u,f=f>>>0,!I){const Z=Math.pow(2,8*m-1);Bt(this,u,f,m,Z-1,-Z)}let q=m-1,$=1,v=0;for(this[f+q]=u&255;--q>=0&&($*=256);)u<0&&v===0&&this[f+q+1]!==0&&(v=1),this[f+q]=(u/$>>0)-v&255;return f+m},l.prototype.writeInt8=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,1,127,-128),u<0&&(u=255+u+1),this[f]=u&255,f+1},l.prototype.writeInt16LE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,2,32767,-32768),this[f]=u&255,this[f+1]=u>>>8,f+2},l.prototype.writeInt16BE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,2,32767,-32768),this[f]=u>>>8,this[f+1]=u&255,f+2},l.prototype.writeInt32LE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,4,2147483647,-2147483648),this[f]=u&255,this[f+1]=u>>>8,this[f+2]=u>>>16,this[f+3]=u>>>24,f+4},l.prototype.writeInt32BE=function(u,f,m){return u=+u,f=f>>>0,m||Bt(this,u,f,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=u&255,f+4},l.prototype.writeBigInt64LE=oe(function(u,f=0){return Ut(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=oe(function(u,f=0){return Lt(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function kt(u,f,m,I,q,$){if(m+I>u.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function Xt(u,f,m,I,q){return f=+f,m=m>>>0,q||kt(u,f,m,4),e.write(u,f,m,I,23,4),m+4}l.prototype.writeFloatLE=function(u,f,m){return Xt(this,u,f,!0,m)},l.prototype.writeFloatBE=function(u,f,m){return Xt(this,u,f,!1,m)};function Ht(u,f,m,I,q){return f=+f,m=m>>>0,q||kt(u,f,m,8),e.write(u,f,m,I,52,8),m+8}l.prototype.writeDoubleLE=function(u,f,m){return Ht(this,u,f,!0,m)},l.prototype.writeDoubleBE=function(u,f,m){return Ht(this,u,f,!1,m)},l.prototype.copy=function(u,f,m,I){if(!l.isBuffer(u))throw new TypeError("argument should be a Buffer");if(m||(m=0),!I&&I!==0&&(I=this.length),f>=u.length&&(f=u.length),f||(f=0),I>0&&I<m&&(I=m),I===m||u.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),u.length-f<I-m&&(I=u.length-f+m);const q=I-m;return this===u&&typeof s.prototype.copyWithin=="function"?this.copyWithin(f,m,I):s.prototype.set.call(u,this.subarray(m,I),f),q},l.prototype.fill=function(u,f,m,I){if(typeof u=="string"){if(typeof f=="string"?(I=f,f=0,m=this.length):typeof m=="string"&&(I=m,m=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!l.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(u.length===1){const $=u.charCodeAt(0);(I==="utf8"&&$<128||I==="latin1")&&(u=$)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(f<0||this.length<f||this.length<m)throw new RangeError("Out of range index");if(m<=f)return this;f=f>>>0,m=m===void 0?this.length:m>>>0,u||(u=0);let q;if(typeof u=="number")for(q=f;q<m;++q)this[q]=u;else{const $=l.isBuffer(u)?u:l.from(u,I),v=$.length;if(v===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(q=0;q<m-f;++q)this[q+f]=$[q%v]}return this};const Et={};function Ot(u,f,m){Et[u]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}Ot("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ot("ERR_INVALID_ARG_TYPE",function(u,f){return`The "${u}" argument must be of type number. Received type ${typeof f}`},TypeError),Ot("ERR_OUT_OF_RANGE",function(u,f,m){let I=`The value of "${u}" is out of range.`,q=m;return Number.isInteger(m)&&Math.abs(m)>2**32?q=It(String(m)):typeof m=="bigint"&&(q=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(q=It(q)),q+="n"),I+=` It must be ${f}. Received ${q}`,I},RangeError);function It(u){let f="",m=u.length;const I=u[0]==="-"?1:0;for(;m>=I+4;m-=3)f=`_${u.slice(m-3,m)}${f}`;return`${u.slice(0,m)}${f}`}function fe(u,f,m){$t(f,"offset"),(u[f]===void 0||u[f+m]===void 0)&&_t(f,u.length-(m+1))}function Wt(u,f,m,I,q,$){if(u>m||u<f){const v=typeof f=="bigint"?"n":"";let Z;throw f===0||f===BigInt(0)?Z=`>= 0${v} and < 2${v} ** ${($+1)*8}${v}`:Z=`>= -(2${v} ** ${($+1)*8-1}${v}) and < 2 ** ${($+1)*8-1}${v}`,new Et.ERR_OUT_OF_RANGE("value",Z,u)}fe(I,q,$)}function $t(u,f){if(typeof u!="number")throw new Et.ERR_INVALID_ARG_TYPE(f,"number",u)}function _t(u,f,m){throw Math.floor(u)!==u?($t(u,m),new Et.ERR_OUT_OF_RANGE("offset","an integer",u)):f<0?new Et.ERR_BUFFER_OUT_OF_BOUNDS:new Et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,u)}const Kt=/[^+/0-9A-Za-z-_]/g;function we(u){if(u=u.split("=")[0],u=u.trim().replace(Kt,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function te(u,f){f=f||1/0;let m;const I=u.length;let q=null;const $=[];for(let v=0;v<I;++v){if(m=u.charCodeAt(v),m>55295&&m<57344){if(!q){if(m>56319){(f-=3)>-1&&$.push(239,191,189);continue}else if(v+1===I){(f-=3)>-1&&$.push(239,191,189);continue}q=m;continue}if(m<56320){(f-=3)>-1&&$.push(239,191,189),q=m;continue}m=(q-55296<<10|m-56320)+65536}else q&&(f-=3)>-1&&$.push(239,191,189);if(q=null,m<128){if((f-=1)<0)break;$.push(m)}else if(m<2048){if((f-=2)<0)break;$.push(m>>6|192,m&63|128)}else if(m<65536){if((f-=3)<0)break;$.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((f-=4)<0)break;$.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return $}function ne(u){const f=[];for(let m=0;m<u.length;++m)f.push(u.charCodeAt(m)&255);return f}function Pt(u,f){let m,I,q;const $=[];for(let v=0;v<u.length&&!((f-=2)<0);++v)m=u.charCodeAt(v),I=m>>8,q=m%256,$.push(q),$.push(I);return $}function wt(u){return t.toByteArray(we(u))}function ee(u,f,m,I){let q;for(q=0;q<I&&!(q+m>=f.length||q>=u.length);++q)f[q+m]=u[q];return q}function ie(u,f){return u instanceof f||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===f.name}function pe(u){return u!==u}const he=function(){const u="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){const I=m*16;for(let q=0;q<16;++q)f[I+q]=u[m]+u[q]}return f}();function oe(u){return typeof BigInt>"u"?be:u}function be(){throw new Error("BigInt not supported")}})(Ks);const Ne=Ks.Buffer;function Ze(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qs={exports:{}};(function(n,t){(function(e){n.exports=e()})(function(){return function e(i,r,s){function o(d,l){if(!r[d]){if(!i[d]){var g=typeof Ze=="function"&&Ze;if(!l&&g)return g(d,!0);if(a)return a(d,!0);var w=new Error("Cannot find module '"+d+"'");throw w.code="MODULE_NOT_FOUND",w}var b=r[d]={exports:{}};i[d][0].call(b.exports,function(D){var O=i[d][1][D];return o(O||D)},b,b.exports,e,i,r,s)}return r[d].exports}for(var a=typeof Ze=="function"&&Ze,h=0;h<s.length;h++)o(s[h]);return o}({1:[function(e,i,r){var s=e("./utils"),o=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(h){for(var d=[],l,g,w,b,D,O,p,_=0,x=h.length,k=x,F=s.getTypeOf(h)!=="string";_<h.length;)k=x-_,F?(l=h[_++],g=_<x?h[_++]:0,w=_<x?h[_++]:0):(l=h.charCodeAt(_++),g=_<x?h.charCodeAt(_++):0,w=_<x?h.charCodeAt(_++):0),b=l>>2,D=(l&3)<<4|g>>4,O=k>1?(g&15)<<2|w>>6:64,p=k>2?w&63:64,d.push(a.charAt(b)+a.charAt(D)+a.charAt(O)+a.charAt(p));return d.join("")},r.decode=function(h){var d,l,g,w,b,D,O,p=0,_=0,x="data:";if(h.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");h=h.replace(/[^A-Za-z0-9+/=]/g,"");var k=h.length*3/4;if(h.charAt(h.length-1)===a.charAt(64)&&k--,h.charAt(h.length-2)===a.charAt(64)&&k--,k%1!==0)throw new Error("Invalid base64 input, bad content length.");var F;for(o.uint8array?F=new Uint8Array(k|0):F=new Array(k|0);p<h.length;)w=a.indexOf(h.charAt(p++)),b=a.indexOf(h.charAt(p++)),D=a.indexOf(h.charAt(p++)),O=a.indexOf(h.charAt(p++)),d=w<<2|b>>4,l=(b&15)<<4|D>>2,g=(D&3)<<6|O,F[_++]=d,D!==64&&(F[_++]=l),O!==64&&(F[_++]=g);return F}},{"./support":30,"./utils":32}],2:[function(e,i,r){var s=e("./external"),o=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function d(l,g,w,b,D){this.compressedSize=l,this.uncompressedSize=g,this.crc32=w,this.compression=b,this.compressedContent=D}d.prototype={getContentWorker:function(){var l=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),g=this;return l.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(l,g,w){return l.pipe(new a).pipe(new h("uncompressedSize")).pipe(g.compressWorker(w)).pipe(new h("compressedSize")).withStreamInfo("compression",g)},i.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,i,r){var s=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,i,r){var s=e("./utils");function o(){for(var l,g=[],w=0;w<256;w++){l=w;for(var b=0;b<8;b++)l=l&1?3988292384^l>>>1:l>>>1;g[w]=l}return g}var a=o();function h(l,g,w,b){var D=a,O=b+w;l=l^-1;for(var p=b;p<O;p++)l=l>>>8^D[(l^g[p])&255];return l^-1}function d(l,g,w,b){var D=a,O=b+w;l=l^-1;for(var p=b;p<O;p++)l=l>>>8^D[(l^g.charCodeAt(p))&255];return l^-1}i.exports=function(l,g){if(typeof l>"u"||!l.length)return 0;var w=s.getTypeOf(l)!=="string";return w?h(g|0,l,l.length,0):d(g|0,l,l.length,0)}},{"./utils":32}],5:[function(e,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,i,r){var s=null;typeof Promise<"u"?s=Promise:s=e("lie"),i.exports={Promise:s}},{lie:37}],7:[function(e,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),a=e("./utils"),h=e("./stream/GenericWorker"),d=s?"uint8array":"array";r.magic="\b\0";function l(g,w){h.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=w,this.meta={}}a.inherits(l,h),l.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(d,g.data),!1)},l.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(w){g.push({data:w,meta:g.meta})}},r.compressWorker=function(g){return new l("Deflate",g)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,i,r){var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),h=e("../crc32"),d=e("../signature"),l=function(_,x){var k="",F;for(F=0;F<x;F++)k+=String.fromCharCode(_&255),_=_>>>8;return k},g=function(_,x){var k=_;return _||(k=x?16893:33204),(k&65535)<<16},w=function(_){return(_||0)&63},b=function(_,x,k,F,A,T){var B=_.file,z=_.compression,M=T!==a.utf8encode,W=s.transformTo("string",T(B.name)),X=s.transformTo("string",a.utf8encode(B.name)),st=B.comment,dt=s.transformTo("string",T(st)),lt=s.transformTo("string",a.utf8encode(st)),bt=X.length!==B.name.length,ft=lt.length!==st.length,ot,yt,Ct="",jt="",Rt="",pt=B.dir,Dt=B.date,mt={crc32:0,compressedSize:0,uncompressedSize:0};(!x||k)&&(mt.crc32=_.crc32,mt.compressedSize=_.compressedSize,mt.uncompressedSize=_.uncompressedSize);var Bt=0;x&&(Bt|=8),!M&&(bt||ft)&&(Bt|=2048);var Ut=0,Lt=0;pt&&(Ut|=16),A==="UNIX"?(Lt=798,Ut|=g(B.unixPermissions,pt)):(Lt=20,Ut|=w(B.dosPermissions)),ot=Dt.getUTCHours(),ot=ot<<6,ot=ot|Dt.getUTCMinutes(),ot=ot<<5,ot=ot|Dt.getUTCSeconds()/2,yt=Dt.getUTCFullYear()-1980,yt=yt<<4,yt=yt|Dt.getUTCMonth()+1,yt=yt<<5,yt=yt|Dt.getUTCDate(),bt&&(jt=l(1,1)+l(h(W),4)+X,Ct+="up"+l(jt.length,2)+jt),ft&&(Rt=l(1,1)+l(h(dt),4)+lt,Ct+="uc"+l(Rt.length,2)+Rt);var kt="";kt+=`
\0`,kt+=l(Bt,2),kt+=z.magic,kt+=l(ot,2),kt+=l(yt,2),kt+=l(mt.crc32,4),kt+=l(mt.compressedSize,4),kt+=l(mt.uncompressedSize,4),kt+=l(W.length,2),kt+=l(Ct.length,2);var Xt=d.LOCAL_FILE_HEADER+kt+W+Ct,Ht=d.CENTRAL_FILE_HEADER+l(Lt,2)+kt+l(dt.length,2)+"\0\0\0\0"+l(Ut,4)+l(F,4)+W+Ct+dt;return{fileRecord:Xt,dirRecord:Ht}},D=function(_,x,k,F,A){var T="",B=s.transformTo("string",A(F));return T=d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(_,2)+l(_,2)+l(x,4)+l(k,4)+l(B.length,2)+B,T},O=function(_){var x="";return x=d.DATA_DESCRIPTOR+l(_.crc32,4)+l(_.compressedSize,4)+l(_.uncompressedSize,4),x};function p(_,x,k,F){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=k,this.encodeFileName=F,this.streamFiles=_,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,o),p.prototype.push=function(_){var x=_.meta.percent||0,k=this.entriesCount,F=this._sources.length;this.accumulate?this.contentBuffer.push(_):(this.bytesWritten+=_.data.length,o.prototype.push.call(this,{data:_.data,meta:{currentFile:this.currentFile,percent:k?(x+100*(k-F-1))/k:100}}))},p.prototype.openedSource=function(_){this.currentSourceOffset=this.bytesWritten,this.currentFile=_.file.name;var x=this.streamFiles&&!_.file.dir;if(x){var k=b(_,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:k.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(_){this.accumulate=!1;var x=this.streamFiles&&!_.file.dir,k=b(_,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(k.dirRecord),x)this.push({data:O(_),meta:{percent:100}});else for(this.push({data:k.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var _=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var k=this.bytesWritten-_,F=D(this.dirRecords.length,k,_,this.zipComment,this.encodeFileName);this.push({data:F,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(_){this._sources.push(_);var x=this;return _.on("data",function(k){x.processChunk(k)}),_.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),_.on("error",function(k){x.error(k)}),this},p.prototype.resume=function(){if(!o.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},p.prototype.error=function(_){var x=this._sources;if(!o.prototype.error.call(this,_))return!1;for(var k=0;k<x.length;k++)try{x[k].error(_)}catch{}return!0},p.prototype.lock=function(){o.prototype.lock.call(this);for(var _=this._sources,x=0;x<_.length;x++)_[x].lock()},i.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,i,r){var s=e("../compressions"),o=e("./ZipFileWorker"),a=function(h,d){var l=h||d,g=s[l];if(!g)throw new Error(l+" is not a valid compression method !");return g};r.generateWorker=function(h,d,l){var g=new o(d.streamFiles,l,d.platform,d.encodeFileName),w=0;try{h.forEach(function(b,D){w++;var O=a(D.options.compression,d.compression),p=D.options.compressionOptions||d.compressionOptions||{},_=D.dir,x=D.date;D._compressWorker(O,p).withStreamInfo("file",{name:b,dir:_,date:x,comment:D.comment||"",unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions}).pipe(g)}),g.entriesCount=w}catch(b){g.error(b)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}s.prototype=e("./object"),s.prototype.loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=e("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,i,r){var s=e("./utils"),o=e("./external"),a=e("./utf8"),h=e("./zipEntries"),d=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function g(w){return new o.Promise(function(b,D){var O=w.decompressed.getContentWorker().pipe(new d);O.on("error",function(p){D(p)}).on("end",function(){O.streamInfo.crc32!==w.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}i.exports=function(w,b){var D=this;return b=s.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(w)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",w,!0,b.optimizedBinaryString,b.base64).then(function(O){var p=new h(b);return p.load(O),p}).then(function(O){var p=[o.Promise.resolve(O)],_=O.files;if(b.checkCRC32)for(var x=0;x<_.length;x++)p.push(g(_[x]));return o.Promise.all(p)}).then(function(O){for(var p=O.shift(),_=p.files,x=0;x<_.length;x++){var k=_[x],F=k.fileNameStr,A=s.resolve(k.fileNameStr);D.file(A,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:b.createFolders}),k.dir||(D.file(A).unsafeOriginalName=F)}return p.zipComment.length&&(D.comment=p.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,i,r){var s=e("../utils"),o=e("../stream/GenericWorker");function a(h,d){o.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(a,o),a.prototype._bindStream=function(h){var d=this;this._stream=h,h.pause(),h.on("data",function(l){d.push({data:l,meta:{percent:0}})}).on("error",function(l){d.isPaused?this.generatedError=l:d.error(l)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},a.prototype.pause=function(){return o.prototype.pause.call(this)?(this._stream.pause(),!0):!1},a.prototype.resume=function(){return o.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},i.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,i,r){var s=e("readable-stream").Readable,o=e("../utils");o.inherits(a,s);function a(h,d,l){s.call(this,d),this._helper=h;var g=this;h.on("data",function(w,b){g.push(w)||g._helper.pause(),l&&l(b)}).on("error",function(w){g.emit("error",w)}).on("end",function(){g.push(null)})}a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,i,r){i.exports={isNode:typeof Ne<"u",newBufferFrom:function(s,o){if(Ne.from&&Ne.from!==Uint8Array.from)return Ne.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Ne(s,o)},allocBuffer:function(s){if(Ne.alloc)return Ne.alloc(s);var o=new Ne(s);return o.fill(0),o},isBuffer:function(s){return Ne.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,i,r){var s=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),h=e("./stream/StreamHelper"),d=e("./defaults"),l=e("./compressedObject"),g=e("./zipObject"),w=e("./generate"),b=e("./nodejsUtils"),D=e("./nodejs/NodejsStreamInputAdapter"),O=function(A,T,B){var z=o.getTypeOf(T),M,W=o.extend(B||{},d);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&W.unixPermissions&16384&&(W.dir=!0),W.dosPermissions&&W.dosPermissions&16&&(W.dir=!0),W.dir&&(A=_(A)),W.createFolders&&(M=p(A))&&x.call(this,M,!0);var X=z==="string"&&W.binary===!1&&W.base64===!1;(!B||typeof B.binary>"u")&&(W.binary=!X);var st=T instanceof l&&T.uncompressedSize===0;(st||W.dir||!T||T.length===0)&&(W.base64=!1,W.binary=!0,T="",W.compression="STORE",z="string");var dt=null;T instanceof l||T instanceof a?dt=T:b.isNode&&b.isStream(T)?dt=new D(A,T):dt=o.prepareContent(A,T,W.binary,W.optimizedBinaryString,W.base64);var lt=new g(A,dt,W);this.files[A]=lt},p=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var T=A.lastIndexOf("/");return T>0?A.substring(0,T):""},_=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},x=function(A,T){return T=typeof T<"u"?T:d.createFolders,A=_(A),this.files[A]||O.call(this,A,null,{dir:!0,createFolders:T}),this.files[A]};function k(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var T,B,z;for(T in this.files)z=this.files[T],B=T.slice(this.root.length,T.length),B&&T.slice(0,this.root.length)===this.root&&A(B,z)},filter:function(A){var T=[];return this.forEach(function(B,z){A(B,z)&&T.push(z)}),T},file:function(A,T,B){if(arguments.length===1)if(k(A)){var z=A;return this.filter(function(W,X){return!X.dir&&z.test(W)})}else{var M=this.files[this.root+A];return M&&!M.dir?M:null}else A=this.root+A,O.call(this,A,T,B);return this},folder:function(A){if(!A)return this;if(k(A))return this.filter(function(M,W){return W.dir&&A.test(M)});var T=this.root+A,B=x.call(this,T),z=this.clone();return z.root=B.name,z},remove:function(A){A=this.root+A;var T=this.files[A];if(T||(A.slice(-1)!=="/"&&(A+="/"),T=this.files[A]),T&&!T.dir)delete this.files[A];else for(var B=this.filter(function(M,W){return W.name.slice(0,A.length)===A}),z=0;z<B.length;z++)delete this.files[B[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var T,B={};try{if(B=o.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),B.type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");o.checkSupport(B.type),(B.platform==="darwin"||B.platform==="freebsd"||B.platform==="linux"||B.platform==="sunos")&&(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var z=B.comment||this.comment||"";T=w.generateWorker(this,B,z)}catch(M){T=new a("error"),T.error(M)}return new h(T,B.type||"string",B.mimeType)},generateAsync:function(A,T){return this.generateInternalStream(A).accumulate(T)},generateNodeStream:function(A,T){return A=A||{},A.type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(T)}};i.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,i,r){i.exports=e("stream")},{stream:void 0}],17:[function(e,i,r){var s=e("./DataReader"),o=e("../utils");function a(h){s.call(this,h);for(var d=0;d<this.data.length;d++)h[d]=h[d]&255}o.inherits(a,s),a.prototype.byteAt=function(h){return this.data[this.zero+h]},a.prototype.lastIndexOfSignature=function(h){for(var d=h.charCodeAt(0),l=h.charCodeAt(1),g=h.charCodeAt(2),w=h.charCodeAt(3),b=this.length-4;b>=0;--b)if(this.data[b]===d&&this.data[b+1]===l&&this.data[b+2]===g&&this.data[b+3]===w)return b-this.zero;return-1},a.prototype.readAndCheckSignature=function(h){var d=h.charCodeAt(0),l=h.charCodeAt(1),g=h.charCodeAt(2),w=h.charCodeAt(3),b=this.readData(4);return d===b[0]&&l===b[1]&&g===b[2]&&w===b[3]},a.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,i,r){var s=e("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var h=0,d;for(this.checkOffset(a),d=this.index+a-1;d>=this.index;d--)h=(h<<8)+this.byteAt(d);return this.index+=a,h},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}},i.exports=o},{"../utils":32}],19:[function(e,i,r){var s=e("./Uint8ArrayReader"),o=e("../utils");function a(h){s.call(this,h)}o.inherits(a,s),a.prototype.readData=function(h){this.checkOffset(h);var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,i,r){var s=e("./DataReader"),o=e("../utils");function a(h){s.call(this,h)}o.inherits(a,s),a.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},a.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},a.prototype.readAndCheckSignature=function(h){var d=this.readData(4);return h===d},a.prototype.readData=function(h){this.checkOffset(h);var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,i,r){var s=e("./ArrayReader"),o=e("../utils");function a(h){s.call(this,h)}o.inherits(a,s),a.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,i,r){var s=e("../utils"),o=e("../support"),a=e("./ArrayReader"),h=e("./StringReader"),d=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");i.exports=function(g){var w=s.getTypeOf(g);return s.checkSupport(w),w==="string"&&!o.uint8array?new h(g):w==="nodebuffer"?new d(g):o.uint8array?new l(s.transformTo("uint8array",g)):new a(s.transformTo("array",g))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,i,r){var s=e("./GenericWorker"),o=e("../utils");function a(h){s.call(this,"ConvertWorker to "+h),this.destType=h}o.inherits(a,s),a.prototype.processChunk=function(h){this.push({data:o.transformTo(this.destType,h.data),meta:h.meta})},i.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,i,r){var s=e("./GenericWorker"),o=e("../crc32"),a=e("../utils");function h(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a.inherits(h,s),h.prototype.processChunk=function(d){this.streamInfo.crc32=o(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,i,r){var s=e("../utils"),o=e("./GenericWorker");function a(h){o.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}s.inherits(a,o),a.prototype.processChunk=function(h){if(h){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+h.data.length}o.prototype.processChunk.call(this,h)},i.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,i,r){var s=e("../utils"),o=e("./GenericWorker"),a=16*1024;function h(d){o.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(g){l.dataIsReady=!0,l.data=g,l.max=g&&g.length||0,l.type=s.getTypeOf(g),l.isPaused||l._tickAndRepeat()},function(g){l.error(g)})}s.inherits(h,o),h.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return o.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=a,l=null,g=Math.min(this.max,this.index+d);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,g);break;case"uint8array":l=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":l=this.data.slice(this.index,g);break}return this.index=g,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(e,i,r){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return this.isFinished?!1:(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var h=0;h<this._listeners[o].length;h++)this._listeners[o][h].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(h){a.processChunk(h)}),o.on("end",function(){a.end()}),o.on("error",function(h){a.error(h)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var o=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=s},{}],29:[function(e,i,r){var s=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),h=e("../base64"),d=e("../support"),l=e("../external"),g=null;if(d.nodestream)try{g=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(p,_,x){switch(p){case"blob":return s.newBlob(s.transformTo("arraybuffer",_),x);case"base64":return h.encode(_);default:return s.transformTo(p,_)}}function b(p,_){var x,k=0,F=null,A=0;for(x=0;x<_.length;x++)A+=_[x].length;switch(p){case"string":return _.join("");case"array":return Array.prototype.concat.apply([],_);case"uint8array":for(F=new Uint8Array(A),x=0;x<_.length;x++)F.set(_[x],k),k+=_[x].length;return F;case"nodebuffer":return Ne.concat(_);default:throw new Error("concat : unsupported type '"+p+"'")}}function D(p,_){return new l.Promise(function(x,k){var F=[],A=p._internalType,T=p._outputType,B=p._mimeType;p.on("data",function(z,M){F.push(z),_&&_(M)}).on("error",function(z){F=[],k(z)}).on("end",function(){try{var z=w(T,b(A,F),B);x(z)}catch(M){k(M)}F=[]}).resume()})}function O(p,_,x){var k=_;switch(_){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string";break}try{this._internalType=k,this._outputType=_,this._mimeType=x,s.checkSupport(k),this._worker=p.pipe(new o(k)),p.lock()}catch(F){this._worker=new a("error"),this._worker.error(F)}}O.prototype={accumulate:function(p){return D(this,p)},on:function(p,_){var x=this;return p==="data"?this._worker.on(p,function(k){_.call(x,k.data,k.meta)}):this._worker.on(p,function(){s.delay(_,arguments,x)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},p)}},i.exports=O},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Ne<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,a=new o;a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,i,r){for(var s=e("./utils"),o=e("./support"),a=e("./nodejsUtils"),h=e("./stream/GenericWorker"),d=new Array(256),l=0;l<256;l++)d[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;d[254]=d[254]=1;var g=function(p){var _,x,k,F,A,T=p.length,B=0;for(F=0;F<T;F++)x=p.charCodeAt(F),(x&64512)===55296&&F+1<T&&(k=p.charCodeAt(F+1),(k&64512)===56320&&(x=65536+(x-55296<<10)+(k-56320),F++)),B+=x<128?1:x<2048?2:x<65536?3:4;for(o.uint8array?_=new Uint8Array(B):_=new Array(B),A=0,F=0;A<B;F++)x=p.charCodeAt(F),(x&64512)===55296&&F+1<T&&(k=p.charCodeAt(F+1),(k&64512)===56320&&(x=65536+(x-55296<<10)+(k-56320),F++)),x<128?_[A++]=x:x<2048?(_[A++]=192|x>>>6,_[A++]=128|x&63):x<65536?(_[A++]=224|x>>>12,_[A++]=128|x>>>6&63,_[A++]=128|x&63):(_[A++]=240|x>>>18,_[A++]=128|x>>>12&63,_[A++]=128|x>>>6&63,_[A++]=128|x&63);return _},w=function(p,_){var x;for(_=_||p.length,_>p.length&&(_=p.length),x=_-1;x>=0&&(p[x]&192)===128;)x--;return x<0||x===0?_:x+d[p[x]]>_?x:_},b=function(p){var _,x,k,F,A=p.length,T=new Array(A*2);for(x=0,_=0;_<A;){if(k=p[_++],k<128){T[x++]=k;continue}if(F=d[k],F>4){T[x++]=65533,_+=F-1;continue}for(k&=F===2?31:F===3?15:7;F>1&&_<A;)k=k<<6|p[_++]&63,F--;if(F>1){T[x++]=65533;continue}k<65536?T[x++]=k:(k-=65536,T[x++]=55296|k>>10&1023,T[x++]=56320|k&1023)}return T.length!==x&&(T.subarray?T=T.subarray(0,x):T.length=x),s.applyFromCharCode(T)};r.utf8encode=function(p){return o.nodebuffer?a.newBufferFrom(p,"utf-8"):g(p)},r.utf8decode=function(p){return o.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):(p=s.transformTo(o.uint8array?"uint8array":"array",p),b(p))};function D(){h.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(D,h),D.prototype.processChunk=function(p){var _=s.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=_;_=new Uint8Array(x.length+this.leftOver.length),_.set(this.leftOver,0),_.set(x,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var k=w(_),F=_;k!==_.length&&(o.uint8array?(F=_.subarray(0,k),this.leftOver=_.subarray(k,_.length)):(F=_.slice(0,k),this.leftOver=_.slice(k,_.length))),this.push({data:r.utf8decode(F),meta:p.meta})},D.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=D;function O(){h.call(this,"utf-8 encode")}s.inherits(O,h),O.prototype.processChunk=function(p){this.push({data:r.utf8encode(p.data),meta:p.meta})},r.Utf8EncodeWorker=O},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,i,r){var s=e("./support"),o=e("./base64"),a=e("./nodejsUtils"),h=e("./external");e("setimmediate");function d(p){var _=null;return s.uint8array?_=new Uint8Array(p.length):_=new Array(p.length),g(p,_)}r.newBlob=function(p,_){r.checkSupport("blob");try{return new Blob([p],{type:_})}catch{try{var x=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,k=new x;return k.append(p),k.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};function l(p){return p}function g(p,_){for(var x=0;x<p.length;++x)_[x]=p.charCodeAt(x)&255;return _}var w={stringifyByChunk:function(p,_,x){var k=[],F=0,A=p.length;if(A<=x)return String.fromCharCode.apply(null,p);for(;F<A;)_==="array"||_==="nodebuffer"?k.push(String.fromCharCode.apply(null,p.slice(F,Math.min(F+x,A)))):k.push(String.fromCharCode.apply(null,p.subarray(F,Math.min(F+x,A)))),F+=x;return k.join("")},stringifyByChar:function(p){for(var _="",x=0;x<p.length;x++)_+=String.fromCharCode(p[x]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function b(p){var _=65536,x=r.getTypeOf(p),k=!0;if(x==="uint8array"?k=w.applyCanBeUsed.uint8array:x==="nodebuffer"&&(k=w.applyCanBeUsed.nodebuffer),k)for(;_>1;)try{return w.stringifyByChunk(p,x,_)}catch{_=Math.floor(_/2)}return w.stringifyByChar(p)}r.applyFromCharCode=b;function D(p,_){for(var x=0;x<p.length;x++)_[x]=p[x];return _}var O={};O.string={string:l,array:function(p){return g(p,new Array(p.length))},arraybuffer:function(p){return O.string.uint8array(p).buffer},uint8array:function(p){return g(p,new Uint8Array(p.length))},nodebuffer:function(p){return g(p,a.allocBuffer(p.length))}},O.array={string:b,array:l,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return a.newBufferFrom(p)}},O.arraybuffer={string:function(p){return b(new Uint8Array(p))},array:function(p){return D(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:l,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return a.newBufferFrom(new Uint8Array(p))}},O.uint8array={string:b,array:function(p){return D(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:l,nodebuffer:function(p){return a.newBufferFrom(p)}},O.nodebuffer={string:b,array:function(p){return D(p,new Array(p.length))},arraybuffer:function(p){return O.nodebuffer.uint8array(p).buffer},uint8array:function(p){return D(p,new Uint8Array(p.length))},nodebuffer:l},r.transformTo=function(p,_){if(_||(_=""),!p)return _;r.checkSupport(p);var x=r.getTypeOf(_),k=O[x][p](_);return k},r.resolve=function(p){for(var _=p.split("/"),x=[],k=0;k<_.length;k++){var F=_[k];F==="."||F===""&&k!==0&&k!==_.length-1||(F===".."?x.pop():x.push(F))}return x.join("/")},r.getTypeOf=function(p){if(typeof p=="string")return"string";if(Object.prototype.toString.call(p)==="[object Array]")return"array";if(s.nodebuffer&&a.isBuffer(p))return"nodebuffer";if(s.uint8array&&p instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&p instanceof ArrayBuffer)return"arraybuffer"},r.checkSupport=function(p){var _=s[p.toLowerCase()];if(!_)throw new Error(p+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(p){var _="",x,k;for(k=0;k<(p||"").length;k++)x=p.charCodeAt(k),_+="\\x"+(x<16?"0":"")+x.toString(16).toUpperCase();return _},r.delay=function(p,_,x){setImmediate(function(){p.apply(x||null,_||[])})},r.inherits=function(p,_){var x=function(){};x.prototype=_.prototype,p.prototype=new x},r.extend=function(){var p={},_,x;for(_=0;_<arguments.length;_++)for(x in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],x)&&typeof p[x]>"u"&&(p[x]=arguments[_][x]);return p},r.prepareContent=function(p,_,x,k,F){var A=h.Promise.resolve(_).then(function(T){var B=s.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1);return B&&typeof FileReader<"u"?new h.Promise(function(z,M){var W=new FileReader;W.onload=function(X){z(X.target.result)},W.onerror=function(X){M(X.target.error)},W.readAsArrayBuffer(T)}):T});return A.then(function(T){var B=r.getTypeOf(T);return B?(B==="arraybuffer"?T=r.transformTo("uint8array",T):B==="string"&&(F?T=o.decode(T):x&&k!==!0&&(T=d(T))),T):h.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,i,r){var s=e("./reader/readerFor"),o=e("./utils"),a=e("./signature"),h=e("./zipEntry"),d=e("./support");function l(g){this.files=[],this.loadOptions=g}l.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(w)+", expected "+o.pretty(g)+")")}},isSignature:function(g,w){var b=this.reader.index;this.reader.setIndex(g);var D=this.reader.readString(4),O=D===w;return this.reader.setIndex(b),O},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),w=d.uint8array?"uint8array":"array",b=o.transformTo(w,g);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g=this.zip64EndOfCentralSize-44,w=0,b,D,O;w<g;)b=this.reader.readInt(2),D=this.reader.readInt(4),O=this.reader.readData(D),this.zip64ExtensibleData[b]={id:b,length:D,value:O}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,w;for(g=0;g<this.files.length;g++)w=this.files[g],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)g=new h({zip64:this.zip64},this.loadOptions),g.readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(g<0){var w=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw w?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(g);var b=g;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,g=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),g<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var D=this.centralDirOffset+this.centralDirSize;this.zip64&&(D+=20,D+=12+this.zip64EndOfCentralSize);var O=b-D;if(O>0)this.isSignature(b,a.CENTRAL_FILE_HEADER)||(this.reader.zero=O);else if(O<0)throw new Error("Corrupted zip: missing "+Math.abs(O)+" bytes.")},prepareReader:function(g){this.reader=s(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,i,r){var s=e("./reader/readerFor"),o=e("./utils"),a=e("./compressedObject"),h=e("./crc32"),d=e("./utf8"),l=e("./compressions"),g=e("./support"),w=0,b=3,D=function(p){for(var _ in l)if(Object.prototype.hasOwnProperty.call(l,_)&&l[_].magic===p)return l[_];return null};function O(p,_){this.options=p,this.loadOptions=_}O.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(p){var _,x;if(p.skip(22),this.fileNameLength=p.readInt(2),x=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(_=D(this.compressionMethod),_===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var _=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(_),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),p===w&&(this.dosPermissions=this.externalFileAttributes&63),p===b&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var _=p.index+this.extraFieldsLength,x,k,F;for(this.extraFields||(this.extraFields={});p.index+4<_;)x=p.readInt(2),k=p.readInt(2),F=p.readData(k),this.extraFields[x]={id:x,length:k,value:F};p.setIndex(_)},handleUTF8:function(){var p=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var x=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var F=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(F)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var _=s(p.value);return _.readInt(1)!==1||h(this.fileName)!==_.readInt(4)?null:d.utf8decode(_.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var _=s(p.value);return _.readInt(1)!==1||h(this.fileComment)!==_.readInt(4)?null:d.utf8decode(_.readData(p.length-5))}return null}},i.exports=O},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,i,r){var s=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),h=e("./compressedObject"),d=e("./stream/GenericWorker"),l=function(D,O,p){this.name=D,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=O,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}};l.prototype={internalStream:function(D){var O=null,p="string";try{if(!D)throw new Error("No output type specified.");p=D.toLowerCase();var _=p==="string"||p==="text";(p==="binarystring"||p==="text")&&(p="string"),O=this._decompressWorker();var x=!this._dataBinary;x&&!_&&(O=O.pipe(new a.Utf8EncodeWorker)),!x&&_&&(O=O.pipe(new a.Utf8DecodeWorker))}catch(k){O=new d("error"),O.error(k)}return new s(O,p,"")},async:function(D,O){return this.internalStream(D).accumulate(O)},nodeStream:function(D,O){return this.internalStream(D||"nodebuffer").toNodejsStream(O)},_compressWorker:function(D,O){if(this._data instanceof h&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new a.Utf8EncodeWorker)),h.createWorkerFrom(p,D,O)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<g.length;b++)l.prototype[g[b]]=w;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,i,r){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var h=0,d=new o(D),l=s.document.createTextNode("");d.observe(l,{characterData:!0}),a=function(){l.data=h=++h%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var g=new s.MessageChannel;g.port1.onmessage=D,a=function(){g.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var p=s.document.createElement("script");p.onreadystatechange=function(){D(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:a=function(){setTimeout(D,0)};var w,b=[];function D(){w=!0;for(var p,_,x=b.length;x;){for(_=b,b=[],p=-1;++p<x;)_[p]();x=b.length}w=!1}i.exports=O;function O(p){b.push(p)===1&&!w&&a()}}).call(this,typeof Ce<"u"?Ce:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,i,r){var s=e("immediate");function o(){}var a={},h=["REJECTED"],d=["FULFILLED"],l=["PENDING"];i.exports=g;function g(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,A!==o&&O(this,A)}g.prototype.finally=function(A){if(typeof A!="function")return this;var T=this.constructor;return this.then(B,z);function B(M){function W(){return M}return T.resolve(A()).then(W)}function z(M){function W(){throw M}return T.resolve(A()).then(W)}},g.prototype.catch=function(A){return this.then(null,A)},g.prototype.then=function(A,T){if(typeof A!="function"&&this.state===d||typeof T!="function"&&this.state===h)return this;var B=new this.constructor(o);if(this.state!==l){var z=this.state===d?A:T;b(B,z,this.outcome)}else this.queue.push(new w(B,A,T));return B};function w(A,T,B){this.promise=A,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(A){a.resolve(this.promise,A)},w.prototype.otherCallFulfilled=function(A){b(this.promise,this.onFulfilled,A)},w.prototype.callRejected=function(A){a.reject(this.promise,A)},w.prototype.otherCallRejected=function(A){b(this.promise,this.onRejected,A)};function b(A,T,B){s(function(){var z;try{z=T(B)}catch(M){return a.reject(A,M)}z===A?a.reject(A,new TypeError("Cannot resolve promise with itself")):a.resolve(A,z)})}a.resolve=function(A,T){var B=p(D,T);if(B.status==="error")return a.reject(A,B.value);var z=B.value;if(z)O(A,z);else{A.state=d,A.outcome=T;for(var M=-1,W=A.queue.length;++M<W;)A.queue[M].callFulfilled(T)}return A},a.reject=function(A,T){A.state=h,A.outcome=T;for(var B=-1,z=A.queue.length;++B<z;)A.queue[B].callRejected(T);return A};function D(A){var T=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof T=="function")return function(){T.apply(A,arguments)}}function O(A,T){var B=!1;function z(st){B||(B=!0,a.reject(A,st))}function M(st){B||(B=!0,a.resolve(A,st))}function W(){T(M,z)}var X=p(W);X.status==="error"&&z(X.value)}function p(A,T){var B={};try{B.value=A(T),B.status="success"}catch(z){B.status="error",B.value=z}return B}g.resolve=_;function _(A){return A instanceof this?A:a.resolve(new this(o),A)}g.reject=x;function x(A){var T=new this(o);return a.reject(T,A)}g.all=k;function k(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=A.length,z=!1;if(!B)return this.resolve([]);for(var M=new Array(B),W=0,X=-1,st=new this(o);++X<B;)dt(A[X],X);return st;function dt(lt,bt){T.resolve(lt).then(ft,function(ot){z||(z=!0,a.reject(st,ot))});function ft(ot){M[bt]=ot,++W===B&&!z&&(z=!0,a.resolve(st,M))}}}g.race=F;function F(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=A.length,z=!1;if(!B)return this.resolve([]);for(var M=-1,W=new this(o);++M<B;)X(A[M]);return W;function X(st){T.resolve(st).then(function(dt){z||(z=!0,a.resolve(W,dt))},function(dt){z||(z=!0,a.reject(W,dt))})}}},{immediate:36}],38:[function(e,i,r){var s=e("./lib/utils/common").assign,o=e("./lib/deflate"),a=e("./lib/inflate"),h=e("./lib/zlib/constants"),d={};s(d,o,a,h),i.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,i,r){var s=e("./zlib/deflate"),o=e("./utils/common"),a=e("./utils/strings"),h=e("./zlib/messages"),d=e("./zlib/zstream"),l=Object.prototype.toString,g=0,w=4,b=0,D=1,O=2,p=-1,_=0,x=8;function k(B){if(!(this instanceof k))return new k(B);this.options=o.assign({level:p,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},B||{});var z=this.options;z.raw&&z.windowBits>0?z.windowBits=-z.windowBits:z.gzip&&z.windowBits>0&&z.windowBits<16&&(z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var M=s.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if(M!==b)throw new Error(h[M]);if(z.header&&s.deflateSetHeader(this.strm,z.header),z.dictionary){var W;if(typeof z.dictionary=="string"?W=a.string2buf(z.dictionary):l.call(z.dictionary)==="[object ArrayBuffer]"?W=new Uint8Array(z.dictionary):W=z.dictionary,M=s.deflateSetDictionary(this.strm,W),M!==b)throw new Error(h[M]);this._dict_set=!0}}k.prototype.push=function(B,z){var M=this.strm,W=this.options.chunkSize,X,st;if(this.ended)return!1;st=z===~~z?z:z===!0?w:g,typeof B=="string"?M.input=a.string2buf(B):l.call(B)==="[object ArrayBuffer]"?M.input=new Uint8Array(B):M.input=B,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new o.Buf8(W),M.next_out=0,M.avail_out=W),X=s.deflate(M,st),X!==D&&X!==b)return this.onEnd(X),this.ended=!0,!1;(M.avail_out===0||M.avail_in===0&&(st===w||st===O))&&(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(M.output,M.next_out))):this.onData(o.shrinkBuf(M.output,M.next_out)))}while((M.avail_in>0||M.avail_out===0)&&X!==D);return st===w?(X=s.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===b):(st===O&&(this.onEnd(b),M.avail_out=0),!0)},k.prototype.onData=function(B){this.chunks.push(B)},k.prototype.onEnd=function(B){B===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=B,this.msg=this.strm.msg};function F(B,z){var M=new k(z);if(M.push(B,!0),M.err)throw M.msg||h[M.err];return M.result}function A(B,z){return z=z||{},z.raw=!0,F(B,z)}function T(B,z){return z=z||{},z.gzip=!0,F(B,z)}r.Deflate=k,r.deflate=F,r.deflateRaw=A,r.gzip=T},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,i,r){var s=e("./zlib/inflate"),o=e("./utils/common"),a=e("./utils/strings"),h=e("./zlib/constants"),d=e("./zlib/messages"),l=e("./zlib/zstream"),g=e("./zlib/gzheader"),w=Object.prototype.toString;function b(p){if(!(this instanceof b))return new b(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var _=this.options;_.raw&&_.windowBits>=0&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),_.windowBits>=0&&_.windowBits<16&&!(p&&p.windowBits)&&(_.windowBits+=32),_.windowBits>15&&_.windowBits<48&&(_.windowBits&15||(_.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,_.windowBits);if(x!==h.Z_OK)throw new Error(d[x]);this.header=new g,s.inflateGetHeader(this.strm,this.header)}b.prototype.push=function(p,_){var x=this.strm,k=this.options.chunkSize,F=this.options.dictionary,A,T,B,z,M,W,X=!1;if(this.ended)return!1;T=_===~~_?_:_===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof p=="string"?x.input=a.binstring2buf(p):w.call(p)==="[object ArrayBuffer]"?x.input=new Uint8Array(p):x.input=p,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new o.Buf8(k),x.next_out=0,x.avail_out=k),A=s.inflate(x,h.Z_NO_FLUSH),A===h.Z_NEED_DICT&&F&&(typeof F=="string"?W=a.string2buf(F):w.call(F)==="[object ArrayBuffer]"?W=new Uint8Array(F):W=F,A=s.inflateSetDictionary(this.strm,W)),A===h.Z_BUF_ERROR&&X===!0&&(A=h.Z_OK,X=!1),A!==h.Z_STREAM_END&&A!==h.Z_OK)return this.onEnd(A),this.ended=!0,!1;x.next_out&&(x.avail_out===0||A===h.Z_STREAM_END||x.avail_in===0&&(T===h.Z_FINISH||T===h.Z_SYNC_FLUSH))&&(this.options.to==="string"?(B=a.utf8border(x.output,x.next_out),z=x.next_out-B,M=a.buf2string(x.output,B),x.next_out=z,x.avail_out=k-z,z&&o.arraySet(x.output,x.output,B,z,0),this.onData(M)):this.onData(o.shrinkBuf(x.output,x.next_out))),x.avail_in===0&&x.avail_out===0&&(X=!0)}while((x.avail_in>0||x.avail_out===0)&&A!==h.Z_STREAM_END);return A===h.Z_STREAM_END&&(T=h.Z_FINISH),T===h.Z_FINISH?(A=s.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===h.Z_OK):(T===h.Z_SYNC_FLUSH&&(this.onEnd(h.Z_OK),x.avail_out=0),!0)},b.prototype.onData=function(p){this.chunks.push(p)},b.prototype.onEnd=function(p){p===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg};function D(p,_){var x=new b(_);if(x.push(p,!0),x.err)throw x.msg||d[x.err];return x.result}function O(p,_){return _=_||{},_.raw=!0,D(p,_)}r.Inflate=b,r.inflate=D,r.inflateRaw=O,r.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(h){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var l=d.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var g in l)l.hasOwnProperty(g)&&(h[g]=l[g])}}return h},r.shrinkBuf=function(h,d){return h.length===d?h:h.subarray?h.subarray(0,d):(h.length=d,h)};var o={arraySet:function(h,d,l,g,w){if(d.subarray&&h.subarray){h.set(d.subarray(l,l+g),w);return}for(var b=0;b<g;b++)h[w+b]=d[l+b]},flattenChunks:function(h){var d,l,g,w,b,D;for(g=0,d=0,l=h.length;d<l;d++)g+=h[d].length;for(D=new Uint8Array(g),w=0,d=0,l=h.length;d<l;d++)b=h[d],D.set(b,w),w+=b.length;return D}},a={arraySet:function(h,d,l,g,w){for(var b=0;b<g;b++)h[w+b]=d[l+b]},flattenChunks:function(h){return[].concat.apply([],h)}};r.setTyped=function(h){h?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(s)},{}],42:[function(e,i,r){var s=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var h=new s.Buf8(256),d=0;d<256;d++)h[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;h[254]=h[254]=1,r.string2buf=function(g){var w,b,D,O,p,_=g.length,x=0;for(O=0;O<_;O++)b=g.charCodeAt(O),(b&64512)===55296&&O+1<_&&(D=g.charCodeAt(O+1),(D&64512)===56320&&(b=65536+(b-55296<<10)+(D-56320),O++)),x+=b<128?1:b<2048?2:b<65536?3:4;for(w=new s.Buf8(x),p=0,O=0;p<x;O++)b=g.charCodeAt(O),(b&64512)===55296&&O+1<_&&(D=g.charCodeAt(O+1),(D&64512)===56320&&(b=65536+(b-55296<<10)+(D-56320),O++)),b<128?w[p++]=b:b<2048?(w[p++]=192|b>>>6,w[p++]=128|b&63):b<65536?(w[p++]=224|b>>>12,w[p++]=128|b>>>6&63,w[p++]=128|b&63):(w[p++]=240|b>>>18,w[p++]=128|b>>>12&63,w[p++]=128|b>>>6&63,w[p++]=128|b&63);return w};function l(g,w){if(w<65537&&(g.subarray&&a||!g.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(g,w));for(var b="",D=0;D<w;D++)b+=String.fromCharCode(g[D]);return b}r.buf2binstring=function(g){return l(g,g.length)},r.binstring2buf=function(g){for(var w=new s.Buf8(g.length),b=0,D=w.length;b<D;b++)w[b]=g.charCodeAt(b);return w},r.buf2string=function(g,w){var b,D,O,p,_=w||g.length,x=new Array(_*2);for(D=0,b=0;b<_;){if(O=g[b++],O<128){x[D++]=O;continue}if(p=h[O],p>4){x[D++]=65533,b+=p-1;continue}for(O&=p===2?31:p===3?15:7;p>1&&b<_;)O=O<<6|g[b++]&63,p--;if(p>1){x[D++]=65533;continue}O<65536?x[D++]=O:(O-=65536,x[D++]=55296|O>>10&1023,x[D++]=56320|O&1023)}return l(x,D)},r.utf8border=function(g,w){var b;for(w=w||g.length,w>g.length&&(w=g.length),b=w-1;b>=0&&(g[b]&192)===128;)b--;return b<0||b===0?w:b+h[g[b]]>w?b:w}},{"./common":41}],43:[function(e,i,r){function s(o,a,h,d){for(var l=o&65535|0,g=o>>>16&65535|0,w=0;h!==0;){w=h>2e3?2e3:h,h-=w;do l=l+a[d++]|0,g=g+l|0;while(--w);l%=65521,g%=65521}return l|g<<16|0}i.exports=s},{}],44:[function(e,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,i,r){function s(){for(var h,d=[],l=0;l<256;l++){h=l;for(var g=0;g<8;g++)h=h&1?3988292384^h>>>1:h>>>1;d[l]=h}return d}var o=s();function a(h,d,l,g){var w=o,b=g+l;h^=-1;for(var D=g;D<b;D++)h=h>>>8^w[(h^d[D])&255];return h^-1}i.exports=a},{}],46:[function(e,i,r){var s=e("../utils/common"),o=e("./trees"),a=e("./adler32"),h=e("./crc32"),d=e("./messages"),l=0,g=1,w=3,b=4,D=5,O=0,p=1,_=-2,x=-3,k=-5,F=-1,A=1,T=2,B=3,z=4,M=0,W=2,X=8,st=9,dt=15,lt=8,bt=29,ft=256,ot=ft+1+bt,yt=30,Ct=19,jt=2*ot+1,Rt=15,pt=3,Dt=258,mt=Dt+pt+1,Bt=32,Ut=42,Lt=69,kt=73,Xt=91,Ht=103,Et=113,Ot=666,It=1,fe=2,Wt=3,$t=4,_t=3;function Kt(c,G){return c.msg=d[G],G}function we(c){return(c<<1)-(c>4?9:0)}function te(c){for(var G=c.length;--G>=0;)c[G]=0}function ne(c){var G=c.state,Y=G.pending;Y>c.avail_out&&(Y=c.avail_out),Y!==0&&(s.arraySet(c.output,G.pending_buf,G.pending_out,Y,c.next_out),c.next_out+=Y,G.pending_out+=Y,c.total_out+=Y,c.avail_out-=Y,G.pending-=Y,G.pending===0&&(G.pending_out=0))}function Pt(c,G){o._tr_flush_block(c,c.block_start>=0?c.block_start:-1,c.strstart-c.block_start,G),c.block_start=c.strstart,ne(c.strm)}function wt(c,G){c.pending_buf[c.pending++]=G}function ee(c,G){c.pending_buf[c.pending++]=G>>>8&255,c.pending_buf[c.pending++]=G&255}function ie(c,G,Y,E){var L=c.avail_in;return L>E&&(L=E),L===0?0:(c.avail_in-=L,s.arraySet(G,c.input,c.next_in,L,Y),c.state.wrap===1?c.adler=a(c.adler,G,L,Y):c.state.wrap===2&&(c.adler=h(c.adler,G,L,Y)),c.next_in+=L,c.total_in+=L,L)}function pe(c,G){var Y=c.max_chain_length,E=c.strstart,L,V,ct=c.prev_length,ut=c.nice_match,ht=c.strstart>c.w_size-mt?c.strstart-(c.w_size-mt):0,xt=c.window,ke=c.w_mask,Vt=c.prev,St=c.strstart+Dt,Jt=xt[E+ct-1],ae=xt[E+ct];c.prev_length>=c.good_match&&(Y>>=2),ut>c.lookahead&&(ut=c.lookahead);do if(L=G,!(xt[L+ct]!==ae||xt[L+ct-1]!==Jt||xt[L]!==xt[E]||xt[++L]!==xt[E+1])){E+=2,L++;do;while(xt[++E]===xt[++L]&&xt[++E]===xt[++L]&&xt[++E]===xt[++L]&&xt[++E]===xt[++L]&&xt[++E]===xt[++L]&&xt[++E]===xt[++L]&&xt[++E]===xt[++L]&&xt[++E]===xt[++L]&&E<St);if(V=Dt-(St-E),E=St-Dt,V>ct){if(c.match_start=G,ct=V,V>=ut)break;Jt=xt[E+ct-1],ae=xt[E+ct]}}while((G=Vt[G&ke])>ht&&--Y!==0);return ct<=c.lookahead?ct:c.lookahead}function he(c){var G=c.w_size,Y,E,L,V,ct;do{if(V=c.window_size-c.lookahead-c.strstart,c.strstart>=G+(G-mt)){s.arraySet(c.window,c.window,G,G,0),c.match_start-=G,c.strstart-=G,c.block_start-=G,E=c.hash_size,Y=E;do L=c.head[--Y],c.head[Y]=L>=G?L-G:0;while(--E);E=G,Y=E;do L=c.prev[--Y],c.prev[Y]=L>=G?L-G:0;while(--E);V+=G}if(c.strm.avail_in===0)break;if(E=ie(c.strm,c.window,c.strstart+c.lookahead,V),c.lookahead+=E,c.lookahead+c.insert>=pt)for(ct=c.strstart-c.insert,c.ins_h=c.window[ct],c.ins_h=(c.ins_h<<c.hash_shift^c.window[ct+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[ct+pt-1])&c.hash_mask,c.prev[ct&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=ct,ct++,c.insert--,!(c.lookahead+c.insert<pt)););}while(c.lookahead<mt&&c.strm.avail_in!==0)}function oe(c,G){var Y=65535;for(Y>c.pending_buf_size-5&&(Y=c.pending_buf_size-5);;){if(c.lookahead<=1){if(he(c),c.lookahead===0&&G===l)return It;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var E=c.block_start+Y;if((c.strstart===0||c.strstart>=E)&&(c.lookahead=c.strstart-E,c.strstart=E,Pt(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-mt&&(Pt(c,!1),c.strm.avail_out===0))return It}return c.insert=0,G===b?(Pt(c,!0),c.strm.avail_out===0?Wt:$t):(c.strstart>c.block_start&&(Pt(c,!1),c.strm.avail_out),It)}function be(c,G){for(var Y,E;;){if(c.lookahead<mt){if(he(c),c.lookahead<mt&&G===l)return It;if(c.lookahead===0)break}if(Y=0,c.lookahead>=pt&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+pt-1])&c.hash_mask,Y=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),Y!==0&&c.strstart-Y<=c.w_size-mt&&(c.match_length=pe(c,Y)),c.match_length>=pt)if(E=o._tr_tally(c,c.strstart-c.match_start,c.match_length-pt),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=pt){c.match_length--;do c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+pt-1])&c.hash_mask,Y=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart;while(--c.match_length!==0);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else E=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(E&&(Pt(c,!1),c.strm.avail_out===0))return It}return c.insert=c.strstart<pt-1?c.strstart:pt-1,G===b?(Pt(c,!0),c.strm.avail_out===0?Wt:$t):c.last_lit&&(Pt(c,!1),c.strm.avail_out===0)?It:fe}function u(c,G){for(var Y,E,L;;){if(c.lookahead<mt){if(he(c),c.lookahead<mt&&G===l)return It;if(c.lookahead===0)break}if(Y=0,c.lookahead>=pt&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+pt-1])&c.hash_mask,Y=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=pt-1,Y!==0&&c.prev_length<c.max_lazy_match&&c.strstart-Y<=c.w_size-mt&&(c.match_length=pe(c,Y),c.match_length<=5&&(c.strategy===A||c.match_length===pt&&c.strstart-c.match_start>4096)&&(c.match_length=pt-1)),c.prev_length>=pt&&c.match_length<=c.prev_length){L=c.strstart+c.lookahead-pt,E=o._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-pt),c.lookahead-=c.prev_length-1,c.prev_length-=2;do++c.strstart<=L&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+pt-1])&c.hash_mask,Y=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart);while(--c.prev_length!==0);if(c.match_available=0,c.match_length=pt-1,c.strstart++,E&&(Pt(c,!1),c.strm.avail_out===0))return It}else if(c.match_available){if(E=o._tr_tally(c,0,c.window[c.strstart-1]),E&&Pt(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return It}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(E=o._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<pt-1?c.strstart:pt-1,G===b?(Pt(c,!0),c.strm.avail_out===0?Wt:$t):c.last_lit&&(Pt(c,!1),c.strm.avail_out===0)?It:fe}function f(c,G){for(var Y,E,L,V,ct=c.window;;){if(c.lookahead<=Dt){if(he(c),c.lookahead<=Dt&&G===l)return It;if(c.lookahead===0)break}if(c.match_length=0,c.lookahead>=pt&&c.strstart>0&&(L=c.strstart-1,E=ct[L],E===ct[++L]&&E===ct[++L]&&E===ct[++L])){V=c.strstart+Dt;do;while(E===ct[++L]&&E===ct[++L]&&E===ct[++L]&&E===ct[++L]&&E===ct[++L]&&E===ct[++L]&&E===ct[++L]&&E===ct[++L]&&L<V);c.match_length=Dt-(V-L),c.match_length>c.lookahead&&(c.match_length=c.lookahead)}if(c.match_length>=pt?(Y=o._tr_tally(c,1,c.match_length-pt),c.lookahead-=c.match_length,c.strstart+=c.match_length,c.match_length=0):(Y=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++),Y&&(Pt(c,!1),c.strm.avail_out===0))return It}return c.insert=0,G===b?(Pt(c,!0),c.strm.avail_out===0?Wt:$t):c.last_lit&&(Pt(c,!1),c.strm.avail_out===0)?It:fe}function m(c,G){for(var Y;;){if(c.lookahead===0&&(he(c),c.lookahead===0)){if(G===l)return It;break}if(c.match_length=0,Y=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++,Y&&(Pt(c,!1),c.strm.avail_out===0))return It}return c.insert=0,G===b?(Pt(c,!0),c.strm.avail_out===0?Wt:$t):c.last_lit&&(Pt(c,!1),c.strm.avail_out===0)?It:fe}function I(c,G,Y,E,L){this.good_length=c,this.max_lazy=G,this.nice_length=Y,this.max_chain=E,this.func=L}var q;q=[new I(0,0,0,0,oe),new I(4,4,8,4,be),new I(4,5,16,8,be),new I(4,6,32,32,be),new I(4,4,16,16,u),new I(8,16,32,32,u),new I(8,16,128,128,u),new I(8,32,128,256,u),new I(32,128,258,1024,u),new I(32,258,258,4096,u)];function $(c){c.window_size=2*c.w_size,te(c.head),c.max_lazy_match=q[c.level].max_lazy,c.good_match=q[c.level].good_length,c.nice_match=q[c.level].nice_length,c.max_chain_length=q[c.level].max_chain,c.strstart=0,c.block_start=0,c.lookahead=0,c.insert=0,c.match_length=c.prev_length=pt-1,c.match_available=0,c.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(jt*2),this.dyn_dtree=new s.Buf16((2*yt+1)*2),this.bl_tree=new s.Buf16((2*Ct+1)*2),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Rt+1),this.heap=new s.Buf16(2*ot+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*ot+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(c){var G;return!c||!c.state?Kt(c,_):(c.total_in=c.total_out=0,c.data_type=W,G=c.state,G.pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?Ut:Et,c.adler=G.wrap===2?0:1,G.last_flush=l,o._tr_init(G),O)}function J(c){var G=Z(c);return G===O&&$(c.state),G}function et(c,G){return!c||!c.state||c.state.wrap!==2?_:(c.state.gzhead=G,O)}function R(c,G,Y,E,L,V){if(!c)return _;var ct=1;if(G===F&&(G=6),E<0?(ct=0,E=-E):E>15&&(ct=2,E-=16),L<1||L>st||Y!==X||E<8||E>15||G<0||G>9||V<0||V>z)return Kt(c,_);E===8&&(E=9);var ut=new v;return c.state=ut,ut.strm=c,ut.wrap=ct,ut.gzhead=null,ut.w_bits=E,ut.w_size=1<<ut.w_bits,ut.w_mask=ut.w_size-1,ut.hash_bits=L+7,ut.hash_size=1<<ut.hash_bits,ut.hash_mask=ut.hash_size-1,ut.hash_shift=~~((ut.hash_bits+pt-1)/pt),ut.window=new s.Buf8(ut.w_size*2),ut.head=new s.Buf16(ut.hash_size),ut.prev=new s.Buf16(ut.w_size),ut.lit_bufsize=1<<L+6,ut.pending_buf_size=ut.lit_bufsize*4,ut.pending_buf=new s.Buf8(ut.pending_buf_size),ut.d_buf=1*ut.lit_bufsize,ut.l_buf=3*ut.lit_bufsize,ut.level=G,ut.strategy=V,ut.method=Y,J(c)}function H(c,G){return R(c,G,X,dt,lt,M)}function y(c,G){var Y,E,L,V;if(!c||!c.state||G>D||G<0)return c?Kt(c,_):_;if(E=c.state,!c.output||!c.input&&c.avail_in!==0||E.status===Ot&&G!==b)return Kt(c,c.avail_out===0?k:_);if(E.strm=c,Y=E.last_flush,E.last_flush=G,E.status===Ut)if(E.wrap===2)c.adler=0,wt(E,31),wt(E,139),wt(E,8),E.gzhead?(wt(E,(E.gzhead.text?1:0)+(E.gzhead.hcrc?2:0)+(E.gzhead.extra?4:0)+(E.gzhead.name?8:0)+(E.gzhead.comment?16:0)),wt(E,E.gzhead.time&255),wt(E,E.gzhead.time>>8&255),wt(E,E.gzhead.time>>16&255),wt(E,E.gzhead.time>>24&255),wt(E,E.level===9?2:E.strategy>=T||E.level<2?4:0),wt(E,E.gzhead.os&255),E.gzhead.extra&&E.gzhead.extra.length&&(wt(E,E.gzhead.extra.length&255),wt(E,E.gzhead.extra.length>>8&255)),E.gzhead.hcrc&&(c.adler=h(c.adler,E.pending_buf,E.pending,0)),E.gzindex=0,E.status=Lt):(wt(E,0),wt(E,0),wt(E,0),wt(E,0),wt(E,0),wt(E,E.level===9?2:E.strategy>=T||E.level<2?4:0),wt(E,_t),E.status=Et);else{var ct=X+(E.w_bits-8<<4)<<8,ut=-1;E.strategy>=T||E.level<2?ut=0:E.level<6?ut=1:E.level===6?ut=2:ut=3,ct|=ut<<6,E.strstart!==0&&(ct|=Bt),ct+=31-ct%31,E.status=Et,ee(E,ct),E.strstart!==0&&(ee(E,c.adler>>>16),ee(E,c.adler&65535)),c.adler=1}if(E.status===Lt)if(E.gzhead.extra){for(L=E.pending;E.gzindex<(E.gzhead.extra.length&65535)&&!(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>L&&(c.adler=h(c.adler,E.pending_buf,E.pending-L,L)),ne(c),L=E.pending,E.pending===E.pending_buf_size));)wt(E,E.gzhead.extra[E.gzindex]&255),E.gzindex++;E.gzhead.hcrc&&E.pending>L&&(c.adler=h(c.adler,E.pending_buf,E.pending-L,L)),E.gzindex===E.gzhead.extra.length&&(E.gzindex=0,E.status=kt)}else E.status=kt;if(E.status===kt)if(E.gzhead.name){L=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>L&&(c.adler=h(c.adler,E.pending_buf,E.pending-L,L)),ne(c),L=E.pending,E.pending===E.pending_buf_size)){V=1;break}E.gzindex<E.gzhead.name.length?V=E.gzhead.name.charCodeAt(E.gzindex++)&255:V=0,wt(E,V)}while(V!==0);E.gzhead.hcrc&&E.pending>L&&(c.adler=h(c.adler,E.pending_buf,E.pending-L,L)),V===0&&(E.gzindex=0,E.status=Xt)}else E.status=Xt;if(E.status===Xt)if(E.gzhead.comment){L=E.pending;do{if(E.pending===E.pending_buf_size&&(E.gzhead.hcrc&&E.pending>L&&(c.adler=h(c.adler,E.pending_buf,E.pending-L,L)),ne(c),L=E.pending,E.pending===E.pending_buf_size)){V=1;break}E.gzindex<E.gzhead.comment.length?V=E.gzhead.comment.charCodeAt(E.gzindex++)&255:V=0,wt(E,V)}while(V!==0);E.gzhead.hcrc&&E.pending>L&&(c.adler=h(c.adler,E.pending_buf,E.pending-L,L)),V===0&&(E.status=Ht)}else E.status=Ht;if(E.status===Ht&&(E.gzhead.hcrc?(E.pending+2>E.pending_buf_size&&ne(c),E.pending+2<=E.pending_buf_size&&(wt(E,c.adler&255),wt(E,c.adler>>8&255),c.adler=0,E.status=Et)):E.status=Et),E.pending!==0){if(ne(c),c.avail_out===0)return E.last_flush=-1,O}else if(c.avail_in===0&&we(G)<=we(Y)&&G!==b)return Kt(c,k);if(E.status===Ot&&c.avail_in!==0)return Kt(c,k);if(c.avail_in!==0||E.lookahead!==0||G!==l&&E.status!==Ot){var ht=E.strategy===T?m(E,G):E.strategy===B?f(E,G):q[E.level].func(E,G);if((ht===Wt||ht===$t)&&(E.status=Ot),ht===It||ht===Wt)return c.avail_out===0&&(E.last_flush=-1),O;if(ht===fe&&(G===g?o._tr_align(E):G!==D&&(o._tr_stored_block(E,0,0,!1),G===w&&(te(E.head),E.lookahead===0&&(E.strstart=0,E.block_start=0,E.insert=0))),ne(c),c.avail_out===0))return E.last_flush=-1,O}return G!==b?O:E.wrap<=0?p:(E.wrap===2?(wt(E,c.adler&255),wt(E,c.adler>>8&255),wt(E,c.adler>>16&255),wt(E,c.adler>>24&255),wt(E,c.total_in&255),wt(E,c.total_in>>8&255),wt(E,c.total_in>>16&255),wt(E,c.total_in>>24&255)):(ee(E,c.adler>>>16),ee(E,c.adler&65535)),ne(c),E.wrap>0&&(E.wrap=-E.wrap),E.pending!==0?O:p)}function Q(c){var G;return!c||!c.state?_:(G=c.state.status,G!==Ut&&G!==Lt&&G!==kt&&G!==Xt&&G!==Ht&&G!==Et&&G!==Ot?Kt(c,_):(c.state=null,G===Et?Kt(c,x):O))}function vt(c,G){var Y=G.length,E,L,V,ct,ut,ht,xt,ke;if(!c||!c.state||(E=c.state,ct=E.wrap,ct===2||ct===1&&E.status!==Ut||E.lookahead))return _;for(ct===1&&(c.adler=a(c.adler,G,Y,0)),E.wrap=0,Y>=E.w_size&&(ct===0&&(te(E.head),E.strstart=0,E.block_start=0,E.insert=0),ke=new s.Buf8(E.w_size),s.arraySet(ke,G,Y-E.w_size,E.w_size,0),G=ke,Y=E.w_size),ut=c.avail_in,ht=c.next_in,xt=c.input,c.avail_in=Y,c.next_in=0,c.input=G,he(E);E.lookahead>=pt;){L=E.strstart,V=E.lookahead-(pt-1);do E.ins_h=(E.ins_h<<E.hash_shift^E.window[L+pt-1])&E.hash_mask,E.prev[L&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=L,L++;while(--V);E.strstart=L,E.lookahead=pt-1,he(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=pt-1,E.match_available=0,c.next_in=ht,c.input=xt,c.avail_in=ut,E.wrap=ct,O}r.deflateInit=H,r.deflateInit2=R,r.deflateReset=J,r.deflateResetKeep=Z,r.deflateSetHeader=et,r.deflate=y,r.deflateEnd=Q,r.deflateSetDictionary=vt,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,i,r){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}i.exports=s},{}],48:[function(e,i,r){var s=30,o=12;i.exports=function(a,h){var d,l,g,w,b,D,O,p,_,x,k,F,A,T,B,z,M,W,X,st,dt,lt,bt,ft,ot;d=a.state,l=a.next_in,ft=a.input,g=l+(a.avail_in-5),w=a.next_out,ot=a.output,b=w-(h-a.avail_out),D=w+(a.avail_out-257),O=d.dmax,p=d.wsize,_=d.whave,x=d.wnext,k=d.window,F=d.hold,A=d.bits,T=d.lencode,B=d.distcode,z=(1<<d.lenbits)-1,M=(1<<d.distbits)-1;t:do{A<15&&(F+=ft[l++]<<A,A+=8,F+=ft[l++]<<A,A+=8),W=T[F&z];e:for(;;){if(X=W>>>24,F>>>=X,A-=X,X=W>>>16&255,X===0)ot[w++]=W&65535;else if(X&16){st=W&65535,X&=15,X&&(A<X&&(F+=ft[l++]<<A,A+=8),st+=F&(1<<X)-1,F>>>=X,A-=X),A<15&&(F+=ft[l++]<<A,A+=8,F+=ft[l++]<<A,A+=8),W=B[F&M];i:for(;;){if(X=W>>>24,F>>>=X,A-=X,X=W>>>16&255,X&16){if(dt=W&65535,X&=15,A<X&&(F+=ft[l++]<<A,A+=8,A<X&&(F+=ft[l++]<<A,A+=8)),dt+=F&(1<<X)-1,dt>O){a.msg="invalid distance too far back",d.mode=s;break t}if(F>>>=X,A-=X,X=w-b,dt>X){if(X=dt-X,X>_&&d.sane){a.msg="invalid distance too far back",d.mode=s;break t}if(lt=0,bt=k,x===0){if(lt+=p-X,X<st){st-=X;do ot[w++]=k[lt++];while(--X);lt=w-dt,bt=ot}}else if(x<X){if(lt+=p+x-X,X-=x,X<st){st-=X;do ot[w++]=k[lt++];while(--X);if(lt=0,x<st){X=x,st-=X;do ot[w++]=k[lt++];while(--X);lt=w-dt,bt=ot}}}else if(lt+=x-X,X<st){st-=X;do ot[w++]=k[lt++];while(--X);lt=w-dt,bt=ot}for(;st>2;)ot[w++]=bt[lt++],ot[w++]=bt[lt++],ot[w++]=bt[lt++],st-=3;st&&(ot[w++]=bt[lt++],st>1&&(ot[w++]=bt[lt++]))}else{lt=w-dt;do ot[w++]=ot[lt++],ot[w++]=ot[lt++],ot[w++]=ot[lt++],st-=3;while(st>2);st&&(ot[w++]=ot[lt++],st>1&&(ot[w++]=ot[lt++]))}}else if(X&64){a.msg="invalid distance code",d.mode=s;break t}else{W=B[(W&65535)+(F&(1<<X)-1)];continue i}break}}else if(X&64)if(X&32){d.mode=o;break t}else{a.msg="invalid literal/length code",d.mode=s;break t}else{W=T[(W&65535)+(F&(1<<X)-1)];continue e}break}}while(l<g&&w<D);st=A>>3,l-=st,A-=st<<3,F&=(1<<A)-1,a.next_in=l,a.next_out=w,a.avail_in=l<g?5+(g-l):5-(l-g),a.avail_out=w<D?257+(D-w):257-(w-D),d.hold=F,d.bits=A}},{}],49:[function(e,i,r){var s=e("../utils/common"),o=e("./adler32"),a=e("./crc32"),h=e("./inffast"),d=e("./inftrees"),l=0,g=1,w=2,b=4,D=5,O=6,p=0,_=1,x=2,k=-2,F=-3,A=-4,T=-5,B=8,z=1,M=2,W=3,X=4,st=5,dt=6,lt=7,bt=8,ft=9,ot=10,yt=11,Ct=12,jt=13,Rt=14,pt=15,Dt=16,mt=17,Bt=18,Ut=19,Lt=20,kt=21,Xt=22,Ht=23,Et=24,Ot=25,It=26,fe=27,Wt=28,$t=29,_t=30,Kt=31,we=32,te=852,ne=592,Pt=15,wt=Pt;function ee(R){return(R>>>24&255)+(R>>>8&65280)+((R&65280)<<8)+((R&255)<<24)}function ie(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function pe(R){var H;return!R||!R.state?k:(H=R.state,R.total_in=R.total_out=H.total=0,R.msg="",H.wrap&&(R.adler=H.wrap&1),H.mode=z,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new s.Buf32(te),H.distcode=H.distdyn=new s.Buf32(ne),H.sane=1,H.back=-1,p)}function he(R){var H;return!R||!R.state?k:(H=R.state,H.wsize=0,H.whave=0,H.wnext=0,pe(R))}function oe(R,H){var y,Q;return!R||!R.state||(Q=R.state,H<0?(y=0,H=-H):(y=(H>>4)+1,H<48&&(H&=15)),H&&(H<8||H>15))?k:(Q.window!==null&&Q.wbits!==H&&(Q.window=null),Q.wrap=y,Q.wbits=H,he(R))}function be(R,H){var y,Q;return R?(Q=new ie,R.state=Q,Q.window=null,y=oe(R,H),y!==p&&(R.state=null),y):k}function u(R){return be(R,wt)}var f=!0,m,I;function q(R){if(f){var H;for(m=new s.Buf32(512),I=new s.Buf32(32),H=0;H<144;)R.lens[H++]=8;for(;H<256;)R.lens[H++]=9;for(;H<280;)R.lens[H++]=7;for(;H<288;)R.lens[H++]=8;for(d(g,R.lens,0,288,m,0,R.work,{bits:9}),H=0;H<32;)R.lens[H++]=5;d(w,R.lens,0,32,I,0,R.work,{bits:5}),f=!1}R.lencode=m,R.lenbits=9,R.distcode=I,R.distbits=5}function $(R,H,y,Q){var vt,c=R.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new s.Buf8(c.wsize)),Q>=c.wsize?(s.arraySet(c.window,H,y-c.wsize,c.wsize,0),c.wnext=0,c.whave=c.wsize):(vt=c.wsize-c.wnext,vt>Q&&(vt=Q),s.arraySet(c.window,H,y-Q,vt,c.wnext),Q-=vt,Q?(s.arraySet(c.window,H,y-Q,Q,0),c.wnext=Q,c.whave=c.wsize):(c.wnext+=vt,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=vt))),0}function v(R,H){var y,Q,vt,c,G,Y,E,L,V,ct,ut,ht,xt,ke,Vt=0,St,Jt,ae,ce,Ke,Je,Yt,ge,se=new s.Buf8(4),Se,Ee,Fi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return k;y=R.state,y.mode===Ct&&(y.mode=jt),G=R.next_out,vt=R.output,E=R.avail_out,c=R.next_in,Q=R.input,Y=R.avail_in,L=y.hold,V=y.bits,ct=Y,ut=E,ge=p;t:for(;;)switch(y.mode){case z:if(y.wrap===0){y.mode=jt;break}for(;V<16;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(y.wrap&2&&L===35615){y.check=0,se[0]=L&255,se[1]=L>>>8&255,y.check=a(y.check,se,2,0),L=0,V=0,y.mode=M;break}if(y.flags=0,y.head&&(y.head.done=!1),!(y.wrap&1)||(((L&255)<<8)+(L>>8))%31){R.msg="incorrect header check",y.mode=_t;break}if((L&15)!==B){R.msg="unknown compression method",y.mode=_t;break}if(L>>>=4,V-=4,Yt=(L&15)+8,y.wbits===0)y.wbits=Yt;else if(Yt>y.wbits){R.msg="invalid window size",y.mode=_t;break}y.dmax=1<<Yt,R.adler=y.check=1,y.mode=L&512?ot:Ct,L=0,V=0;break;case M:for(;V<16;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(y.flags=L,(y.flags&255)!==B){R.msg="unknown compression method",y.mode=_t;break}if(y.flags&57344){R.msg="unknown header flags set",y.mode=_t;break}y.head&&(y.head.text=L>>8&1),y.flags&512&&(se[0]=L&255,se[1]=L>>>8&255,y.check=a(y.check,se,2,0)),L=0,V=0,y.mode=W;case W:for(;V<32;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}y.head&&(y.head.time=L),y.flags&512&&(se[0]=L&255,se[1]=L>>>8&255,se[2]=L>>>16&255,se[3]=L>>>24&255,y.check=a(y.check,se,4,0)),L=0,V=0,y.mode=X;case X:for(;V<16;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}y.head&&(y.head.xflags=L&255,y.head.os=L>>8),y.flags&512&&(se[0]=L&255,se[1]=L>>>8&255,y.check=a(y.check,se,2,0)),L=0,V=0,y.mode=st;case st:if(y.flags&1024){for(;V<16;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}y.length=L,y.head&&(y.head.extra_len=L),y.flags&512&&(se[0]=L&255,se[1]=L>>>8&255,y.check=a(y.check,se,2,0)),L=0,V=0}else y.head&&(y.head.extra=null);y.mode=dt;case dt:if(y.flags&1024&&(ht=y.length,ht>Y&&(ht=Y),ht&&(y.head&&(Yt=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),s.arraySet(y.head.extra,Q,c,ht,Yt)),y.flags&512&&(y.check=a(y.check,Q,ht,c)),Y-=ht,c+=ht,y.length-=ht),y.length))break t;y.length=0,y.mode=lt;case lt:if(y.flags&2048){if(Y===0)break t;ht=0;do Yt=Q[c+ht++],y.head&&Yt&&y.length<65536&&(y.head.name+=String.fromCharCode(Yt));while(Yt&&ht<Y);if(y.flags&512&&(y.check=a(y.check,Q,ht,c)),Y-=ht,c+=ht,Yt)break t}else y.head&&(y.head.name=null);y.length=0,y.mode=bt;case bt:if(y.flags&4096){if(Y===0)break t;ht=0;do Yt=Q[c+ht++],y.head&&Yt&&y.length<65536&&(y.head.comment+=String.fromCharCode(Yt));while(Yt&&ht<Y);if(y.flags&512&&(y.check=a(y.check,Q,ht,c)),Y-=ht,c+=ht,Yt)break t}else y.head&&(y.head.comment=null);y.mode=ft;case ft:if(y.flags&512){for(;V<16;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(L!==(y.check&65535)){R.msg="header crc mismatch",y.mode=_t;break}L=0,V=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),R.adler=y.check=0,y.mode=Ct;break;case ot:for(;V<32;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}R.adler=y.check=ee(L),L=0,V=0,y.mode=yt;case yt:if(y.havedict===0)return R.next_out=G,R.avail_out=E,R.next_in=c,R.avail_in=Y,y.hold=L,y.bits=V,x;R.adler=y.check=1,y.mode=Ct;case Ct:if(H===D||H===O)break t;case jt:if(y.last){L>>>=V&7,V-=V&7,y.mode=fe;break}for(;V<3;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}switch(y.last=L&1,L>>>=1,V-=1,L&3){case 0:y.mode=Rt;break;case 1:if(q(y),y.mode=Lt,H===O){L>>>=2,V-=2;break t}break;case 2:y.mode=mt;break;case 3:R.msg="invalid block type",y.mode=_t}L>>>=2,V-=2;break;case Rt:for(L>>>=V&7,V-=V&7;V<32;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if((L&65535)!==(L>>>16^65535)){R.msg="invalid stored block lengths",y.mode=_t;break}if(y.length=L&65535,L=0,V=0,y.mode=pt,H===O)break t;case pt:y.mode=Dt;case Dt:if(ht=y.length,ht){if(ht>Y&&(ht=Y),ht>E&&(ht=E),ht===0)break t;s.arraySet(vt,Q,c,ht,G),Y-=ht,c+=ht,E-=ht,G+=ht,y.length-=ht;break}y.mode=Ct;break;case mt:for(;V<14;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(y.nlen=(L&31)+257,L>>>=5,V-=5,y.ndist=(L&31)+1,L>>>=5,V-=5,y.ncode=(L&15)+4,L>>>=4,V-=4,y.nlen>286||y.ndist>30){R.msg="too many length or distance symbols",y.mode=_t;break}y.have=0,y.mode=Bt;case Bt:for(;y.have<y.ncode;){for(;V<3;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}y.lens[Fi[y.have++]]=L&7,L>>>=3,V-=3}for(;y.have<19;)y.lens[Fi[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,Se={bits:y.lenbits},ge=d(l,y.lens,0,19,y.lencode,0,y.work,Se),y.lenbits=Se.bits,ge){R.msg="invalid code lengths set",y.mode=_t;break}y.have=0,y.mode=Ut;case Ut:for(;y.have<y.nlen+y.ndist;){for(;Vt=y.lencode[L&(1<<y.lenbits)-1],St=Vt>>>24,Jt=Vt>>>16&255,ae=Vt&65535,!(St<=V);){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(ae<16)L>>>=St,V-=St,y.lens[y.have++]=ae;else{if(ae===16){for(Ee=St+2;V<Ee;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(L>>>=St,V-=St,y.have===0){R.msg="invalid bit length repeat",y.mode=_t;break}Yt=y.lens[y.have-1],ht=3+(L&3),L>>>=2,V-=2}else if(ae===17){for(Ee=St+3;V<Ee;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}L>>>=St,V-=St,Yt=0,ht=3+(L&7),L>>>=3,V-=3}else{for(Ee=St+7;V<Ee;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}L>>>=St,V-=St,Yt=0,ht=11+(L&127),L>>>=7,V-=7}if(y.have+ht>y.nlen+y.ndist){R.msg="invalid bit length repeat",y.mode=_t;break}for(;ht--;)y.lens[y.have++]=Yt}}if(y.mode===_t)break;if(y.lens[256]===0){R.msg="invalid code -- missing end-of-block",y.mode=_t;break}if(y.lenbits=9,Se={bits:y.lenbits},ge=d(g,y.lens,0,y.nlen,y.lencode,0,y.work,Se),y.lenbits=Se.bits,ge){R.msg="invalid literal/lengths set",y.mode=_t;break}if(y.distbits=6,y.distcode=y.distdyn,Se={bits:y.distbits},ge=d(w,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,Se),y.distbits=Se.bits,ge){R.msg="invalid distances set",y.mode=_t;break}if(y.mode=Lt,H===O)break t;case Lt:y.mode=kt;case kt:if(Y>=6&&E>=258){R.next_out=G,R.avail_out=E,R.next_in=c,R.avail_in=Y,y.hold=L,y.bits=V,h(R,ut),G=R.next_out,vt=R.output,E=R.avail_out,c=R.next_in,Q=R.input,Y=R.avail_in,L=y.hold,V=y.bits,y.mode===Ct&&(y.back=-1);break}for(y.back=0;Vt=y.lencode[L&(1<<y.lenbits)-1],St=Vt>>>24,Jt=Vt>>>16&255,ae=Vt&65535,!(St<=V);){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(Jt&&!(Jt&240)){for(ce=St,Ke=Jt,Je=ae;Vt=y.lencode[Je+((L&(1<<ce+Ke)-1)>>ce)],St=Vt>>>24,Jt=Vt>>>16&255,ae=Vt&65535,!(ce+St<=V);){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}L>>>=ce,V-=ce,y.back+=ce}if(L>>>=St,V-=St,y.back+=St,y.length=ae,Jt===0){y.mode=It;break}if(Jt&32){y.back=-1,y.mode=Ct;break}if(Jt&64){R.msg="invalid literal/length code",y.mode=_t;break}y.extra=Jt&15,y.mode=Xt;case Xt:if(y.extra){for(Ee=y.extra;V<Ee;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}y.length+=L&(1<<y.extra)-1,L>>>=y.extra,V-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=Ht;case Ht:for(;Vt=y.distcode[L&(1<<y.distbits)-1],St=Vt>>>24,Jt=Vt>>>16&255,ae=Vt&65535,!(St<=V);){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(!(Jt&240)){for(ce=St,Ke=Jt,Je=ae;Vt=y.distcode[Je+((L&(1<<ce+Ke)-1)>>ce)],St=Vt>>>24,Jt=Vt>>>16&255,ae=Vt&65535,!(ce+St<=V);){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}L>>>=ce,V-=ce,y.back+=ce}if(L>>>=St,V-=St,y.back+=St,Jt&64){R.msg="invalid distance code",y.mode=_t;break}y.offset=ae,y.extra=Jt&15,y.mode=Et;case Et:if(y.extra){for(Ee=y.extra;V<Ee;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}y.offset+=L&(1<<y.extra)-1,L>>>=y.extra,V-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){R.msg="invalid distance too far back",y.mode=_t;break}y.mode=Ot;case Ot:if(E===0)break t;if(ht=ut-E,y.offset>ht){if(ht=y.offset-ht,ht>y.whave&&y.sane){R.msg="invalid distance too far back",y.mode=_t;break}ht>y.wnext?(ht-=y.wnext,xt=y.wsize-ht):xt=y.wnext-ht,ht>y.length&&(ht=y.length),ke=y.window}else ke=vt,xt=G-y.offset,ht=y.length;ht>E&&(ht=E),E-=ht,y.length-=ht;do vt[G++]=ke[xt++];while(--ht);y.length===0&&(y.mode=kt);break;case It:if(E===0)break t;vt[G++]=y.length,E--,y.mode=kt;break;case fe:if(y.wrap){for(;V<32;){if(Y===0)break t;Y--,L|=Q[c++]<<V,V+=8}if(ut-=E,R.total_out+=ut,y.total+=ut,ut&&(R.adler=y.check=y.flags?a(y.check,vt,ut,G-ut):o(y.check,vt,ut,G-ut)),ut=E,(y.flags?L:ee(L))!==y.check){R.msg="incorrect data check",y.mode=_t;break}L=0,V=0}y.mode=Wt;case Wt:if(y.wrap&&y.flags){for(;V<32;){if(Y===0)break t;Y--,L+=Q[c++]<<V,V+=8}if(L!==(y.total&4294967295)){R.msg="incorrect length check",y.mode=_t;break}L=0,V=0}y.mode=$t;case $t:ge=_;break t;case _t:ge=F;break t;case Kt:return A;case we:default:return k}return R.next_out=G,R.avail_out=E,R.next_in=c,R.avail_in=Y,y.hold=L,y.bits=V,(y.wsize||ut!==R.avail_out&&y.mode<_t&&(y.mode<fe||H!==b))&&$(R,R.output,R.next_out,ut-R.avail_out),ct-=R.avail_in,ut-=R.avail_out,R.total_in+=ct,R.total_out+=ut,y.total+=ut,y.wrap&&ut&&(R.adler=y.check=y.flags?a(y.check,vt,ut,R.next_out-ut):o(y.check,vt,ut,R.next_out-ut)),R.data_type=y.bits+(y.last?64:0)+(y.mode===Ct?128:0)+(y.mode===Lt||y.mode===pt?256:0),(ct===0&&ut===0||H===b)&&ge===p&&(ge=T),ge}function Z(R){if(!R||!R.state)return k;var H=R.state;return H.window&&(H.window=null),R.state=null,p}function J(R,H){var y;return!R||!R.state||(y=R.state,!(y.wrap&2))?k:(y.head=H,H.done=!1,p)}function et(R,H){var y=H.length,Q,vt,c;return!R||!R.state||(Q=R.state,Q.wrap!==0&&Q.mode!==yt)?k:Q.mode===yt&&(vt=1,vt=o(vt,H,y,0),vt!==Q.check)?F:(c=$(R,H,y,y),c?(Q.mode=Kt,A):(Q.havedict=1,p))}r.inflateReset=he,r.inflateReset2=oe,r.inflateResetKeep=pe,r.inflateInit=u,r.inflateInit2=be,r.inflate=v,r.inflateEnd=Z,r.inflateGetHeader=J,r.inflateSetDictionary=et,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,i,r){var s=e("../utils/common"),o=15,a=852,h=592,d=0,l=1,g=2,w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],D=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],O=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(p,_,x,k,F,A,T,B){var z=B.bits,M=0,W=0,X=0,st=0,dt=0,lt=0,bt=0,ft=0,ot=0,yt=0,Ct,jt,Rt,pt,Dt,mt=null,Bt=0,Ut,Lt=new s.Buf16(o+1),kt=new s.Buf16(o+1),Xt=null,Ht=0,Et,Ot,It;for(M=0;M<=o;M++)Lt[M]=0;for(W=0;W<k;W++)Lt[_[x+W]]++;for(dt=z,st=o;st>=1&&Lt[st]===0;st--);if(dt>st&&(dt=st),st===0)return F[A++]=1<<24|64<<16|0,F[A++]=1<<24|64<<16|0,B.bits=1,0;for(X=1;X<st&&Lt[X]===0;X++);for(dt<X&&(dt=X),ft=1,M=1;M<=o;M++)if(ft<<=1,ft-=Lt[M],ft<0)return-1;if(ft>0&&(p===d||st!==1))return-1;for(kt[1]=0,M=1;M<o;M++)kt[M+1]=kt[M]+Lt[M];for(W=0;W<k;W++)_[x+W]!==0&&(T[kt[_[x+W]]++]=W);if(p===d?(mt=Xt=T,Ut=19):p===l?(mt=w,Bt-=257,Xt=b,Ht-=257,Ut=256):(mt=D,Xt=O,Ut=-1),yt=0,W=0,M=X,Dt=A,lt=dt,bt=0,Rt=-1,ot=1<<dt,pt=ot-1,p===l&&ot>a||p===g&&ot>h)return 1;for(;;){Et=M-bt,T[W]<Ut?(Ot=0,It=T[W]):T[W]>Ut?(Ot=Xt[Ht+T[W]],It=mt[Bt+T[W]]):(Ot=96,It=0),Ct=1<<M-bt,jt=1<<lt,X=jt;do jt-=Ct,F[Dt+(yt>>bt)+jt]=Et<<24|Ot<<16|It|0;while(jt!==0);for(Ct=1<<M-1;yt&Ct;)Ct>>=1;if(Ct!==0?(yt&=Ct-1,yt+=Ct):yt=0,W++,--Lt[M]===0){if(M===st)break;M=_[x+T[W]]}if(M>dt&&(yt&pt)!==Rt){for(bt===0&&(bt=dt),Dt+=X,lt=M-bt,ft=1<<lt;lt+bt<st&&(ft-=Lt[lt+bt],!(ft<=0));)lt++,ft<<=1;if(ot+=1<<lt,p===l&&ot>a||p===g&&ot>h)return 1;Rt=yt&pt,F[Rt]=dt<<24|lt<<16|Dt-A|0}}return yt!==0&&(F[Dt+yt]=M-bt<<24|64<<16|0),B.bits=dt,0}},{"../utils/common":41}],51:[function(e,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,i,r){var s=e("../utils/common"),o=4,a=0,h=1,d=2;function l(v){for(var Z=v.length;--Z>=0;)v[Z]=0}var g=0,w=1,b=2,D=3,O=258,p=29,_=256,x=_+1+p,k=30,F=19,A=2*x+1,T=15,B=16,z=7,M=256,W=16,X=17,st=18,dt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],lt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ft=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot=512,yt=new Array((x+2)*2);l(yt);var Ct=new Array(k*2);l(Ct);var jt=new Array(ot);l(jt);var Rt=new Array(O-D+1);l(Rt);var pt=new Array(p);l(pt);var Dt=new Array(k);l(Dt);function mt(v,Z,J,et,R){this.static_tree=v,this.extra_bits=Z,this.extra_base=J,this.elems=et,this.max_length=R,this.has_stree=v&&v.length}var Bt,Ut,Lt;function kt(v,Z){this.dyn_tree=v,this.max_code=0,this.stat_desc=Z}function Xt(v){return v<256?jt[v]:jt[256+(v>>>7)]}function Ht(v,Z){v.pending_buf[v.pending++]=Z&255,v.pending_buf[v.pending++]=Z>>>8&255}function Et(v,Z,J){v.bi_valid>B-J?(v.bi_buf|=Z<<v.bi_valid&65535,Ht(v,v.bi_buf),v.bi_buf=Z>>B-v.bi_valid,v.bi_valid+=J-B):(v.bi_buf|=Z<<v.bi_valid&65535,v.bi_valid+=J)}function Ot(v,Z,J){Et(v,J[Z*2],J[Z*2+1])}function It(v,Z){var J=0;do J|=v&1,v>>>=1,J<<=1;while(--Z>0);return J>>>1}function fe(v){v.bi_valid===16?(Ht(v,v.bi_buf),v.bi_buf=0,v.bi_valid=0):v.bi_valid>=8&&(v.pending_buf[v.pending++]=v.bi_buf&255,v.bi_buf>>=8,v.bi_valid-=8)}function Wt(v,Z){var J=Z.dyn_tree,et=Z.max_code,R=Z.stat_desc.static_tree,H=Z.stat_desc.has_stree,y=Z.stat_desc.extra_bits,Q=Z.stat_desc.extra_base,vt=Z.stat_desc.max_length,c,G,Y,E,L,V,ct=0;for(E=0;E<=T;E++)v.bl_count[E]=0;for(J[v.heap[v.heap_max]*2+1]=0,c=v.heap_max+1;c<A;c++)G=v.heap[c],E=J[J[G*2+1]*2+1]+1,E>vt&&(E=vt,ct++),J[G*2+1]=E,!(G>et)&&(v.bl_count[E]++,L=0,G>=Q&&(L=y[G-Q]),V=J[G*2],v.opt_len+=V*(E+L),H&&(v.static_len+=V*(R[G*2+1]+L)));if(ct!==0){do{for(E=vt-1;v.bl_count[E]===0;)E--;v.bl_count[E]--,v.bl_count[E+1]+=2,v.bl_count[vt]--,ct-=2}while(ct>0);for(E=vt;E!==0;E--)for(G=v.bl_count[E];G!==0;)Y=v.heap[--c],!(Y>et)&&(J[Y*2+1]!==E&&(v.opt_len+=(E-J[Y*2+1])*J[Y*2],J[Y*2+1]=E),G--)}}function $t(v,Z,J){var et=new Array(T+1),R=0,H,y;for(H=1;H<=T;H++)et[H]=R=R+J[H-1]<<1;for(y=0;y<=Z;y++){var Q=v[y*2+1];Q!==0&&(v[y*2]=It(et[Q]++,Q))}}function _t(){var v,Z,J,et,R,H=new Array(T+1);for(J=0,et=0;et<p-1;et++)for(pt[et]=J,v=0;v<1<<dt[et];v++)Rt[J++]=et;for(Rt[J-1]=et,R=0,et=0;et<16;et++)for(Dt[et]=R,v=0;v<1<<lt[et];v++)jt[R++]=et;for(R>>=7;et<k;et++)for(Dt[et]=R<<7,v=0;v<1<<lt[et]-7;v++)jt[256+R++]=et;for(Z=0;Z<=T;Z++)H[Z]=0;for(v=0;v<=143;)yt[v*2+1]=8,v++,H[8]++;for(;v<=255;)yt[v*2+1]=9,v++,H[9]++;for(;v<=279;)yt[v*2+1]=7,v++,H[7]++;for(;v<=287;)yt[v*2+1]=8,v++,H[8]++;for($t(yt,x+1,H),v=0;v<k;v++)Ct[v*2+1]=5,Ct[v*2]=It(v,5);Bt=new mt(yt,dt,_+1,x,T),Ut=new mt(Ct,lt,0,k,T),Lt=new mt(new Array(0),bt,0,F,z)}function Kt(v){var Z;for(Z=0;Z<x;Z++)v.dyn_ltree[Z*2]=0;for(Z=0;Z<k;Z++)v.dyn_dtree[Z*2]=0;for(Z=0;Z<F;Z++)v.bl_tree[Z*2]=0;v.dyn_ltree[M*2]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function we(v){v.bi_valid>8?Ht(v,v.bi_buf):v.bi_valid>0&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function te(v,Z,J,et){we(v),Ht(v,J),Ht(v,~J),s.arraySet(v.pending_buf,v.window,Z,J,v.pending),v.pending+=J}function ne(v,Z,J,et){var R=Z*2,H=J*2;return v[R]<v[H]||v[R]===v[H]&&et[Z]<=et[J]}function Pt(v,Z,J){for(var et=v.heap[J],R=J<<1;R<=v.heap_len&&(R<v.heap_len&&ne(Z,v.heap[R+1],v.heap[R],v.depth)&&R++,!ne(Z,et,v.heap[R],v.depth));)v.heap[J]=v.heap[R],J=R,R<<=1;v.heap[J]=et}function wt(v,Z,J){var et,R,H=0,y,Q;if(v.last_lit!==0)do et=v.pending_buf[v.d_buf+H*2]<<8|v.pending_buf[v.d_buf+H*2+1],R=v.pending_buf[v.l_buf+H],H++,et===0?Ot(v,R,Z):(y=Rt[R],Ot(v,y+_+1,Z),Q=dt[y],Q!==0&&(R-=pt[y],Et(v,R,Q)),et--,y=Xt(et),Ot(v,y,J),Q=lt[y],Q!==0&&(et-=Dt[y],Et(v,et,Q)));while(H<v.last_lit);Ot(v,M,Z)}function ee(v,Z){var J=Z.dyn_tree,et=Z.stat_desc.static_tree,R=Z.stat_desc.has_stree,H=Z.stat_desc.elems,y,Q,vt=-1,c;for(v.heap_len=0,v.heap_max=A,y=0;y<H;y++)J[y*2]!==0?(v.heap[++v.heap_len]=vt=y,v.depth[y]=0):J[y*2+1]=0;for(;v.heap_len<2;)c=v.heap[++v.heap_len]=vt<2?++vt:0,J[c*2]=1,v.depth[c]=0,v.opt_len--,R&&(v.static_len-=et[c*2+1]);for(Z.max_code=vt,y=v.heap_len>>1;y>=1;y--)Pt(v,J,y);c=H;do y=v.heap[1],v.heap[1]=v.heap[v.heap_len--],Pt(v,J,1),Q=v.heap[1],v.heap[--v.heap_max]=y,v.heap[--v.heap_max]=Q,J[c*2]=J[y*2]+J[Q*2],v.depth[c]=(v.depth[y]>=v.depth[Q]?v.depth[y]:v.depth[Q])+1,J[y*2+1]=J[Q*2+1]=c,v.heap[1]=c++,Pt(v,J,1);while(v.heap_len>=2);v.heap[--v.heap_max]=v.heap[1],Wt(v,Z),$t(J,vt,v.bl_count)}function ie(v,Z,J){var et,R=-1,H,y=Z[0*2+1],Q=0,vt=7,c=4;for(y===0&&(vt=138,c=3),Z[(J+1)*2+1]=65535,et=0;et<=J;et++)H=y,y=Z[(et+1)*2+1],!(++Q<vt&&H===y)&&(Q<c?v.bl_tree[H*2]+=Q:H!==0?(H!==R&&v.bl_tree[H*2]++,v.bl_tree[W*2]++):Q<=10?v.bl_tree[X*2]++:v.bl_tree[st*2]++,Q=0,R=H,y===0?(vt=138,c=3):H===y?(vt=6,c=3):(vt=7,c=4))}function pe(v,Z,J){var et,R=-1,H,y=Z[0*2+1],Q=0,vt=7,c=4;for(y===0&&(vt=138,c=3),et=0;et<=J;et++)if(H=y,y=Z[(et+1)*2+1],!(++Q<vt&&H===y)){if(Q<c)do Ot(v,H,v.bl_tree);while(--Q!==0);else H!==0?(H!==R&&(Ot(v,H,v.bl_tree),Q--),Ot(v,W,v.bl_tree),Et(v,Q-3,2)):Q<=10?(Ot(v,X,v.bl_tree),Et(v,Q-3,3)):(Ot(v,st,v.bl_tree),Et(v,Q-11,7));Q=0,R=H,y===0?(vt=138,c=3):H===y?(vt=6,c=3):(vt=7,c=4)}}function he(v){var Z;for(ie(v,v.dyn_ltree,v.l_desc.max_code),ie(v,v.dyn_dtree,v.d_desc.max_code),ee(v,v.bl_desc),Z=F-1;Z>=3&&v.bl_tree[ft[Z]*2+1]===0;Z--);return v.opt_len+=3*(Z+1)+5+5+4,Z}function oe(v,Z,J,et){var R;for(Et(v,Z-257,5),Et(v,J-1,5),Et(v,et-4,4),R=0;R<et;R++)Et(v,v.bl_tree[ft[R]*2+1],3);pe(v,v.dyn_ltree,Z-1),pe(v,v.dyn_dtree,J-1)}function be(v){var Z=4093624447,J;for(J=0;J<=31;J++,Z>>>=1)if(Z&1&&v.dyn_ltree[J*2]!==0)return a;if(v.dyn_ltree[9*2]!==0||v.dyn_ltree[10*2]!==0||v.dyn_ltree[13*2]!==0)return h;for(J=32;J<_;J++)if(v.dyn_ltree[J*2]!==0)return h;return a}var u=!1;function f(v){u||(_t(),u=!0),v.l_desc=new kt(v.dyn_ltree,Bt),v.d_desc=new kt(v.dyn_dtree,Ut),v.bl_desc=new kt(v.bl_tree,Lt),v.bi_buf=0,v.bi_valid=0,Kt(v)}function m(v,Z,J,et){Et(v,(g<<1)+(et?1:0),3),te(v,Z,J)}function I(v){Et(v,w<<1,3),Ot(v,M,yt),fe(v)}function q(v,Z,J,et){var R,H,y=0;v.level>0?(v.strm.data_type===d&&(v.strm.data_type=be(v)),ee(v,v.l_desc),ee(v,v.d_desc),y=he(v),R=v.opt_len+3+7>>>3,H=v.static_len+3+7>>>3,H<=R&&(R=H)):R=H=J+5,J+4<=R&&Z!==-1?m(v,Z,J,et):v.strategy===o||H===R?(Et(v,(w<<1)+(et?1:0),3),wt(v,yt,Ct)):(Et(v,(b<<1)+(et?1:0),3),oe(v,v.l_desc.max_code+1,v.d_desc.max_code+1,y+1),wt(v,v.dyn_ltree,v.dyn_dtree)),Kt(v),et&&we(v)}function $(v,Z,J){return v.pending_buf[v.d_buf+v.last_lit*2]=Z>>>8&255,v.pending_buf[v.d_buf+v.last_lit*2+1]=Z&255,v.pending_buf[v.l_buf+v.last_lit]=J&255,v.last_lit++,Z===0?v.dyn_ltree[J*2]++:(v.matches++,Z--,v.dyn_ltree[(Rt[J]+_+1)*2]++,v.dyn_dtree[Xt(Z)*2]++),v.last_lit===v.lit_bufsize-1}r._tr_init=f,r._tr_stored_block=m,r._tr_flush_block=q,r._tr_tally=$,r._tr_align=I},{"../utils/common":41}],53:[function(e,i,r){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}i.exports=s},{}],54:[function(e,i,r){(function(s){(function(o,a){if(o.setImmediate)return;var h=1,d={},l=!1,g=o.document,w;function b(z){typeof z!="function"&&(z=new Function(""+z));for(var M=new Array(arguments.length-1),W=0;W<M.length;W++)M[W]=arguments[W+1];var X={callback:z,args:M};return d[h]=X,w(h),h++}function D(z){delete d[z]}function O(z){var M=z.callback,W=z.args;switch(W.length){case 0:M();break;case 1:M(W[0]);break;case 2:M(W[0],W[1]);break;case 3:M(W[0],W[1],W[2]);break;default:M.apply(a,W);break}}function p(z){if(l)setTimeout(p,0,z);else{var M=d[z];if(M){l=!0;try{O(M)}finally{D(z),l=!1}}}}function _(){w=function(z){lo.nextTick(function(){p(z)})}}function x(){if(o.postMessage&&!o.importScripts){var z=!0,M=o.onmessage;return o.onmessage=function(){z=!1},o.postMessage("","*"),o.onmessage=M,z}}function k(){var z="setImmediate$"+Math.random()+"$",M=function(W){W.source===o&&typeof W.data=="string"&&W.data.indexOf(z)===0&&p(+W.data.slice(z.length))};o.addEventListener?o.addEventListener("message",M,!1):o.attachEvent("onmessage",M),w=function(W){o.postMessage(z+W,"*")}}function F(){var z=new MessageChannel;z.port1.onmessage=function(M){var W=M.data;p(W)},w=function(M){z.port2.postMessage(M)}}function A(){var z=g.documentElement;w=function(M){var W=g.createElement("script");W.onreadystatechange=function(){p(M),W.onreadystatechange=null,z.removeChild(W),W=null},z.appendChild(W)}}function T(){w=function(z){setTimeout(p,0,z)}}var B=Object.getPrototypeOf&&Object.getPrototypeOf(o);B=B&&B.setTimeout?B:o,{}.toString.call(o.process)==="[object process]"?_():x()?k():o.MessageChannel?F():g&&"onreadystatechange"in g.createElement("script")?A():T(),B.setImmediate=b,B.clearImmediate=D})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof Ce<"u"?Ce:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Qs);var mh=Qs.exports;const vh=mi(mh);class yh{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new vh}catch{throw new Error("JSZip lib not loaded")}}open(t,e){return this.zip.loadAsync(t,{base64:e})}openUrl(t,e){return Bi(t,"binary").then(function(i){return this.zip.loadAsync(i,{base64:e})}.bind(this))}request(t,e){var i=new Nt,r,s=new Ve(t);return e||(e=s.extension),e=="blob"?r=this.getBlob(t):r=this.getText(t),r?r.then(function(o){let a=this.handleResponse(o,e);i.resolve(a)}.bind(this)):i.reject({message:"File not found in the epub: "+t,stack:new Error().stack}),i.promise}handleResponse(t,e){var i;return e=="json"?i=JSON.parse(t):Ri(e)?i=ze(t,"text/xml"):e=="xhtml"?i=ze(t,"application/xhtml+xml"):e=="html"||e=="htm"?i=ze(t,"text/html"):i=t,i}getBlob(t,e){var i=window.decodeURIComponent(t.substr(1)),r=this.zip.file(i);if(r)return e=e||di.lookup(r.name),r.async("uint8array").then(function(s){return new Blob([s],{type:e})})}getText(t,e){var i=window.decodeURIComponent(t.substr(1)),r=this.zip.file(i);if(r)return r.async("string").then(function(s){return s})}getBase64(t,e){var i=window.decodeURIComponent(t.substr(1)),r=this.zip.file(i);if(r)return e=e||di.lookup(r.name),r.async("base64").then(function(s){return"data:"+e+";base64,"+s})}createUrl(t,e){var i=new Nt,r=window.URL||window.webkitURL||window.mozURL,s,o,a=e&&e.base64;return t in this.urlCache?(i.resolve(this.urlCache[t]),i.promise):(a?(o=this.getBase64(t),o&&o.then(function(h){this.urlCache[t]=h,i.resolve(h)}.bind(this))):(o=this.getBlob(t),o&&o.then(function(h){s=r.createObjectURL(h),this.urlCache[t]=s,i.resolve(s)}.bind(this))),o||i.reject({message:"File not found in the epub: "+t,stack:new Error().stack}),i.promise)}revokeUrl(t){var e=window.URL||window.webkitURL||window.mozURL,i=this.urlCache[t];i&&e.revokeObjectURL(i)}destroy(){var t=window.URL||window.webkitURL||window.mozURL;for(let e in this.urlCache)t.revokeObjectURL(e);this.zip=void 0,this.urlCache={}}}var to={exports:{}};(function(n,t){(function(e){n.exports=e()})(function(){return function e(i,r,s){function o(d,l){if(!r[d]){if(!i[d]){var g=typeof Ze=="function"&&Ze;if(!l&&g)return g(d,!0);if(a)return a(d,!0);var w=new Error("Cannot find module '"+d+"'");throw w.code="MODULE_NOT_FOUND",w}var b=r[d]={exports:{}};i[d][0].call(b.exports,function(D){var O=i[d][1][D];return o(O||D)},b,b.exports,e,i,r,s)}return r[d].exports}for(var a=typeof Ze=="function"&&Ze,h=0;h<s.length;h++)o(s[h]);return o}({1:[function(e,i,r){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var h=0,d=new o(D),l=s.document.createTextNode("");d.observe(l,{characterData:!0}),a=function(){l.data=h=++h%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var g=new s.MessageChannel;g.port1.onmessage=D,a=function(){g.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var p=s.document.createElement("script");p.onreadystatechange=function(){D(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:a=function(){setTimeout(D,0)};var w,b=[];function D(){w=!0;for(var p,_,x=b.length;x;){for(_=b,b=[],p=-1;++p<x;)_[p]();x=b.length}w=!1}i.exports=O;function O(p){b.push(p)===1&&!w&&a()}}).call(this,typeof Ce<"u"?Ce:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,i,r){var s=e(1);function o(){}var a={},h=["REJECTED"],d=["FULFILLED"],l=["PENDING"];i.exports=g;function g(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,A!==o&&O(this,A)}g.prototype.catch=function(A){return this.then(null,A)},g.prototype.then=function(A,T){if(typeof A!="function"&&this.state===d||typeof T!="function"&&this.state===h)return this;var B=new this.constructor(o);if(this.state!==l){var z=this.state===d?A:T;b(B,z,this.outcome)}else this.queue.push(new w(B,A,T));return B};function w(A,T,B){this.promise=A,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(A){a.resolve(this.promise,A)},w.prototype.otherCallFulfilled=function(A){b(this.promise,this.onFulfilled,A)},w.prototype.callRejected=function(A){a.reject(this.promise,A)},w.prototype.otherCallRejected=function(A){b(this.promise,this.onRejected,A)};function b(A,T,B){s(function(){var z;try{z=T(B)}catch(M){return a.reject(A,M)}z===A?a.reject(A,new TypeError("Cannot resolve promise with itself")):a.resolve(A,z)})}a.resolve=function(A,T){var B=p(D,T);if(B.status==="error")return a.reject(A,B.value);var z=B.value;if(z)O(A,z);else{A.state=d,A.outcome=T;for(var M=-1,W=A.queue.length;++M<W;)A.queue[M].callFulfilled(T)}return A},a.reject=function(A,T){A.state=h,A.outcome=T;for(var B=-1,z=A.queue.length;++B<z;)A.queue[B].callRejected(T);return A};function D(A){var T=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof T=="function")return function(){T.apply(A,arguments)}}function O(A,T){var B=!1;function z(st){B||(B=!0,a.reject(A,st))}function M(st){B||(B=!0,a.resolve(A,st))}function W(){T(M,z)}var X=p(W);X.status==="error"&&z(X.value)}function p(A,T){var B={};try{B.value=A(T),B.status="success"}catch(z){B.status="error",B.value=z}return B}g.resolve=_;function _(A){return A instanceof this?A:a.resolve(new this(o),A)}g.reject=x;function x(A){var T=new this(o);return a.reject(T,A)}g.all=k;function k(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=A.length,z=!1;if(!B)return this.resolve([]);for(var M=new Array(B),W=0,X=-1,st=new this(o);++X<B;)dt(A[X],X);return st;function dt(lt,bt){T.resolve(lt).then(ft,function(ot){z||(z=!0,a.reject(st,ot))});function ft(ot){M[bt]=ot,++W===B&&!z&&(z=!0,a.resolve(st,M))}}}g.race=F;function F(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=A.length,z=!1;if(!B)return this.resolve([]);for(var M=-1,W=new this(o);++M<B;)X(A[M]);return W;function X(st){T.resolve(st).then(function(dt){z||(z=!0,a.resolve(W,dt))},function(dt){z||(z=!0,a.reject(W,dt))})}}},{1:1}],3:[function(e,i,r){(function(s){typeof s.Promise!="function"&&(s.Promise=e(2))}).call(this,typeof Ce<"u"?Ce:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,i,r){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C};function o(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var h=a();function d(){try{if(!h||!h.open)return!1;var C=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),S=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!C||S)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function l(C,S){C=C||[],S=S||{};try{return new Blob(C,S)}catch(j){if(j.name!=="TypeError")throw j;for(var N=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,U=new N,P=0;P<C.length;P+=1)U.append(C[P]);return U.getBlob(S.type)}}typeof Promise>"u"&&e(3);var g=Promise;function w(C,S){S&&C.then(function(N){S(null,N)},function(N){S(N)})}function b(C,S,N){typeof S=="function"&&C.then(S),typeof N=="function"&&C.catch(N)}function D(C){return typeof C!="string"&&(console.warn(C+" used as a key, but it is not a string."),C=String(C)),C}function O(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",_=void 0,x={},k=Object.prototype.toString,F="readonly",A="readwrite";function T(C){for(var S=C.length,N=new ArrayBuffer(S),U=new Uint8Array(N),P=0;P<S;P++)U[P]=C.charCodeAt(P);return N}function B(C){return new g(function(S){var N=C.transaction(p,A),U=l([""]);N.objectStore(p).put(U,"key"),N.onabort=function(P){P.preventDefault(),P.stopPropagation(),S(!1)},N.oncomplete=function(){var P=navigator.userAgent.match(/Chrome\/(\d+)/),j=navigator.userAgent.match(/Edge\//);S(j||!P||parseInt(P[1],10)>=43)}}).catch(function(){return!1})}function z(C){return typeof _=="boolean"?g.resolve(_):B(C).then(function(S){return _=S,_})}function M(C){var S=x[C.name],N={};N.promise=new g(function(U,P){N.resolve=U,N.reject=P}),S.deferredOperations.push(N),S.dbReady?S.dbReady=S.dbReady.then(function(){return N.promise}):S.dbReady=N.promise}function W(C){var S=x[C.name],N=S.deferredOperations.pop();if(N)return N.resolve(),N.promise}function X(C,S){var N=x[C.name],U=N.deferredOperations.pop();if(U)return U.reject(S),U.promise}function st(C,S){return new g(function(N,U){if(x[C.name]=x[C.name]||pt(),C.db)if(S)M(C),C.db.close();else return N(C.db);var P=[C.name];S&&P.push(C.version);var j=h.open.apply(h,P);S&&(j.onupgradeneeded=function(K){var tt=j.result;try{tt.createObjectStore(C.storeName),K.oldVersion<=1&&tt.createObjectStore(p)}catch(nt){if(nt.name==="ConstraintError")console.warn('The database "'+C.name+'" has been upgraded from version '+K.oldVersion+" to version "+K.newVersion+', but the storage "'+C.storeName+'" already exists.');else throw nt}}),j.onerror=function(K){K.preventDefault(),U(j.error)},j.onsuccess=function(){var K=j.result;K.onversionchange=function(tt){tt.target.close()},N(K),W(C)}})}function dt(C){return st(C,!1)}function lt(C){return st(C,!0)}function bt(C,S){if(!C.db)return!0;var N=!C.db.objectStoreNames.contains(C.storeName),U=C.version<C.db.version,P=C.version>C.db.version;if(U&&(C.version!==S&&console.warn('The database "'+C.name+`" can't be downgraded from version `+C.db.version+" to version "+C.version+"."),C.version=C.db.version),P||N){if(N){var j=C.db.version+1;j>C.version&&(C.version=j)}return!0}return!1}function ft(C){return new g(function(S,N){var U=new FileReader;U.onerror=N,U.onloadend=function(P){var j=btoa(P.target.result||"");S({__local_forage_encoded_blob:!0,data:j,type:C.type})},U.readAsBinaryString(C)})}function ot(C){var S=T(atob(C.data));return l([S],{type:C.type})}function yt(C){return C&&C.__local_forage_encoded_blob}function Ct(C){var S=this,N=S._initReady().then(function(){var U=x[S._dbInfo.name];if(U&&U.dbReady)return U.dbReady});return b(N,C,C),N}function jt(C){M(C);for(var S=x[C.name],N=S.forages,U=0;U<N.length;U++){var P=N[U];P._dbInfo.db&&(P._dbInfo.db.close(),P._dbInfo.db=null)}return C.db=null,dt(C).then(function(j){return C.db=j,bt(C)?lt(C):j}).then(function(j){C.db=S.db=j;for(var K=0;K<N.length;K++)N[K]._dbInfo.db=j}).catch(function(j){throw X(C,j),j})}function Rt(C,S,N,U){U===void 0&&(U=1);try{var P=C.db.transaction(C.storeName,S);N(null,P)}catch(j){if(U>0&&(!C.db||j.name==="InvalidStateError"||j.name==="NotFoundError"))return g.resolve().then(function(){if(!C.db||j.name==="NotFoundError"&&!C.db.objectStoreNames.contains(C.storeName)&&C.version<=C.db.version)return C.db&&(C.version=C.db.version+1),lt(C)}).then(function(){return jt(C).then(function(){Rt(C,S,N,U-1)})}).catch(N);N(j)}}function pt(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Dt(C){var S=this,N={db:null};if(C)for(var U in C)N[U]=C[U];var P=x[N.name];P||(P=pt(),x[N.name]=P),P.forages.push(S),S._initReady||(S._initReady=S.ready,S.ready=Ct);var j=[];function K(){return g.resolve()}for(var tt=0;tt<P.forages.length;tt++){var nt=P.forages[tt];nt!==S&&j.push(nt._initReady().catch(K))}var rt=P.forages.slice(0);return g.all(j).then(function(){return N.db=P.db,dt(N)}).then(function(it){return N.db=it,bt(N,S._defaultConfig.version)?lt(N):it}).then(function(it){N.db=P.db=it,S._dbInfo=N;for(var gt=0;gt<rt.length;gt++){var At=rt[gt];At!==S&&(At._dbInfo.db=N.db,At._dbInfo.version=N.version)}})}function mt(C,S){var N=this;C=D(C);var U=new g(function(P,j){N.ready().then(function(){Rt(N._dbInfo,F,function(K,tt){if(K)return j(K);try{var nt=tt.objectStore(N._dbInfo.storeName),rt=nt.get(C);rt.onsuccess=function(){var it=rt.result;it===void 0&&(it=null),yt(it)&&(it=ot(it)),P(it)},rt.onerror=function(){j(rt.error)}}catch(it){j(it)}})}).catch(j)});return w(U,S),U}function Bt(C,S){var N=this,U=new g(function(P,j){N.ready().then(function(){Rt(N._dbInfo,F,function(K,tt){if(K)return j(K);try{var nt=tt.objectStore(N._dbInfo.storeName),rt=nt.openCursor(),it=1;rt.onsuccess=function(){var gt=rt.result;if(gt){var At=gt.value;yt(At)&&(At=ot(At));var qt=C(At,gt.key,it++);qt!==void 0?P(qt):gt.continue()}else P()},rt.onerror=function(){j(rt.error)}}catch(gt){j(gt)}})}).catch(j)});return w(U,S),U}function Ut(C,S,N){var U=this;C=D(C);var P=new g(function(j,K){var tt;U.ready().then(function(){return tt=U._dbInfo,k.call(S)==="[object Blob]"?z(tt.db).then(function(nt){return nt?S:ft(S)}):S}).then(function(nt){Rt(U._dbInfo,A,function(rt,it){if(rt)return K(rt);try{var gt=it.objectStore(U._dbInfo.storeName);nt===null&&(nt=void 0);var At=gt.put(nt,C);it.oncomplete=function(){nt===void 0&&(nt=null),j(nt)},it.onabort=it.onerror=function(){var qt=At.error?At.error:At.transaction.error;K(qt)}}catch(qt){K(qt)}})}).catch(K)});return w(P,N),P}function Lt(C,S){var N=this;C=D(C);var U=new g(function(P,j){N.ready().then(function(){Rt(N._dbInfo,A,function(K,tt){if(K)return j(K);try{var nt=tt.objectStore(N._dbInfo.storeName),rt=nt.delete(C);tt.oncomplete=function(){P()},tt.onerror=function(){j(rt.error)},tt.onabort=function(){var it=rt.error?rt.error:rt.transaction.error;j(it)}}catch(it){j(it)}})}).catch(j)});return w(U,S),U}function kt(C){var S=this,N=new g(function(U,P){S.ready().then(function(){Rt(S._dbInfo,A,function(j,K){if(j)return P(j);try{var tt=K.objectStore(S._dbInfo.storeName),nt=tt.clear();K.oncomplete=function(){U()},K.onabort=K.onerror=function(){var rt=nt.error?nt.error:nt.transaction.error;P(rt)}}catch(rt){P(rt)}})}).catch(P)});return w(N,C),N}function Xt(C){var S=this,N=new g(function(U,P){S.ready().then(function(){Rt(S._dbInfo,F,function(j,K){if(j)return P(j);try{var tt=K.objectStore(S._dbInfo.storeName),nt=tt.count();nt.onsuccess=function(){U(nt.result)},nt.onerror=function(){P(nt.error)}}catch(rt){P(rt)}})}).catch(P)});return w(N,C),N}function Ht(C,S){var N=this,U=new g(function(P,j){if(C<0){P(null);return}N.ready().then(function(){Rt(N._dbInfo,F,function(K,tt){if(K)return j(K);try{var nt=tt.objectStore(N._dbInfo.storeName),rt=!1,it=nt.openKeyCursor();it.onsuccess=function(){var gt=it.result;if(!gt){P(null);return}C===0||rt?P(gt.key):(rt=!0,gt.advance(C))},it.onerror=function(){j(it.error)}}catch(gt){j(gt)}})}).catch(j)});return w(U,S),U}function Et(C){var S=this,N=new g(function(U,P){S.ready().then(function(){Rt(S._dbInfo,F,function(j,K){if(j)return P(j);try{var tt=K.objectStore(S._dbInfo.storeName),nt=tt.openKeyCursor(),rt=[];nt.onsuccess=function(){var it=nt.result;if(!it){U(rt);return}rt.push(it.key),it.continue()},nt.onerror=function(){P(nt.error)}}catch(it){P(it)}})}).catch(P)});return w(N,C),N}function Ot(C,S){S=O.apply(this,arguments);var N=this.config();C=typeof C!="function"&&C||{},C.name||(C.name=C.name||N.name,C.storeName=C.storeName||N.storeName);var U=this,P;if(!C.name)P=g.reject("Invalid arguments");else{var j=C.name===N.name&&U._dbInfo.db,K=j?g.resolve(U._dbInfo.db):dt(C).then(function(tt){var nt=x[C.name],rt=nt.forages;nt.db=tt;for(var it=0;it<rt.length;it++)rt[it]._dbInfo.db=tt;return tt});C.storeName?P=K.then(function(tt){if(tt.objectStoreNames.contains(C.storeName)){var nt=tt.version+1;M(C);var rt=x[C.name],it=rt.forages;tt.close();for(var gt=0;gt<it.length;gt++){var At=it[gt];At._dbInfo.db=null,At._dbInfo.version=nt}var qt=new g(function(Ft,re){var Gt=h.open(C.name,nt);Gt.onerror=function(_e){var fr=Gt.result;fr.close(),re(_e)},Gt.onupgradeneeded=function(){var _e=Gt.result;_e.deleteObjectStore(C.storeName)},Gt.onsuccess=function(){var _e=Gt.result;_e.close(),Ft(_e)}});return qt.then(function(Ft){rt.db=Ft;for(var re=0;re<it.length;re++){var Gt=it[re];Gt._dbInfo.db=Ft,W(Gt._dbInfo)}}).catch(function(Ft){throw(X(C,Ft)||g.resolve()).catch(function(){}),Ft})}}):P=K.then(function(tt){M(C);var nt=x[C.name],rt=nt.forages;tt.close();for(var it=0;it<rt.length;it++){var gt=rt[it];gt._dbInfo.db=null}var At=new g(function(qt,Ft){var re=h.deleteDatabase(C.name);re.onerror=function(){var Gt=re.result;Gt&&Gt.close(),Ft(re.error)},re.onblocked=function(){console.warn('dropInstance blocked for database "'+C.name+'" until all open connections are closed')},re.onsuccess=function(){var Gt=re.result;Gt&&Gt.close(),qt(Gt)}});return At.then(function(qt){nt.db=qt;for(var Ft=0;Ft<rt.length;Ft++){var re=rt[Ft];W(re._dbInfo)}}).catch(function(qt){throw(X(C,qt)||g.resolve()).catch(function(){}),qt})})}return w(P,S),P}var It={_driver:"asyncStorage",_initStorage:Dt,_support:d(),iterate:Bt,getItem:mt,setItem:Ut,removeItem:Lt,clear:kt,length:Xt,key:Ht,keys:Et,dropInstance:Ot};function fe(){return typeof openDatabase=="function"}var Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$t="~~local_forage_type~",_t=/^~~local_forage_type~([^~]+)~/,Kt="__lfsc__:",we=Kt.length,te="arbf",ne="blob",Pt="si08",wt="ui08",ee="uic8",ie="si16",pe="si32",he="ur16",oe="ui32",be="fl32",u="fl64",f=we+te.length,m=Object.prototype.toString;function I(C){var S=C.length*.75,N=C.length,U,P=0,j,K,tt,nt;C[C.length-1]==="="&&(S--,C[C.length-2]==="="&&S--);var rt=new ArrayBuffer(S),it=new Uint8Array(rt);for(U=0;U<N;U+=4)j=Wt.indexOf(C[U]),K=Wt.indexOf(C[U+1]),tt=Wt.indexOf(C[U+2]),nt=Wt.indexOf(C[U+3]),it[P++]=j<<2|K>>4,it[P++]=(K&15)<<4|tt>>2,it[P++]=(tt&3)<<6|nt&63;return rt}function q(C){var S=new Uint8Array(C),N="",U;for(U=0;U<S.length;U+=3)N+=Wt[S[U]>>2],N+=Wt[(S[U]&3)<<4|S[U+1]>>4],N+=Wt[(S[U+1]&15)<<2|S[U+2]>>6],N+=Wt[S[U+2]&63];return S.length%3===2?N=N.substring(0,N.length-1)+"=":S.length%3===1&&(N=N.substring(0,N.length-2)+"=="),N}function $(C,S){var N="";if(C&&(N=m.call(C)),C&&(N==="[object ArrayBuffer]"||C.buffer&&m.call(C.buffer)==="[object ArrayBuffer]")){var U,P=Kt;C instanceof ArrayBuffer?(U=C,P+=te):(U=C.buffer,N==="[object Int8Array]"?P+=Pt:N==="[object Uint8Array]"?P+=wt:N==="[object Uint8ClampedArray]"?P+=ee:N==="[object Int16Array]"?P+=ie:N==="[object Uint16Array]"?P+=he:N==="[object Int32Array]"?P+=pe:N==="[object Uint32Array]"?P+=oe:N==="[object Float32Array]"?P+=be:N==="[object Float64Array]"?P+=u:S(new Error("Failed to get type for BinaryArray"))),S(P+q(U))}else if(N==="[object Blob]"){var j=new FileReader;j.onload=function(){var K=$t+C.type+"~"+q(this.result);S(Kt+ne+K)},j.readAsArrayBuffer(C)}else try{S(JSON.stringify(C))}catch(K){console.error("Couldn't convert value into a JSON string: ",C),S(null,K)}}function v(C){if(C.substring(0,we)!==Kt)return JSON.parse(C);var S=C.substring(f),N=C.substring(we,f),U;if(N===ne&&_t.test(S)){var P=S.match(_t);U=P[1],S=S.substring(P[0].length)}var j=I(S);switch(N){case te:return j;case ne:return l([j],{type:U});case Pt:return new Int8Array(j);case wt:return new Uint8Array(j);case ee:return new Uint8ClampedArray(j);case ie:return new Int16Array(j);case he:return new Uint16Array(j);case pe:return new Int32Array(j);case oe:return new Uint32Array(j);case be:return new Float32Array(j);case u:return new Float64Array(j);default:throw new Error("Unkown type: "+N)}}var Z={serialize:$,deserialize:v,stringToBuffer:I,bufferToString:q};function J(C,S,N,U){C.executeSql("CREATE TABLE IF NOT EXISTS "+S.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],N,U)}function et(C){var S=this,N={db:null};if(C)for(var U in C)N[U]=typeof C[U]!="string"?C[U].toString():C[U];var P=new g(function(j,K){try{N.db=openDatabase(N.name,String(N.version),N.description,N.size)}catch(tt){return K(tt)}N.db.transaction(function(tt){J(tt,N,function(){S._dbInfo=N,j()},function(nt,rt){K(rt)})},K)});return N.serializer=Z,P}function R(C,S,N,U,P,j){C.executeSql(N,U,P,function(K,tt){tt.code===tt.SYNTAX_ERR?K.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[S.storeName],function(nt,rt){rt.rows.length?j(nt,tt):J(nt,S,function(){nt.executeSql(N,U,P,j)},j)},j):j(K,tt)},j)}function H(C,S){var N=this;C=D(C);var U=new g(function(P,j){N.ready().then(function(){var K=N._dbInfo;K.db.transaction(function(tt){R(tt,K,"SELECT * FROM "+K.storeName+" WHERE key = ? LIMIT 1",[C],function(nt,rt){var it=rt.rows.length?rt.rows.item(0).value:null;it&&(it=K.serializer.deserialize(it)),P(it)},function(nt,rt){j(rt)})})}).catch(j)});return w(U,S),U}function y(C,S){var N=this,U=new g(function(P,j){N.ready().then(function(){var K=N._dbInfo;K.db.transaction(function(tt){R(tt,K,"SELECT * FROM "+K.storeName,[],function(nt,rt){for(var it=rt.rows,gt=it.length,At=0;At<gt;At++){var qt=it.item(At),Ft=qt.value;if(Ft&&(Ft=K.serializer.deserialize(Ft)),Ft=C(Ft,qt.key,At+1),Ft!==void 0){P(Ft);return}}P()},function(nt,rt){j(rt)})})}).catch(j)});return w(U,S),U}function Q(C,S,N,U){var P=this;C=D(C);var j=new g(function(K,tt){P.ready().then(function(){S===void 0&&(S=null);var nt=S,rt=P._dbInfo;rt.serializer.serialize(S,function(it,gt){gt?tt(gt):rt.db.transaction(function(At){R(At,rt,"INSERT OR REPLACE INTO "+rt.storeName+" (key, value) VALUES (?, ?)",[C,it],function(){K(nt)},function(qt,Ft){tt(Ft)})},function(At){if(At.code===At.QUOTA_ERR){if(U>0){K(Q.apply(P,[C,nt,N,U-1]));return}tt(At)}})})}).catch(tt)});return w(j,N),j}function vt(C,S,N){return Q.apply(this,[C,S,N,1])}function c(C,S){var N=this;C=D(C);var U=new g(function(P,j){N.ready().then(function(){var K=N._dbInfo;K.db.transaction(function(tt){R(tt,K,"DELETE FROM "+K.storeName+" WHERE key = ?",[C],function(){P()},function(nt,rt){j(rt)})})}).catch(j)});return w(U,S),U}function G(C){var S=this,N=new g(function(U,P){S.ready().then(function(){var j=S._dbInfo;j.db.transaction(function(K){R(K,j,"DELETE FROM "+j.storeName,[],function(){U()},function(tt,nt){P(nt)})})}).catch(P)});return w(N,C),N}function Y(C){var S=this,N=new g(function(U,P){S.ready().then(function(){var j=S._dbInfo;j.db.transaction(function(K){R(K,j,"SELECT COUNT(key) as c FROM "+j.storeName,[],function(tt,nt){var rt=nt.rows.item(0).c;U(rt)},function(tt,nt){P(nt)})})}).catch(P)});return w(N,C),N}function E(C,S){var N=this,U=new g(function(P,j){N.ready().then(function(){var K=N._dbInfo;K.db.transaction(function(tt){R(tt,K,"SELECT key FROM "+K.storeName+" WHERE id = ? LIMIT 1",[C+1],function(nt,rt){var it=rt.rows.length?rt.rows.item(0).key:null;P(it)},function(nt,rt){j(rt)})})}).catch(j)});return w(U,S),U}function L(C){var S=this,N=new g(function(U,P){S.ready().then(function(){var j=S._dbInfo;j.db.transaction(function(K){R(K,j,"SELECT key FROM "+j.storeName,[],function(tt,nt){for(var rt=[],it=0;it<nt.rows.length;it++)rt.push(nt.rows.item(it).key);U(rt)},function(tt,nt){P(nt)})})}).catch(P)});return w(N,C),N}function V(C){return new g(function(S,N){C.transaction(function(U){U.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(P,j){for(var K=[],tt=0;tt<j.rows.length;tt++)K.push(j.rows.item(tt).name);S({db:C,storeNames:K})},function(P,j){N(j)})},function(U){N(U)})})}function ct(C,S){S=O.apply(this,arguments);var N=this.config();C=typeof C!="function"&&C||{},C.name||(C.name=C.name||N.name,C.storeName=C.storeName||N.storeName);var U=this,P;return C.name?P=new g(function(j){var K;C.name===N.name?K=U._dbInfo.db:K=openDatabase(C.name,"","",0),C.storeName?j({db:K,storeNames:[C.storeName]}):j(V(K))}).then(function(j){return new g(function(K,tt){j.db.transaction(function(nt){function rt(qt){return new g(function(Ft,re){nt.executeSql("DROP TABLE IF EXISTS "+qt,[],function(){Ft()},function(Gt,_e){re(_e)})})}for(var it=[],gt=0,At=j.storeNames.length;gt<At;gt++)it.push(rt(j.storeNames[gt]));g.all(it).then(function(){K()}).catch(function(qt){tt(qt)})},function(nt){tt(nt)})})}):P=g.reject("Invalid arguments"),w(P,S),P}var ut={_driver:"webSQLStorage",_initStorage:et,_support:fe(),iterate:y,getItem:H,setItem:vt,removeItem:c,clear:G,length:Y,key:E,keys:L,dropInstance:ct};function ht(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function xt(C,S){var N=C.name+"/";return C.storeName!==S.storeName&&(N+=C.storeName+"/"),N}function ke(){var C="_localforage_support_test";try{return localStorage.setItem(C,!0),localStorage.removeItem(C),!1}catch{return!0}}function Vt(){return!ke()||localStorage.length>0}function St(C){var S=this,N={};if(C)for(var U in C)N[U]=C[U];return N.keyPrefix=xt(C,S._defaultConfig),Vt()?(S._dbInfo=N,N.serializer=Z,g.resolve()):g.reject()}function Jt(C){var S=this,N=S.ready().then(function(){for(var U=S._dbInfo.keyPrefix,P=localStorage.length-1;P>=0;P--){var j=localStorage.key(P);j.indexOf(U)===0&&localStorage.removeItem(j)}});return w(N,C),N}function ae(C,S){var N=this;C=D(C);var U=N.ready().then(function(){var P=N._dbInfo,j=localStorage.getItem(P.keyPrefix+C);return j&&(j=P.serializer.deserialize(j)),j});return w(U,S),U}function ce(C,S){var N=this,U=N.ready().then(function(){for(var P=N._dbInfo,j=P.keyPrefix,K=j.length,tt=localStorage.length,nt=1,rt=0;rt<tt;rt++){var it=localStorage.key(rt);if(it.indexOf(j)===0){var gt=localStorage.getItem(it);if(gt&&(gt=P.serializer.deserialize(gt)),gt=C(gt,it.substring(K),nt++),gt!==void 0)return gt}}});return w(U,S),U}function Ke(C,S){var N=this,U=N.ready().then(function(){var P=N._dbInfo,j;try{j=localStorage.key(C)}catch{j=null}return j&&(j=j.substring(P.keyPrefix.length)),j});return w(U,S),U}function Je(C){var S=this,N=S.ready().then(function(){for(var U=S._dbInfo,P=localStorage.length,j=[],K=0;K<P;K++){var tt=localStorage.key(K);tt.indexOf(U.keyPrefix)===0&&j.push(tt.substring(U.keyPrefix.length))}return j});return w(N,C),N}function Yt(C){var S=this,N=S.keys().then(function(U){return U.length});return w(N,C),N}function ge(C,S){var N=this;C=D(C);var U=N.ready().then(function(){var P=N._dbInfo;localStorage.removeItem(P.keyPrefix+C)});return w(U,S),U}function se(C,S,N){var U=this;C=D(C);var P=U.ready().then(function(){S===void 0&&(S=null);var j=S;return new g(function(K,tt){var nt=U._dbInfo;nt.serializer.serialize(S,function(rt,it){if(it)tt(it);else try{localStorage.setItem(nt.keyPrefix+C,rt),K(j)}catch(gt){(gt.name==="QuotaExceededError"||gt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&tt(gt),tt(gt)}})})});return w(P,N),P}function Se(C,S){if(S=O.apply(this,arguments),C=typeof C!="function"&&C||{},!C.name){var N=this.config();C.name=C.name||N.name,C.storeName=C.storeName||N.storeName}var U=this,P;return C.name?P=new g(function(j){C.storeName?j(xt(C,U._defaultConfig)):j(C.name+"/")}).then(function(j){for(var K=localStorage.length-1;K>=0;K--){var tt=localStorage.key(K);tt.indexOf(j)===0&&localStorage.removeItem(tt)}}):P=g.reject("Invalid arguments"),w(P,S),P}var Ee={_driver:"localStorageWrapper",_initStorage:St,_support:ht(),iterate:ce,getItem:ae,setItem:se,removeItem:ge,clear:Jt,length:Yt,key:Ke,keys:Je,dropInstance:Se},Fi=function(C,S){return C===S||typeof C=="number"&&typeof S=="number"&&isNaN(C)&&isNaN(S)},io=function(C,S){for(var N=C.length,U=0;U<N;){if(Fi(C[U],S))return!0;U++}return!1},nn=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"},vi={},sn={},Qe={INDEXEDDB:It,WEBSQL:ut,LOCALSTORAGE:Ee},ro=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],zi=["dropInstance"],cr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(zi),no={description:"",driver:ro.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function so(C,S){C[S]=function(){var N=arguments;return C.ready().then(function(){return C[S].apply(C,N)})}}function dr(){for(var C=1;C<arguments.length;C++){var S=arguments[C];if(S)for(var N in S)S.hasOwnProperty(N)&&(nn(S[N])?arguments[0][N]=S[N].slice():arguments[0][N]=S[N])}return arguments[0]}var oo=function(){function C(S){o(this,C);for(var N in Qe)if(Qe.hasOwnProperty(N)){var U=Qe[N],P=U._driver;this[N]=P,vi[P]||this.defineDriver(U)}this._defaultConfig=dr({},no),this._config=dr({},this._defaultConfig,S),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return C.prototype.config=function(S){if((typeof S>"u"?"undefined":s(S))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var N in S){if(N==="storeName"&&(S[N]=S[N].replace(/\W/g,"_")),N==="version"&&typeof S[N]!="number")return new Error("Database version must be a number.");this._config[N]=S[N]}return"driver"in S&&S.driver?this.setDriver(this._config.driver):!0}else return typeof S=="string"?this._config[S]:this._config},C.prototype.defineDriver=function(S,N,U){var P=new g(function(j,K){try{var tt=S._driver,nt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!S._driver){K(nt);return}for(var rt=cr.concat("_initStorage"),it=0,gt=rt.length;it<gt;it++){var At=rt[it],qt=!io(zi,At);if((qt||S[At])&&typeof S[At]!="function"){K(nt);return}}var Ft=function(){for(var Gt=function(uo){return function(){var ho=new Error("Method "+uo+" is not implemented by the current driver"),on=g.reject(ho);return w(on,arguments[arguments.length-1]),on}},_e=0,fr=zi.length;_e<fr;_e++){var pr=zi[_e];S[pr]||(S[pr]=Gt(pr))}};Ft();var re=function(Gt){vi[tt]&&console.info("Redefining LocalForage driver: "+tt),vi[tt]=S,sn[tt]=Gt,j()};"_support"in S?S._support&&typeof S._support=="function"?S._support().then(re,K):re(!!S._support):re(!0)}catch(Gt){K(Gt)}});return b(P,N,U),P},C.prototype.driver=function(){return this._driver||null},C.prototype.getDriver=function(S,N,U){var P=vi[S]?g.resolve(vi[S]):g.reject(new Error("Driver not found."));return b(P,N,U),P},C.prototype.getSerializer=function(S){var N=g.resolve(Z);return b(N,S),N},C.prototype.ready=function(S){var N=this,U=N._driverSet.then(function(){return N._ready===null&&(N._ready=N._initDriver()),N._ready});return b(U,S,S),U},C.prototype.setDriver=function(S,N,U){var P=this;nn(S)||(S=[S]);var j=this._getSupportedDrivers(S);function K(){P._config.driver=P.driver()}function tt(it){return P._extend(it),K(),P._ready=P._initStorage(P._config),P._ready}function nt(it){return function(){var gt=0;function At(){for(;gt<it.length;){var qt=it[gt];return gt++,P._dbInfo=null,P._ready=null,P.getDriver(qt).then(tt).catch(At)}K();var Ft=new Error("No available storage method found.");return P._driverSet=g.reject(Ft),P._driverSet}return At()}}var rt=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=rt.then(function(){var it=j[0];return P._dbInfo=null,P._ready=null,P.getDriver(it).then(function(gt){P._driver=gt._driver,K(),P._wrapLibraryMethodsWithReady(),P._initDriver=nt(j)})}).catch(function(){K();var it=new Error("No available storage method found.");return P._driverSet=g.reject(it),P._driverSet}),b(this._driverSet,N,U),this._driverSet},C.prototype.supports=function(S){return!!sn[S]},C.prototype._extend=function(S){dr(this,S)},C.prototype._getSupportedDrivers=function(S){for(var N=[],U=0,P=S.length;U<P;U++){var j=S[U];this.supports(j)&&N.push(j)}return N},C.prototype._wrapLibraryMethodsWithReady=function(){for(var S=0,N=cr.length;S<N;S++)so(this,cr[S])},C.prototype.createInstance=function(S){return new C(S)},C}(),ao=new oo;i.exports=ao},{3:3}]},{},[4])(4)})})(to);var wh=to.exports;const Hn=mi(wh);class eo{constructor(t,e,i){this.urlCache={},this.storage=void 0,this.name=t,this.requester=e||Bi,this.resolver=i,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let t;typeof Hn>"u"&&(t=Hn),this.storage=t.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(t){let e=navigator.onLine;this.online=e,e?this.emit("online",this):this.emit("offline",this)}add(t,e){let i=t.resources.map(r=>{let{href:s}=r,o=this.resolver(s),a=window.encodeURIComponent(o);return this.storage.getItem(a).then(h=>!h||e?this.requester(o,"binary").then(d=>this.storage.setItem(a,d)):h)});return Promise.all(i)}put(t,e,i){let r=window.encodeURIComponent(t);return this.storage.getItem(r).then(s=>s||this.requester(t,"binary",e,i).then(o=>this.storage.setItem(r,o)))}request(t,e,i,r){return this.online?this.requester(t,e,i,r).then(s=>(this.put(t),s)):this.retrieve(t,e)}retrieve(t,e){new Nt;var i,r=new Ve(t);return e||(e=r.extension),e=="blob"?i=this.getBlob(t):i=this.getText(t),i.then(s=>{var o=new Nt,a;return s?(a=this.handleResponse(s,e),o.resolve(a)):o.reject({message:"File not found in storage: "+t,stack:new Error().stack}),o.promise})}handleResponse(t,e){var i;return e=="json"?i=JSON.parse(t):Ri(e)?i=ze(t,"text/xml"):e=="xhtml"?i=ze(t,"application/xhtml+xml"):e=="html"||e=="htm"?i=ze(t,"text/html"):i=t,i}getBlob(t,e){let i=window.encodeURIComponent(t);return this.storage.getItem(i).then(function(r){if(r)return e=e||di.lookup(t),new Blob([r],{type:e})})}getText(t,e){let i=window.encodeURIComponent(t);return e=e||di.lookup(t),this.storage.getItem(i).then(function(r){var s=new Nt,o=new FileReader,a;if(r)return a=new Blob([r],{type:e}),o.addEventListener("loadend",()=>{s.resolve(o.result)}),o.readAsText(a,e),s.promise})}getBase64(t,e){let i=window.encodeURIComponent(t);return e=e||di.lookup(t),this.storage.getItem(i).then(r=>{var s=new Nt,o=new FileReader,a;if(r)return a=new Blob([r],{type:e}),o.addEventListener("loadend",()=>{s.resolve(o.result)}),o.readAsDataURL(a,e),s.promise})}createUrl(t,e){var i=new Nt,r=window.URL||window.webkitURL||window.mozURL,s,o,a=e&&e.base64;return t in this.urlCache?(i.resolve(this.urlCache[t]),i.promise):(a?(o=this.getBase64(t),o&&o.then(function(h){this.urlCache[t]=h,i.resolve(h)}.bind(this))):(o=this.getBlob(t),o&&o.then(function(h){s=r.createObjectURL(h),this.urlCache[t]=s,i.resolve(s)}.bind(this))),o||i.reject({message:"File not found in storage: "+t,stack:new Error().stack}),i.promise)}revokeUrl(t){var e=window.URL||window.webkitURL||window.mozURL,i=this.urlCache[t];i&&e.revokeObjectURL(i)}destroy(){var t=window.URL||window.webkitURL||window.mozURL;for(let e in this.urlCache)t.revokeObjectURL(e);this.urlCache={},this.removeListeners()}}Pe(eo.prototype);class Cr{constructor(t){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",t&&this.parse(t)}parse(t){if(!t)return this;const e=Mt(t,"display_options");return e?(We(e,"option").forEach(i=>{let r="";switch(i.childNodes.length&&(r=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=r;break;case"fixed-layout":this.fixedLayout=r;break;case"open-to-spread":this.openToSpread=r;break;case"orientation-lock":this.orientationLock=r;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const Gn="META-INF/container.xml",bh="META-INF/com.apple.ibooks.display-options.xml",Te={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class rn{constructor(t,e){typeof e>"u"&&typeof t!="string"&&!(t instanceof Blob)&&!(t instanceof ArrayBuffer)&&(e=t,t=void 0),this.settings=le(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),le(this.settings,e),this.opening=new Nt,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new Nt,spine:new Nt,metadata:new Nt,cover:new Nt,navigation:new Nt,pageList:new Nt,resources:new Nt,displayOptions:new Nt},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||Bi,this.spine=new Da,this.locations=new Fs(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),t&&this.open(t,this.settings.openAs).catch(i=>{var r=new Error("Cannot load book at "+t);this.emit(at.BOOK.OPEN_FAILED,r)})}open(t,e){var i,r=e||this.determineType(t);return r===Te.BINARY?(this.archived=!0,this.url=new De("/",""),i=this.openEpub(t)):r===Te.BASE64?(this.archived=!0,this.url=new De("/",""),i=this.openEpub(t,r)):r===Te.EPUB?(this.archived=!0,this.url=new De("/",""),i=this.request(t,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):r==Te.OPF?(this.url=new De(t),i=this.openPackaging(this.url.Path.toString())):r==Te.MANIFEST?(this.url=new De(t),i=this.openManifest(this.url.Path.toString())):(this.url=new De(t),i=this.openContainer(Gn).then(this.openPackaging.bind(this))),i}openEpub(t,e){return this.unarchive(t,e||this.settings.encoding).then(()=>this.openContainer(Gn)).then(i=>this.openPackaging(i))}openContainer(t){return this.load(t).then(e=>(this.container=new Ia(e),this.resolve(this.container.packagePath)))}openPackaging(t){return this.path=new Ve(t),this.load(t).then(e=>(this.packaging=new Fn(e),this.unpack(this.packaging)))}openManifest(t){return this.path=new Ve(t),this.load(t).then(e=>(this.packaging=new Fn,this.packaging.load(e),this.unpack(this.packaging)))}load(t){var e=this.resolve(t);return this.archived?this.archive.request(e):this.request(e,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(t,e){if(t){var i=t,r=t.indexOf("://")>-1;return r?t:(this.path&&(i=this.path.resolve(t)),e!=!1&&this.url&&(i=this.url.resolve(i)),i)}}canonical(t){var e=t;return t?(this.settings.canonical?e=this.settings.canonical(t):e=this.resolve(t,!0),e):""}determineType(t){var e,i,r;if(this.settings.encoding==="base64")return Te.BASE64;if(typeof t!="string")return Te.BINARY;if(e=new De(t),i=e.path(),r=i.extension,r&&(r=r.replace(/\?.*$/,"")),!r)return Te.DIRECTORY;if(r==="epub")return Te.EPUB;if(r==="opf")return Te.OPF;if(r==="json")return Te.MANIFEST}unpack(t){this.package=t,this.packaging.metadata.layout===""?this.load(this.url.resolve(bh)).then(e=>{this.displayOptions=new Cr(e),this.loading.displayOptions.resolve(this.displayOptions)}).catch(e=>{this.displayOptions=new Cr,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new Cr,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new La(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(e=>{console.error(e)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(t){let e=t.navPath||t.ncxPath,i=t.toc;return i?new Promise((r,s)=>{this.navigation=new Er(i),t.pageList&&(this.pageList=new _r(t.pageList)),r(this.navigation)}):e?this.load(e,"xml").then(r=>(this.navigation=new Er(r),this.pageList=new _r(r),this.navigation)):new Promise((r,s)=>{this.navigation=new Er,this.pageList=new _r,r(this.navigation)})}section(t){return this.spine.get(t)}renderTo(t,e){return this.rendition=new en(this,e),this.rendition.attachTo(t),this.rendition}setRequestCredentials(t){this.settings.requestCredentials=t}setRequestHeaders(t){this.settings.requestHeaders=t}unarchive(t,e){return this.archive=new yh,this.archive.open(t,e)}store(t){let e=this.settings.replacements&&this.settings.replacements!=="none",i=this.url,r=this.settings.requestMethod||Bi.bind(this);return this.storage=new eo(t,r,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(o,a)=>{a.output=this.resources.substitute(o,a.url)};this.resources.settings.replacements=e||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new De("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=i,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((t,e)=>{e.output=this.resources.substitute(t,e.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(t){var e=new Tt(t),i=this.spine.get(e.spinePos),r=this.load.bind(this);return i?i.load(r).then(function(s){var o=e.toRange(i.document);return o}):new Promise((s,o)=>{o("CFI could not be found")})}key(t){var e=t||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${rr}:${e}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}Pe(rn.prototype);function oi(n,t){return new rn(n,t)}oi.VERSION=rr,typeof an<"u"&&(an.EPUBJS_VERSION=rr),oi.Book=rn,oi.Rendition=en,oi.Contents=Jr,oi.CFI=Tt,oi.utils=_a;export{rn as Book,Jr as Contents,Tt as EpubCFI,zs as Layout,en as Rendition,oi as default};
