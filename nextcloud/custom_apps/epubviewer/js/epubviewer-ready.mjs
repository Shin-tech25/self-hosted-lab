/*! third party licenses: js/vendor.LICENSE.txt */
document.onreadystatechange=function(){if(document.readyState==="complete"){const n=t("type"),a=t("file"),e={},s=$(".session");switch(e.session={},e.session.filename=decodeURI(s.data("filename")),e.session.format=s.data("filetype"),e.session.fileId=s.data("fileid"),e.session.title=e.session.filename,e.session.nonce=s.data("nonce")||"",e.session.version=s.data("version")||"",e.session.annotations=s.data("annotations")||{},e.session.fileId=s.data("fileid")||"",e.session.scope=s.data("scope")||"",e.session.cursor=s.data("cursor")||{},e.session.defaults=s.data("defaults")||{},e.session.preferences=s.data("preferences")||{},e.session.defaults=s.data("defaults")||{},e.session.basePath=s.data("basepath"),e.session.staticPath=s.data("staticpath"),e.session.downloadLink=s.data("downloadlink"),e.session.getPreference=function(o){return $.get(e.session.basePath+"preference/"+e.session.fileId+"/"+e.session.scope+"/"+o)},e.session.setPreference=function(o,i){return $.post(e.session.basePath+"preference",{fileId:e.session.fileId,scope:e.session.scope,name:o,value:JSON.stringify(i)})},e.session.deletePreference=function(o){return $.delete(e.session.basePath+"preference/"+e.session.fileId+"/"+e.session.scope+"/"+o)},e.session.getDefault=function(o){return $.get(e.session.basePath+"preference/default/"+e.session.scope+"/"+o)},e.session.setDefault=function(o,i){return $.post(e.session.basePath+"preference/default",{scope:e.session.scope,name:o,value:JSON.stringify(i)})},e.session.deleteDefault=function(o){return $.delete(e.session.basePath+"preference/default/"+e.session.scope+"/"+o)},e.session.getBookmark=function(o,i){return $.get(e.session.basePath+"bookmark/"+e.session.fileId+"/"+i+"/"+o)},e.session.setBookmark=function(o,i,d,l){return $.post(e.session.basePath+"bookmark",{fileId:e.session.fileId,name:o,value:JSON.stringify(i),type:d,content:JSON.stringify(l)})},e.session.deleteBookmark=function(o){return $.delete(e.session.basePath+"bookmark/"+e.session.fileId+"/"+o)},e.session.getCursor=function(){return $.get(e.session.basePath+"bookmark/cursor/"+e.session.fileId)},e.session.setCursor=function(o){return $.post(e.session.basePath+"bookmark/cursor",{fileId:e.session.fileId,value:JSON.stringify(o)})},e.session.deleteCursor=function(){return $.delete(e.session.basePath+"bookmark/cursor/"+e.session.fileId)},n){case"application/epub+zip":e.contained=!0,r(a,e);break;case"application/x-cbr":case"application/x-cbz":case"application/comicbook+7z":case"application/comicbook+ace":case"application/comicbook+rar":case"application/comicbook+tar":case"application/comicbook+truecrypt":case"application/comicbook+zip":c(a,e);break;case"application/pdf":f(a,e);break;default:console.log(n+" is not supported by Reader")}}function t(n){return new URLSearchParams(window.location.search).get(n)??""}function r(n,a){const e=$(".session"),s=e.data("staticpath");EPUBJS.filePath=location.origin+s+"js/epubjs/",EPUBJS.cssPath="../../.."+s+"js/epubjs/css/",EPUBJS.basePath=location.origin+e.data("basepath"),EPUBJS.staticPath=location.origin+s,ePubViewer(n,a)}function c(n,a){CBRJS.filePath="js/cbrjs/",cbReader(n,a)}function f(n,a){PDFJS.filePath="js/pdfjs/",PDFJS.imageResourcesPath="js/pdfjs/css/images/",PDFJS.workerSrc=a.session.staticPath+"js/pdfjs/lib/pdf.worker.js",pdfReader(n,a)}};
