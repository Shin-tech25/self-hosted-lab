{"version":3,"file":"onlyoffice-template.js?v=3a9bc33a796c0e1aeb70","mappings":"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","sources":["webpack:///onlyoffice/src/template.js"],"sourcesContent":["/**\n *\n * (c) Copyright Ascensio System SIA 2025\n *\n * This program is a free software product.\n * You can redistribute it and/or modify it under the terms of the GNU Affero General Public License\n * (AGPL) version 3 as published by the Free Software Foundation.\n * In accordance with Section 7(a) of the GNU AGPL its Section 15 shall be amended to the effect\n * that Ascensio System SIA expressly excludes the warranty of non-infringement of any third-party rights.\n *\n * This program is distributed WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * For details, see the GNU AGPL at: http://www.gnu.org/licenses/agpl-3.0.html\n *\n * You can contact Ascensio System SIA at 20A-12 Ernesta Birznieka-Upisha street, Riga, Latvia, EU, LV-1050.\n *\n * The interactive user interfaces in modified source and object code versions of the Program\n * must display Appropriate Legal Notices, as required under Section 5 of the GNU AGPL version 3.\n *\n * Pursuant to Section 7(b) of the License you must retain the original Product logo when distributing the program.\n * Pursuant to Section 7(e) we decline to grant you any rights under trademark law for use of our trademarks.\n *\n * All the Product's GUI elements, including illustrations and icon sets, as well as technical\n * writing content are licensed under the terms of the Creative Commons Attribution-ShareAlike 4.0 International.\n * See the License terms at http://creativecommons.org/licenses/by-sa/4.0/legalcode\n *\n */\n\n/* global _, jQuery */\n\n/**\n * @param {object} $ JQueryStatic object\n * @param {object} OC Nextcloud OCA object\n */\n(function($, OC) {\n\n\tOCA.Onlyoffice = _.extend({\n\t\tAppName: 'onlyoffice',\n\t\ttemplates: null,\n\t}, OCA.Onlyoffice)\n\n\tOCA.Onlyoffice.OpenTemplatePicker = function(name, extension, type) {\n\n\t\t$('#onlyoffice-template-picker').remove()\n\n\t\t$.get(OC.filePath(OCA.Onlyoffice.AppName, 'templates', 'templatePicker.html'),\n\t\t\tfunction(tmpl) {\n\t\t\t\tconst $tmpl = $(tmpl)\n\t\t\t\tconst dialog = $tmpl.octemplate({\n\t\t\t\t\tdialog_name: 'onlyoffice-template-picker',\n\t\t\t\t\tdialog_title: t(OCA.Onlyoffice.AppName, 'Select template'),\n\t\t\t\t})\n\n\t\t\t\tOCA.Onlyoffice.AttachTemplates(dialog, type)\n\n\t\t\t\t$('body').append(dialog)\n\n\t\t\t\t$('#onlyoffice-template-picker').ocdialog({\n\t\t\t\t\tcloseOnEscape: true,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\ttext: t('core', 'Cancel'),\n\t\t\t\t\t\tclasses: 'cancel',\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t$(this).ocdialog('close')\n\t\t\t\t\t\t},\n\t\t\t\t\t}, {\n\t\t\t\t\t\ttext: t(OCA.Onlyoffice.AppName, 'Create'),\n\t\t\t\t\t\tclasses: 'primary',\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tconst templateId = this.dataset.templateId\n\t\t\t\t\t\t\tconst fileList = OCA.Files.App.fileList\n\t\t\t\t\t\t\tOCA.Onlyoffice.CreateFile(name + extension, fileList, templateId)\n\t\t\t\t\t\t\t$(this).ocdialog('close')\n\t\t\t\t\t\t},\n\t\t\t\t\t}],\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\tOCA.Onlyoffice.GetTemplates = function() {\n\t\tif (OCA.Onlyoffice.templates != null) {\n\t\t\treturn\n\t\t}\n\n\t\t$.get(OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/ajax/template'),\n\t\t\tfunction onSuccess(response) {\n\t\t\t\tif (response.error) {\n\t\t\t\t\tOC.Notification.show(response.error, {\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttimeout: 3,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tOCA.Onlyoffice.templates = response\n\n\t\t\t})\n\t}\n\n\tOCA.Onlyoffice.AddTemplate = function(file, callback) {\n\t\tconst data = new FormData()\n\t\tdata.append('file', file)\n\n\t\t$.ajax({\n\t\t\tmethod: 'POST',\n\t\t\turl: OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/ajax/template'),\n\t\t\tdata,\n\t\t\tprocessData: false,\n\t\t\tcontentType: false,\n\t\t\tsuccess: function onSuccess(response) {\n\t\t\t\tif (response.error) {\n\t\t\t\t\tcallback(null, response.error)\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tcallback(response, null)\n\t\t\t},\n\t\t})\n\t}\n\n\tOCA.Onlyoffice.DeleteTemplate = function(templateId, callback) {\n\t\t$.ajax({\n\t\t\tmethod: 'DELETE',\n\t\t\turl: OC.generateUrl('apps/' + OCA.Onlyoffice.AppName + '/ajax/template?templateId={templateId}',\n\t\t\t\t{\n\t\t\t\t\ttemplateId,\n\t\t\t\t}),\n\t\t\tsuccess: function onSuccess(response) {\n\t\t\t\tif (response) {\n\t\t\t\t\tcallback(response)\n\t\t\t\t}\n\t\t\t},\n\t\t})\n\t}\n\n\tOCA.Onlyoffice.AttachTemplates = function(dialog, type) {\n\t\tconst emptyItem = dialog[0].querySelector('.onlyoffice-template-item')\n\n\t\tOCA.Onlyoffice.templates.forEach(template => {\n\t\t\tif (template.type !== type) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst item = emptyItem.cloneNode(true)\n\n\t\t\t$(item.querySelector('label')).attr('for', 'template_picker-' + template.id)\n\t\t\titem.querySelector('input').id = 'template_picker-' + template.id\n\t\t\titem.querySelector('img').src = template.icon\n\t\t\titem.querySelector('p').textContent = template.name\n\t\t\titem.onclick = function() {\n\t\t\t\tdialog[0].dataset.templateId = template.id\n\t\t\t}\n\t\t\tdialog[0].querySelector('.onlyoffice-template-container').appendChild(item)\n\t\t})\n\n\t\t$(emptyItem.querySelector('label')).attr('for', 'template_picker-0')\n\t\temptyItem.querySelector('input').id = 'template_picker-0'\n\t\temptyItem.querySelector('input').checked = true\n\t\temptyItem.querySelector('img').src = OC.generateUrl('/core/img/filetypes/x-office-' + type + '.svg')\n\t\temptyItem.querySelector('p').textContent = t(OCA.Onlyoffice.AppName, 'Empty')\n\t\temptyItem.onclick = function() {\n\t\t\tdialog[0].dataset.templateId = '0'\n\t\t}\n\t}\n\n\tOCA.Onlyoffice.AttachItemTemplate = function(template) {\n\t\t$.get(OC.filePath(OCA.Onlyoffice.AppName, 'templates', 'templateItem.html'),\n\t\t\tfunction(item) {\n\t\t\t\titem = $(item)\n\n\t\t\t\titem.attr('data-id', template.id)\n\t\t\t\titem.children('img').attr('src', template.icon)\n\t\t\t\titem.children('p').text(template.name)\n\n\t\t\t\t$('.onlyoffice-template-container').append(item)\n\t\t\t})\n\t}\n\n\tOCA.Onlyoffice.TemplateExist = function(type) {\n\t\tconst isExist = OCA.Onlyoffice.templates.some((template) => {\n\t\t\treturn template.type === type\n\t\t})\n\n\t\treturn isExist\n\t}\n\n})(jQuery, OC)\n"],"names":["$","OC","OCA","Onlyoffice","_","extend","AppName","templates","OpenTemplatePicker","name","extension","type","remove","get","filePath","tmpl","dialog","octemplate","dialog_name","dialog_title","t","AttachTemplates","append","ocdialog","closeOnEscape","modal","buttons","text","classes","click","this","templateId","dataset","fileList","Files","App","CreateFile","GetTemplates","generateUrl","response","error","Notification","show","timeout","AddTemplate","file","callback","data","FormData","ajax","method","url","processData","contentType","success","DeleteTemplate","emptyItem","querySelector","forEach","template","item","cloneNode","attr","id","src","icon","textContent","onclick","appendChild","checked","AttachItemTemplate","children","TemplateExist","some","jQuery"],"sourceRoot":""}