!function(e,l){OCA.Onlyoffice=_.extend({AppName:"onlyoffice",templates:null},OCA.Onlyoffice),OCA.Onlyoffice.OpenTemplatePicker=function(c,o,a){e("#onlyoffice-template-picker").remove(),e.get(l.filePath(OCA.Onlyoffice.AppName,"templates","templatePicker.html"),(function(l){const n=e(l).octemplate({dialog_name:"onlyoffice-template-picker",dialog_title:t(OCA.Onlyoffice.AppName,"Select template")});OCA.Onlyoffice.AttachTemplates(n,a),e("body").append(n),e("#onlyoffice-template-picker").ocdialog({closeOnEscape:!0,modal:!0,buttons:[{text:t("core","Cancel"),classes:"cancel",click(){e(this).ocdialog("close")}},{text:t(OCA.Onlyoffice.AppName,"Create"),classes:"primary",click(){const t=this.dataset.templateId,l=OCA.Files.App.fileList;OCA.Onlyoffice.CreateFile(c+o,l,t),e(this).ocdialog("close")}}]})}))},OCA.Onlyoffice.GetTemplates=function(){null==OCA.Onlyoffice.templates&&e.get(l.generateUrl("apps/"+OCA.Onlyoffice.AppName+"/ajax/template"),(function(e){e.error?l.Notification.show(e.error,{type:"error",timeout:3}):OCA.Onlyoffice.templates=e}))},OCA.Onlyoffice.AddTemplate=function(t,c){const o=new FormData;o.append("file",t),e.ajax({method:"POST",url:l.generateUrl("apps/"+OCA.Onlyoffice.AppName+"/ajax/template"),data:o,processData:!1,contentType:!1,success:function(e){e.error?c(null,e.error):c(e,null)}})},OCA.Onlyoffice.DeleteTemplate=function(t,c){e.ajax({method:"DELETE",url:l.generateUrl("apps/"+OCA.Onlyoffice.AppName+"/ajax/template?templateId={templateId}",{templateId:t}),success:function(e){e&&c(e)}})},OCA.Onlyoffice.AttachTemplates=function(c,o){const a=c[0].querySelector(".onlyoffice-template-item");OCA.Onlyoffice.templates.forEach((t=>{if(t.type!==o)return;const l=a.cloneNode(!0);e(l.querySelector("label")).attr("for","template_picker-"+t.id),l.querySelector("input").id="template_picker-"+t.id,l.querySelector("img").src=t.icon,l.querySelector("p").textContent=t.name,l.onclick=function(){c[0].dataset.templateId=t.id},c[0].querySelector(".onlyoffice-template-container").appendChild(l)})),e(a.querySelector("label")).attr("for","template_picker-0"),a.querySelector("input").id="template_picker-0",a.querySelector("input").checked=!0,a.querySelector("img").src=l.generateUrl("/core/img/filetypes/x-office-"+o+".svg"),a.querySelector("p").textContent=t(OCA.Onlyoffice.AppName,"Empty"),a.onclick=function(){c[0].dataset.templateId="0"}},OCA.Onlyoffice.AttachItemTemplate=function(t){e.get(l.filePath(OCA.Onlyoffice.AppName,"templates","templateItem.html"),(function(l){(l=e(l)).attr("data-id",t.id),l.children("img").attr("src",t.icon),l.children("p").text(t.name),e(".onlyoffice-template-container").append(l)}))},OCA.Onlyoffice.TemplateExist=function(e){return OCA.Onlyoffice.templates.some((t=>t.type===e))}}(jQuery,OC);
//# sourceMappingURL=onlyoffice-template.js.map?v=3a9bc33a796c0e1aeb70