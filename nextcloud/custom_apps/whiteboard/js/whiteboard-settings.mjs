/*! third party licenses: js/vendor.LICENSE.txt */
import{n as f,N as k,a as N,b as S,c as z,l as A,p as F,V as m}from"./NcLoadingIcon-DT2u8-xt.chunk.mjs";import{l as v,_ as H}from"./index-BZGs7a1j.chunk.mjs";import{g as M}from"./vendor-DscDELSF.chunk.mjs";var $=/["'&<>]/,V=U;function U(t){var e=""+t,r=$.exec(e);if(!r)return e;var i,a="",n=0,o=0;for(n=r.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==n&&(a+=e.substring(o,n)),o=n+1,a+=i}return o!==n?a+e.substring(o,n):a}const y=M(V),I={name:"CheckboxMarkedCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var B=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon checkbox-marked-circle-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},j=[],E=f(I,B,j,!1,null,null);const T=E.exports,W={name:"AlertDecagramIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Z=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon alert-decagram-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M23,12L20.56,9.22L20.9,5.54L17.29,4.72L15.4,1.54L12,3L8.6,1.54L6.71,4.72L3.1,5.53L3.44,9.21L1,12L3.44,14.78L3.1,18.47L6.71,19.29L8.6,22.47L12,21L15.4,22.46L17.29,19.28L20.9,18.46L20.56,14.78L23,12M13,17H11V15H13V17M13,13H11V7H13V13Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},D=[],R=f(W,Z,D,!1,null,null);const q=R.exports,G={name:"AlertIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var J=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon alert-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},K=[],O=f(G,J,K,!1,null,null);const C=O.exports,P={name:"InformationIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Q=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon information-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(r){return t.$emit("click",r)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},X=[],Y=f(P,Q,X,!1,null,null);const tt=Y.exports,et={name:"NcNoteCard",props:{type:{type:String,default:"warning",validator:t=>["success","info","warning","error"].includes(t)},showAlert:{type:Boolean,default:!1},heading:{type:String,default:""},text:{type:String,default:""}},computed:{shouldShowAlert(){return this.showAlert||this.type==="error"},icon(){switch(this.type){case"error":return q;case"success":return T;case"info":return tt;case"warning":return C;default:return C}},color(){switch(this.type){case"error":return"var(--color-error)";case"success":return"var(--color-success)";case"info":return"var(--color-info)";case"warning":return"var(--color-warning)";default:return"var(--color-warning)"}}}};var rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"notecard",class:`notecard--${t.type}`,attrs:{role:t.shouldShowAlert?"alert":"note"}},[t._t("icon",function(){return[e(t.icon,{tag:"component",staticClass:"notecard__icon",class:{"notecard__icon--heading":t.heading},attrs:{"fill-color":t.color,size:20}})]}),e("div",[t.heading?e("p",{staticClass:"notecard__heading"},[t._v(" "+t._s(t.heading)+" ")]):t._e(),t._t("default",function(){return[e("p",{staticClass:"notecard__text"},[t._v(" "+t._s(t.text)+" ")])]})],2)],2)},it=[],nt=f(et,rt,it,!1,null,"7df28e9e");const at=nt.exports;function ot(t,e,r,i,a,n,o,d){var s=typeof t=="function"?t.options:t;return e&&(s.render=e,s.staticRenderFns=r,s._compiled=!0),s._scopeId="data-v-"+n,{exports:t,options:s}}const st={name:"Settings",components:{NcTextField:k,NcButton:N,NcLoadingIcon:S,NcNoteCard:at},data(){return{serverUrl:v("whiteboard","url",""),secret:v("whiteboard","secret",""),maxFileSize:v("whiteboard","maxFileSize",10),validConnection:void 0,connectionError:void 0}},mounted(){this.verifyConnection({jwt:v("whiteboard","jwt","")})},methods:{async submit(){const{data:t}=await z.post(H("/apps/whiteboard/settings"),{serverUrl:this.serverUrl,secret:this.secret,maxFileSize:this.maxFileSize});await this.verifyConnection(t)},async verifyConnection(t){const e=new URL(this.serverUrl),r=e.pathname.replace(/\/$/,"")+"/socket.io",i=A(e.origin,{path:r,withCredentials:!0,auth:{secret:t.jwt},transports:["websocket"],timeout:1e4});i.on("connect",()=>{this.validConnection=!0,this.connectionError=void 0}),i.on("connect_error",a=>{this.validConnection=a.message==="Connection verified",this.connectionError=this.validConnection===!1?a.message:void 0,i.close()}),i.connect()}}};var lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("h3",[t._v(t._s(t.t("whiteboard","Whiteboard settings")))]),t.validConnection===!0?e("NcNoteCard",{attrs:{type:"success"}},[t._v(" "+t._s(t.t("whiteboard","Whiteboard backend server is configured and connected."))+" ")]):t.validConnection===!1?e("NcNoteCard",{attrs:{type:"error"}},[t._v(" "+t._s(t.t("whiteboard","Failed to verify the connection:"))+" "+t._s(t.connectionError)+" ")]):e("NcNoteCard",{attrs:{type:"info",text:t.t("whiteboard","Verifying connectionâ€¦")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("NcLoadingIcon")]},proxy:!0}])}),e("p",[t._v(" "+t._s(t.t("whiteboard","Whiteboard requires a separate collaboration server that is connected to Nextcloud."))+" "),e("a",{staticClass:"external",attrs:{href:"https://github.com/nextcloud/whiteboard?tab=readme-ov-file#backend",rel:"noreferrer noopener",target:"_blank"}},[t._v(t._s(t.t("whiteboard","See the documentation on how to install it.")))])]),e("form",{on:{submit:function(r){return r.preventDefault(),t.submit.apply(null,arguments)}}},[e("p",[e("NcTextField",{attrs:{label:t.t("whiteboard","Whiteboard server URL"),value:t.serverUrl},on:{"update:value":function(r){t.serverUrl=r}}})],1),e("p",[e("NcTextField",{attrs:{label:t.t("whiteboard","Shared secret"),value:t.secret},on:{"update:value":function(r){t.secret=r}}})],1),e("p",[e("NcTextField",{attrs:{label:t.t("whiteboard","Max file size"),value:t.maxFileSize},on:{"update:value":function(r){t.maxFileSize=r}}})],1),e("p",[e("NcButton",{attrs:{type:"submit",disabled:!t.serverUrl},on:{click:function(r){return r.preventDefault(),t.submit.apply(null,arguments)}}},[t._v(" "+t._s(t.t("whiteboard","Save settings"))+" ")])],1)])],1)},ct=[],ut=ot(st,lt,ct,!1,null,"17db51c1");const dt=ut.exports;function x(t){var e,r,i,a;return{translations:(r=(e=window._oc_l10n_registry_translations)==null?void 0:e[t])!=null?r:{},pluralFunction:(a=(i=window._oc_l10n_registry_plural_functions)==null?void 0:i[t])!=null?a:n=>n}}function h(t,e,r,i,a){const n={escape:!0,sanitize:!0,...a||{}},o=c=>c,d=n.sanitize?F.sanitize:o,s=n.escape?y:o,p=c=>typeof c=="string"||typeof c=="number",_=(c,g,L)=>c.replace(/%n/g,""+L).replace(/{([^{}]*)}/g,(b,w)=>{if(g===void 0||!(w in g))return s(b);const u=g[w];return p(u)?s("".concat(u)):typeof u=="object"&&p(u.value)?(u.escape!==!1?y:o)("".concat(u.value)):s(b)});let l=x(t).translations[e]||e;return l=Array.isArray(l)?l[0]:l,d(typeof r=="object"||i!==void 0?_(l,r,i):l)}function pt(t,e,r,i,a,n){const o="_"+e+"_::_"+r+"_",d=x(t),s=d.translations[o];if(typeof s<"u"){const p=s;if(Array.isArray(p)){const _=d.pluralFunction(i);return h(t,p[_],a,i,n)}}return i===1?h(t,e,a,i,n):h(t,r,a,i,n)}m.prototype.t=h,m.prototype.n=pt,new m({render:t=>t(dt,{})}).$mount("#admin-vue");
